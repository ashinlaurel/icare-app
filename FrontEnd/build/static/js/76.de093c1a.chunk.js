(this["webpackJsonpwindmill-dashboard-react"]=this["webpackJsonpwindmill-dashboard-react"]||[]).push([[76],{1210:function(e,t,a){"use strict";a.r(t);var l=a(5),n=a.n(l),c=a(12),r=a(3),o=a(0),s=a.n(o),m=a(20),u=a.n(m),i=a(9),b=a.n(i),d=a(207),p=a(18),v=a(36),E=a(2),f=a(10),y=(a(202),a(44),a(43)),g=a(37);t.default=function(){var e=Object(o.useContext)(y.a),t=(e.topheading,e.setTopHeading),a=Object(o.useState)(!1),l=Object(r.a)(a,2),m=(l[0],l[1],Object(o.useState)(1)),i=Object(r.a)(m,2),h=i[0],x=i[1],w=Object(o.useState)([]),T=Object(r.a)(w,2),j=T[0],C=T[1],O=Object(o.useState)(!0),N=Object(r.a)(O,2),S=N[0],k=N[1],I=Object(o.useState)(!0),D=Object(r.a)(I,2),Y=(D[0],D[1],Object(o.useState)("")),z=Object(r.a)(Y,2),P=z[0],M=z[1],B=Object(o.useState)(""),A=Object(r.a)(B,2),L=A[0],F=(A[1],Object(o.useState)("")),q=Object(r.a)(F,2),H=q[0],K=q[1],R=Object(o.useState)(""),V=Object(r.a)(R,2),W=V[0],_=(V[1],Object(o.useState)("")),G=Object(r.a)(_,2),J=G[0],Q=(G[1],Object(o.useState)({})),U=Object(r.a)(Q,2),X=U[0],Z=(U[1],Object(o.useState)("")),$=Object(r.a)(Z,2),ee=($[0],$[1],Object(o.useState)("")),te=Object(r.a)(ee,2),ae=(te[0],te[1],Object(o.useState)("")),le=Object(r.a)(ae,2),ne=le[0],ce=le[1],re=Object(o.useState)(""),oe=Object(r.a)(re,2),se=oe[0],me=oe[1],ue=Object(o.useState)(20),ie=Object(r.a)(ue,2),be=ie[0],de=ie[1],pe=Object(o.useState)(-1),ve=Object(r.a)(pe,2),Ee=ve[0],fe=ve[1];Object(o.useEffect)((function(){return t("Purchase History"),function(){t("")}}),[]),Object(o.useEffect)((function(){!function(){var e=Object(c.a)(n.a.mark((function e(){var t,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getter called"),t={pages:{page:h,limit:10},filters:{systype:P,location:H,searchquery:ne,vendorsearchquery:se,stocktype:L}},e.prev=2,e.next=5,b()({url:"".concat(f.API,"/inventory/").concat(p.a.getId(),"/getallhistory"),method:"POST",data:t});case 5:a=e.sent,console.log(a.data.out),de(a.data.total),C(a.data.out),e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(2),e.t0;case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}()()}),[h,H,W,J,P,S,L]),console.log(X);var ye=function(){var e=Object(c.a)(n.a.mark((function e(){var t,a,l,c,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="Sl No,Stock Location,Stock Type,Sys-Type,Category,Description,Serial Number,Warranty,WTY Expiry Date,Status,Purc.Type,Purc Location,Inv.Type,Vendor,Inv No,Inv Date,Rate,Tax Category,GST,Amount,TCS,Net Amount\n",l={pages:{page:1,limit:1e10},filters:{systype:P,location:H,searchquery:ne,vendorsearchquery:se,stocktype:L}},e.prev=2,e.next=5,b()({url:"".concat(f.API,"/inventory/").concat(p.a.getId(),"/getallhistory"),method:"POST",data:l});case 5:c=e.sent,console.log(c.data.out),a=c.data.out,e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(2),e.t0;case 13:a.map((function(e,a){t+="Invoice No: ".concat(e.invnumber,",Date: ").concat(u()(e.invdate).format("DD-MM-YYYY"),",Inv Location: ").concat(e.location,",Purchase Type: ").concat(e.purchlocation,",Inv Type: ").concat(e.invtype,"\n"),e.invItems.map((function(a,l){t+='"'.concat(l+1,'","').concat(a.location,'","').concat(Object(g.capitalize)(a.stocktype),'","').concat(Object(g.capitalize)(a.systype),'","').concat(Object(g.capitalize)(a.type),'","').concat(a.name,'","').concat(a.sno,'","').concat(a.wty,'","').concat(a.expirydate,'","').concat(a.condition,'","').concat(a.purchtype,'","').concat(a.purchlocation,'","').concat(a.invtype,'","').concat(a.vendor,'","').concat(e.invnumber,'","').concat(u()(e.invdate).format("DD-MM-YYYY"),'","').concat(a.rate,'","').concat(a.taxcategory,'","').concat(Number(a.nettax).toFixed(2),'","').concat(a.amount,'","').concat(Number(a.tcs).toFixed(2),'","').concat(Number(a.invamount).toFixed(2),'",\n')}))})),r=new Blob([t],{type:"text/csv;charset=utf-8;"}),Object(d.saveAs)(r,"Inventory.csv");case 16:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}();return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"mb-64 mt-4"},s.a.createElement("div",{className:""},s.a.createElement("div",{class:"my-2 flex sm:flex-row flex-col items-start sm:items-center sm:justify-left h-full space-x-2 "},s.a.createElement("div",{class:"relative mx-1 "},s.a.createElement("select",{class:" shadow-md h-full rounded border block appearance-none w-full bg-white border-gray-400 text-gray-700 py-2 px-4 pr-8 leading-tight focus:outline-none   focus:bg-white focus:border-gray-500",value:P,onChange:function(e){M(e.target.value)}},s.a.createElement("option",{value:"",disabled:!0,selected:!0},"Type"),s.a.createElement("option",{value:""},"All"),s.a.createElement("option",{value:"item"},"Item"),s.a.createElement("option",{value:"full system"},"Full System")),s.a.createElement("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},s.a.createElement("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},s.a.createElement("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})))),s.a.createElement("div",{class:"relative mx-1 "},s.a.createElement("select",{class:" shadow-md h-full rounded border block appearance-none w-full bg-white border-gray-400 text-gray-700 py-2 px-4 pr-8 leading-tight focus:outline-none   focus:bg-white focus:border-gray-500",value:H,onChange:function(e){K(e.target.value)}},s.a.createElement("option",{value:"",disabled:!0,selected:!0},"Location"),s.a.createElement("option",{value:""},"All"),s.a.createElement("option",{value:"Trivandrum"},"Trivandrum"),s.a.createElement("option",{value:"Kottayam"},"Kottayam"),s.a.createElement("option",{value:"Kozhikode"},"Kozhikode")),s.a.createElement("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},s.a.createElement("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},s.a.createElement("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})))),s.a.createElement("div",{class:"block relative xl:ml-64"},s.a.createElement("span",{class:"h-full absolute inset-y-0 left-0 flex items-center pl-2"},s.a.createElement("svg",{viewBox:"0 0 24 24",class:"h-4 w-4 fill-current text-gray-500"},s.a.createElement("path",{d:"M10 4a6 6 0 100 12 6 6 0 000-12zm-8 6a8 8 0 1114.32 4.906l5.387 5.387a1 1 0 01-1.414 1.414l-5.387-5.387A8 8 0 012 10z"}))),s.a.createElement("form",{onSubmit:function(e){e.preventDefault(),k(!S)}},s.a.createElement("input",{value:ne,onChange:function(e){return ce(e.target.value)},placeholder:"Search Invoice Number",class:"shadow-md z-20 appearance-none rounded border border-gray-400 border-b block pl-8 pr-6 py-2 w-full bg-white text-sm placeholder-gray-400 text-gray-700 focus:bg-white focus:placeholder-gray-600 focus:text-gray-700 focus:outline-none"}))),s.a.createElement("div",{class:"block relative xl:ml-64"},s.a.createElement("span",{class:"h-full absolute inset-y-0 left-0 flex items-center pl-2"},s.a.createElement("svg",{viewBox:"0 0 24 24",class:"h-4 w-4 fill-current text-gray-500"},s.a.createElement("path",{d:"M10 4a6 6 0 100 12 6 6 0 000-12zm-8 6a8 8 0 1114.32 4.906l5.387 5.387a1 1 0 01-1.414 1.414l-5.387-5.387A8 8 0 012 10z"}))),s.a.createElement("form",{onSubmit:function(e){e.preventDefault(),k(!S)}},s.a.createElement("input",{value:se,onChange:function(e){return me(e.target.value)},placeholder:"Search Vendor",class:"shadow-md z-20 appearance-none rounded border border-gray-400 border-b block pl-8 pr-6 py-2 w-full bg-white text-sm placeholder-gray-400 text-gray-700 focus:bg-white focus:placeholder-gray-600 focus:text-gray-700 focus:outline-none"}))),s.a.createElement("div",{className:"flex justify-end items-end "},s.a.createElement(E.Button,{onClick:function(){ye()},layout:"outline"},"Export")),s.a.createElement("div",{className:"flex justify-end items-end "},s.a.createElement(E.Button,{onClick:Object(c.a)(n.a.mark((function e(){var t,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.prev=1,e.next=4,b()({url:"".concat(f.API,"/inventory/").concat(p.a.getId(),"/fixpurch"),method:"POST",data:t});case 4:a=e.sent,console.log(a.data.out),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(1),e.t0;case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),layout:"outline"},"Fix Inventory")))),s.a.createElement(E.TableContainer,{className:"mt-4"},s.a.createElement(E.Table,null,s.a.createElement(E.TableHeader,null,s.a.createElement("tr",{className:"flex flex-row justify-between"},s.a.createElement(E.TableCell,null," Type"),s.a.createElement(E.TableCell,null,"Vendor"),s.a.createElement(E.TableCell,null,"Inventory No."),s.a.createElement(E.TableCell,null,"Date"),s.a.createElement(E.TableCell,null,"Location"),s.a.createElement(E.TableCell,null,"No.Items"),s.a.createElement(E.TableCell,null,s.a.createElement("span",{className:"cursor-pointer",onClick:function(){return fe(-1)}},"Items")))),s.a.createElement(E.TableBody,null,j.map((function(e,t){return s.a.createElement("div",{className:"flex flex-col justify-around"},s.a.createElement(E.TableRow,{className:"hover:shadow-lg dark:hover:bg-gray-600 flex flex-row justify-between  ".concat(Ee==e._id?"bg-blue-300 shadow-lg dark:bg-gray-600":"white"," "),key:t,onClick:function(){}},s.a.createElement(E.TableCell,{className:"w-8"},s.a.createElement("div",{className:"flex items-center text-sm "},s.a.createElement("div",null,s.a.createElement("p",{className:"font-semibold"},e.purchtype)))),s.a.createElement(E.TableCell,null,s.a.createElement("span",{className:"text-sm"},e.vendor)),s.a.createElement(E.TableCell,null,s.a.createElement("span",{className:"text-sm"},e.invnumber)),s.a.createElement(E.TableCell,null,s.a.createElement("span",{className:"text-sm"}," ",u()(e.invdate).format("DD/MM/YYYY"))),s.a.createElement(E.TableCell,null,s.a.createElement("span",{className:"text-sm"},e.location)),s.a.createElement(E.TableCell,null,s.a.createElement("span",{className:"text-sm"},e.invItems.length)),s.a.createElement(E.TableCell,{className:"text-center "},s.a.createElement(E.Button,{size:"icon","aria-label":"DropDown",onClick:function(){console.log(Ee),fe(Ee==t?-1:t)},className:"rounded-lg m-1"},s.a.createElement(v.DropdownIcon,{className:"w-5 h-5","aria-hidden":"true"})))),Ee==t?(a=e.invItems,s.a.createElement("div",{className:" bg-gray-200 dark:bg-gray-700 p-3 "},s.a.createElement("div",{className:"mb- mt-4"},s.a.createElement(E.TableContainer,{className:"mt-4"},s.a.createElement(E.Table,null,s.a.createElement(E.TableHeader,null,s.a.createElement("tr",null,s.a.createElement(E.TableCell,null,"Category"),s.a.createElement(E.TableCell,null,"Description"),s.a.createElement(E.TableCell,null,"Serial Number"),s.a.createElement(E.TableCell,null,"Location"),s.a.createElement(E.TableCell,null,"Invoice Number"),s.a.createElement(E.TableCell,null,"Inv Date"),s.a.createElement(E.TableCell,null,"Wty Expiry"),s.a.createElement(E.TableCell,null,"Status"))),s.a.createElement(E.TableBody,null,a.map((function(e,t){return s.a.createElement(E.TableRow,{className:"hover:shadow-lg dark:hover:bg-gray-600 ".concat(Ee==e._id?"bg-blue-300 shadow-lg dark:bg-gray-600":"white"," "),key:t,onClick:function(){fe(e._id)}},s.a.createElement(E.TableCell,{className:"w-8"},s.a.createElement("div",{className:"flex items-center text-sm "},s.a.createElement("div",null,s.a.createElement("p",{className:"font-semibold"},e.type)))),s.a.createElement(E.TableCell,null,s.a.createElement("span",{className:"text-sm"},e.name)),s.a.createElement(E.TableCell,null,s.a.createElement("span",{className:"text-sm"},e.sno)),s.a.createElement(E.TableCell,null,s.a.createElement("span",{className:"text-sm"},e.location)),s.a.createElement(E.TableCell,null,s.a.createElement("span",{className:"text-sm"},e.invnumber)),s.a.createElement(E.TableCell,null,s.a.createElement("span",{className:"text-sm"},u()(e.invdate).format("DD/MM/YY"))),s.a.createElement(E.TableCell,null,s.a.createElement("span",{className:"text-sm"},e.expirydate)),s.a.createElement(E.TableCell,null,s.a.createElement(E.Badge,{type:"Good"==e.condition?"primary":"danger"},e.condition)))})))))))):null);var a})))),s.a.createElement(E.TableFooter,null,s.a.createElement(E.Pagination,{totalResults:be,resultsPerPage:10,label:"Table navigation",onChange:function(e){x(e)}})))))}}}]);
//# sourceMappingURL=76.de093c1a.chunk.js.map