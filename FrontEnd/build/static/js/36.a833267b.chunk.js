(this["webpackJsonpwindmill-dashboard-react"]=this["webpackJsonpwindmill-dashboard-react"]||[]).push([[36],{1236:function(e,t,a){"use strict";a.r(t);var n=a(5),l=a.n(n),r=a(12),c=a(19),o=a(6),u=a(3),s=a(0),m=a.n(s),i=(a(9),a(10),a(191)),d=(a(193),a(2)),p=(a(24),a(201),a(205));var f=a(206);t.default=function(){var e=Object(s.useState)(!1),t=Object(u.a)(e,2),a=t[0],n=t[1],E=Object(s.useState)(!1),b=Object(u.a)(E,2),h=b[0],v=b[1],N=Object(s.useState)(!1),O=Object(u.a)(N,2),C=O[0],g=O[1],y=Object(s.useState)({_id:"",customerName:""}),w=Object(u.a)(y,2),k=w[0],x=w[1],j=Object(s.useState)({_id:"",accountName:""}),T=Object(u.a)(j,2),S=T[0],I=T[1],M=Object(s.useState)({unitName:"defaultUnit",assetId:[],address:"default",district:"default",state:"default",locationType:"default",pincode:"default",GSTnumber:"default",contactPerson:"default",contactNo:"default",altContact:"default",WhatsappNo:"default"}),P=Object(u.a)(M,2),A=P[0],B=P[1],F=function(e){return function(t){B(Object(o.a)(Object(o.a)({},A),{},Object(c.a)({},e,t.target.value)))}},_=function(){var e=Object(r.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=k._id&&""!=S._id){e.next=3;break}return g(!0),e.abrupt("return");case 3:a={customerId:k._id,customerName:k.customerMame,accountId:S._id,accountName:S.accountName,unitName:A.unitName,address:A.address,district:A.district,state:A.state,locationType:A.locationType,pincode:A.pincode,GSTnumber:A.GSTnumber,contactPerson:A.contactPerson,contactNo:A.contactNo,altContact:A.altContact,whatsappNo:A.WhatsappNo},Object(p.a)(a).then((function(e){console.log("Signed Up",e),v(!0)})).catch((function(e){console.log("err",e)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return m.a.createElement(m.a.Fragment,null,m.a.createElement(f.a,{isModalOpen:a,setIsModalOpen:n,setAccount:I,account:S,customer:k,setCustomer:x}),m.a.createElement(i.a,null,"Add Unit"),m.a.createElement("div",{className:"px-4 py-3 mb-8 bg-white rounded-lg shadow-md dark:bg-gray-800"},m.a.createElement(d.Label,{className:"font-bold"},m.a.createElement("span",null,"Add Unit")),m.a.createElement("hr",{className:"mb-5 mt-2"}),m.a.createElement(d.Label,null,m.a.createElement("span",null,"Unit Name"),m.a.createElement(d.Input,{className:"mt-1",type:"text",value:A.unitName,onChange:F("unitName")}))," ",m.a.createElement(d.Label,null,m.a.createElement("span",null,"Address"),m.a.createElement(d.Input,{className:"mt-1",type:"text",value:A.address,onChange:F("address")}))," ",m.a.createElement(d.Label,null,m.a.createElement("span",null,"District"),m.a.createElement(d.Input,{className:"mt-1",type:"text",value:A.district,onChange:F("district")}))," ",m.a.createElement(d.Label,null,m.a.createElement("span",null,"state"),m.a.createElement(d.Input,{className:"mt-1",type:"text",value:A.state,onChange:F("state")}))," ",m.a.createElement(d.Label,null,m.a.createElement("span",null,"Location Type"),m.a.createElement(d.Input,{className:"mt-1",type:"text",value:A.locationType,onChange:F("locationType")}))," ",m.a.createElement(d.Label,null,m.a.createElement("span",null,"PIN code"),m.a.createElement(d.Input,{className:"mt-1",type:"text",value:A.pincode,onChange:F("pincode")}))," ",m.a.createElement(d.Label,null,m.a.createElement("span",null,"GST Number"),m.a.createElement(d.Input,{className:"mt-1",type:"text",value:A.GSTnumber,onChange:F("GSTnumber")}))," ",m.a.createElement(d.Label,null,m.a.createElement("span",null,"Contact Person"),m.a.createElement(d.Input,{className:"mt-1",type:"text",value:A.contactPerson,onChange:F("contactPerson")}))," ",m.a.createElement(d.Label,null,m.a.createElement("span",null,"Contact Number"),m.a.createElement(d.Input,{className:"mt-1",type:"text",value:A.contactNo,onChange:F("contactNo")}))," ",m.a.createElement(d.Label,null,m.a.createElement("span",null,"Whatsapp Number"),m.a.createElement(d.Input,{className:"mt-1",type:"text",value:A.WhatsappNo,onChange:F("WhatsappNo")})),m.a.createElement("hr",{className:"my-8"}),m.a.createElement(d.Button,{onClick:function(){return n(!0)},"aria-label":"Notifications","aria-haspopup":"true",className:"mt-4 mx-3"},"Select Customer"),m.a.createElement("hr",{className:"my-8"}),m.a.createElement(d.Button,{onClick:_,"aria-label":"Notifications","aria-haspopup":"true",className:"mt-4"},"Create Unit")),m.a.createElement(m.a.Fragment,null,m.a.createElement(d.Modal,{isOpen:h,onClose:function(){return v(!1)}},m.a.createElement(d.ModalHeader,null,"Unit Created Successfully!"),m.a.createElement(d.ModalBody,null),m.a.createElement(d.ModalFooter,null,m.a.createElement(d.Button,{className:"w-full sm:w-auto",onClick:function(){return v(!1)}},"Okay!")))),m.a.createElement(m.a.Fragment,null,m.a.createElement(d.Modal,{isOpen:C,onClose:function(){return g(!1)}},m.a.createElement(d.ModalHeader,null,"Customer or Account Not Selected!"),m.a.createElement(d.ModalBody,null,"If Customer does not have any accounts under it, make them first."),m.a.createElement(d.ModalFooter,null,m.a.createElement(d.Button,{className:"w-full sm:w-auto",onClick:function(){return g(!1)}},"Okay!")))))}},201:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var n=a(5),l=a.n(n),r=a(12),c=a(3),o=a(0),u=a.n(o),s=a(9),m=a.n(s),i=a(2),d=a(196),p=(a(198),a(10));function f(e){var t=e.isModalOpen,a=e.setIsModalOpen,n=(e.customer,e.setCustomer),s=Object(o.useState)([]),f=Object(c.a)(s,2),E=f[0],b=f[1],h=Object(o.useState)(0),v=Object(c.a)(h,2),N=v[0],O=v[1],C=Object(o.useState)(""),g=Object(c.a)(C,2),y=g[0],w=g[1],k=Object(o.useState)(""),x=Object(c.a)(k,2),j=(x[0],x[1],function(e){w(e.target.value)}),T=function(){var e=Object(r.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={search:y,role:1},e.prev=2,e.next=5,m()({url:"".concat(p.API,"/customer/customers"),method:"POST",data:a});case 5:n=e.sent,console.log(n.data),b(n.data),e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(2),e.t0;case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){!function(){var e=Object(r.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={search:y,role:1},e.prev=1,e.next=4,m()({url:"".concat(p.API,"/customer/customers"),method:"POST",data:t});case 4:a=e.sent,console.log(a.data),b(a.data),e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(1),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}()()}),[]);var S=function(){var e=Object(r.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n({_id:t._id,customerName:t.name}),a(!1);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,u.a.createElement(i.Modal,{isOpen:t,onClose:function(){return a(!1)}},u.a.createElement(i.ModalHeader,null,"Select Customer"),u.a.createElement(i.ModalBody,{className:"overflow-y-scroll h-64"},u.a.createElement(d.d,{selectedIndex:N,onSelect:function(e){return O(e)}},u.a.createElement(d.b,null,u.a.createElement(d.a,null,"Customer")),u.a.createElement(d.c,null,u.a.createElement(i.TableContainer,null,u.a.createElement(i.Table,null,u.a.createElement(i.TableHeader,null,u.a.createElement("tr",null,u.a.createElement(i.TableCell,null,"Customer")),u.a.createElement("tr",null,u.a.createElement(i.TableCell,null,u.a.createElement("form",{onSubmit:T},u.a.createElement("input",{className:"block w-full pr-20 text-sm text-black dark:text-gray-300 dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:focus:shadow-outline-gray form-input",placeholder:"Search Customers",onChange:j}))))),u.a.createElement(i.TableBody,null,E.map((function(e,t){return u.a.createElement(i.TableRow,{key:t,className:"hover:bg-purple-200 cursor-pointer",onClick:function(){return S(e)}},u.a.createElement(i.TableCell,null,u.a.createElement("div",null,u.a.createElement("div",null,u.a.createElement("p",{className:"font-semibold"},e.name)))))})))),u.a.createElement(i.TableFooter,null))))),u.a.createElement(i.ModalFooter,null,u.a.createElement(i.Button,{className:"w-full sm:w-auto",onClick:function(){a(!1)}},"Select"))))}},205:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(9),l=a.n(n),r=a(10),c=a(18),o=function(e){return l.a.post("".concat(r.API,"/unit/").concat(c.a.getId(),"/create"),e).then((function(e){return console.log("h",e.data),e.data})).catch((function(e){if(console.log("ERRRROs"),e.response)throw console.log(e.response.data),console.log(e.response.status),e.response.data.errors}))}},206:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var n=a(5),l=a.n(n),r=a(12),c=a(3),o=a(0),u=a.n(o),s=a(9),m=a.n(s),i=a(2),d=a(196),p=(a(198),a(10));function f(e){var t=e.isModalOpen,a=e.setIsModalOpen,n=e.account,s=e.setAccount,f=e.customer,E=e.setCustomer,b=Object(o.useState)([]),h=Object(c.a)(b,2),v=h[0],N=h[1],O=Object(o.useState)([]),C=Object(c.a)(O,2),g=C[0],y=C[1],w=Object(o.useState)(0),k=Object(c.a)(w,2),x=k[0],j=k[1],T=Object(o.useState)(""),S=Object(c.a)(T,2),I=S[0],M=S[1],P=function(e){M(e.target.value)},A=function(){var e=Object(r.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={search:I,role:1},e.prev=2,e.next=5,m()({url:"".concat(p.API,"/customer/customers"),method:"POST",data:a});case 5:n=e.sent,console.log(n.data),N(n.data),e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(2),e.t0;case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){!function(){var e=Object(r.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={search:I,role:1},e.prev=1,e.next=4,m()({url:"".concat(p.API,"/customer/customers"),method:"POST",data:t});case 4:a=e.sent,console.log(a.data),N(a.data),e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(1),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}()()}),[]);var B=function(){var e=Object(r.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E({_id:t._id,customerName:t.name}),s({_id:"",accountName:""}),e.prev=2,e.next=5,m.a.post("".concat(p.API,"/customer/accounts"),{customerId:t._id});case 5:a=e.sent,console.log(a.data),y(a.data),j(1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.log("axiosErr",e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(r.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),s({_id:t._id,accountName:t.name});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,u.a.createElement(i.Modal,{isOpen:t,onClose:function(){return a(!1)}},u.a.createElement(i.ModalHeader,null,"Select ",0==x?u.a.createElement(u.a.Fragment,null,"Customer"):u.a.createElement(u.a.Fragment,null,"Account")),u.a.createElement(i.ModalBody,{className:"overflow-y-scroll h-64"},u.a.createElement(d.d,{selectedIndex:x,onSelect:function(e){return j(e)}},u.a.createElement(d.b,null,u.a.createElement(d.a,null,"Customer"),u.a.createElement(d.a,null,"Account")),u.a.createElement(d.c,null,u.a.createElement(i.TableContainer,null,u.a.createElement(i.Table,null,u.a.createElement(i.TableHeader,null,u.a.createElement("tr",null,u.a.createElement(i.TableCell,null,"Customer")),u.a.createElement("tr",null,u.a.createElement(i.TableCell,null,u.a.createElement("form",{onSubmit:A},u.a.createElement("input",{className:"block w-full pr-20 text-sm text-black dark:text-gray-300 dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:focus:shadow-outline-gray form-input",placeholder:"Search Customers",onChange:P}))))),u.a.createElement(i.TableBody,null,v.map((function(e,t){return u.a.createElement(i.TableRow,{key:t,className:"hover:bg-purple-200 cursor-pointer",onClick:function(){return B(e)}},u.a.createElement(i.TableCell,null,u.a.createElement("div",null,u.a.createElement("div",null,u.a.createElement("p",{className:"font-semibold"},e.name)))))})))),u.a.createElement(i.TableFooter,null))),u.a.createElement(d.c,null,u.a.createElement(i.TableContainer,null,u.a.createElement(i.Table,null,u.a.createElement(i.TableHeader,null,u.a.createElement("tr",null,u.a.createElement(i.TableCell,null,"Account"))),u.a.createElement(i.TableBody,null,g.map((function(e,t){return u.a.createElement(i.TableRow,{key:t,className:"hover:bg-purple-200 cursor-pointer",onClick:function(){return F(e)}},u.a.createElement(i.TableCell,null,u.a.createElement("div",null,u.a.createElement("div",null,u.a.createElement("p",{className:"font-semibold"},e.name)))))})))),u.a.createElement(i.TableFooter,null))))),u.a.createElement(i.ModalFooter,null,u.a.createElement(i.Badge,{className:"mx-2 text-md",type:"success"},"Customer: ",f.customerName),u.a.createElement(i.Badge,{className:"mx-2 text-md",type:"success"},"Account : ",n.accountName),u.a.createElement(i.Button,{className:"w-full sm:w-auto",onClick:function(){a(!1),y([])}},"Select"))))}}}]);
//# sourceMappingURL=36.a833267b.chunk.js.map