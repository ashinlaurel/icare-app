(this["webpackJsonpwindmill-dashboard-react"]=this["webpackJsonpwindmill-dashboard-react"]||[]).push([[54],{1062:function(e,t,a){"use strict";a.r(t);var n=a(3),l=a.n(n),r=a(9),c=a(2),o=a(0),s=a.n(o),i=a(19),u=a.n(i),m=a(8),d=a.n(m),p=a(15),E=(a(86),a(28)),f=a(1),b=a(10),g=a(30),w=a(6),h=a(29);a(18);t.default=function(){var e=Object(o.useState)(!1),t=Object(c.a)(e,2),a=t[0],n=t[1],i=Object(o.useState)(!1),m=Object(c.a)(i,2),v=m[0],S=m[1],C=Object(o.useContext)(g.a),x=(C.bbaropen,C.setBBarOpen),O=C.setAssetDetails,y=(C.assetdetails,Object(o.useState)(0)),k=Object(c.a)(y,2),j=k[0],D=k[1],N=Object(o.useContext)(h.a),I=(N.topheading,N.setTopHeading),M=Object(o.useState)(!1),P=Object(c.a)(M,2),T=(P[0],P[1],Object(o.useState)(1)),_=Object(c.a)(T,2),B=_[0],A=_[1],L=Object(o.useState)([]),z=Object(c.a)(L,2),F=z[0],R=z[1],U=Object(o.useState)(!1),H=Object(c.a)(U,2),Y=H[0],K=H[1],V=Object(o.useState)(!1),J=Object(c.a)(V,2),W=J[0],q=J[1],G=Object(o.useState)(!1),Q=Object(c.a)(G,2),X=Q[0],Z=Q[1],$=Object(o.useState)(!0),ee=Object(c.a)($,2),te=ee[0],ae=ee[1],ne=Object(o.useState)(!0),le=Object(c.a)(ne,2),re=le[0],ce=le[1],oe=Object(o.useState)(""),se=Object(c.a)(oe,2),ie=se[0],ue=se[1],me=Object(o.useState)(""),de=Object(c.a)(me,2),pe=de[0],Ee=de[1],fe=Object(o.useState)({_id:"",unitName:""}),be=Object(c.a)(fe,2),ge=be[0],we=(be[1],Object(o.useState)({_id:"",customerName:""})),he=Object(c.a)(we,2),ve=he[0],Se=(he[1],Object(o.useState)({_id:"",accountName:""})),Ce=Object(c.a)(Se,2),xe=Ce[0],Oe=(Ce[1],Object(o.useState)({_id:"",enggName:""})),ye=Object(c.a)(Oe,2),ke=ye[0],je=(ye[1],Object(o.useState)(!1)),De=Object(c.a)(je,2),Ne=(De[0],De[1],Object(o.useState)({})),Ie=Object(c.a)(Ne,2),Me=Ie[0],Pe=Ie[1],Te=Object(o.useState)(""),_e=Object(c.a)(Te,2),Be=_e[0],Ae=_e[1],Le=Object(o.useState)(""),ze=Object(c.a)(Le,2),Fe=ze[0],Re=ze[1],Ue=Object(o.useState)(""),He=Object(c.a)(Ue,2),Ye=He[0],Ke=He[1],Ve=Object(o.useState)(20),Je=Object(c.a)(Ve,2),We=Je[0],qe=Je[1],Ge=function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(f.Modal,{isOpen:a,onClose:function(){return n(!1)}},s.a.createElement(f.ModalHeader,null,"Set Call Status"),s.a.createElement(f.ModalBody,null,s.a.createElement("div",{className:"flex-col flex"},s.a.createElement("div",{className:"font-xl dark:text-white"},"Current Status:"),s.a.createElement(f.Button,{className:"font-xl"},"Set Status"),s.a.createElement(f.Button,{className:"font-xl my-2 mx-10 inline"},"Pending for Allocation"),s.a.createElement(f.Button,{className:"font-xl my-2 mx-10 inline"},"Pending for Allocation"),s.a.createElement(f.Button,{className:"font-xl my-2 mx-10 inline"},"Pending for Allocation"),s.a.createElement(f.Button,{className:"font-xl my-2 mx-10 inline"},"Pending for Allocation"))),s.a.createElement(f.ModalFooter,null,s.a.createElement(f.Button,{className:"w-full sm:w-auto",onClick:Object(r.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("SELECTED",Me),t={id:Me._id,update:{employeeId:ke._id,employeeName:ke.enggName,callStatus:1}},e.prev=2,e.next=5,d()({url:"".concat(b.a,"/call/").concat(p.a.getId(),"/ViewCallsg"),method:"POST",data:t});case 5:e.sent,a=F,console.log(a),a=a.filter((function(e){if(e._id===Me._id)return e.callStatus=1,e.employeeName=ke.enggName,e.employeeId=ke._id,e;R(a)})),n(!1),e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(2),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,12]])})))},"Confirm Assignment"))))};Object(o.useEffect)((function(){return function(){x(0),O({})}}),[]),Object(o.useEffect)((function(){return I("View Calls"),function(){I("")}}),[]),Object(o.useEffect)((function(){!function(){var e=Object(r.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={pages:{page:B,limit:10},filters:{business:ie,producttype:pe,customer:ve,account:xe,unitId:ge._id,customerId:ve._id,accountId:xe._id,searchtype:Be,searchquery:Ye}},e.prev=1,e.next=4,d()({url:"".concat(b.a,"/call/").concat(p.a.getId(),"/getall"),method:"POST",data:t});case 4:a=e.sent,qe(a.data.total),R(a.data.out),e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(1),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}()()}),[B,ie,pe,te]);var Qe=function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(f.Modal,{isOpen:v,onClose:function(){return S(!1)}},s.a.createElement(f.ModalHeader,null,"Updated Successfully!"),s.a.createElement(f.ModalBody,null),s.a.createElement(f.ModalFooter,null,s.a.createElement(f.Button,{className:"w-full sm:w-auto",onClick:function(){return S(!1)}},"Okay!"))))};return s.a.createElement(s.a.Fragment,null,s.a.createElement(Ge,null),s.a.createElement(Qe,null),s.a.createElement("div",{className:"mb-64 mt-4"},s.a.createElement("div",{className:""},s.a.createElement("div",{class:"my-2 flex sm:flex-row flex-col items-start sm:items-center sm:justify-left h-full space-x-6 "},s.a.createElement("div",{class:"relative  "},s.a.createElement("button",{class:" shadow-md appearance-none h-full rounded border block w-full bg-white border-gray-400 text-gray-700 py-2 px-4 pr-8 leading-tight focus:outline-none   focus:bg-white focus:border-gray-500",onClick:function(){Z(!X)}},"Pick Customer"),s.a.createElement("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},s.a.createElement("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},s.a.createElement("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})))),s.a.createElement("div",{class:"relative mx-5 "},s.a.createElement("select",{class:" shadow-md h-full rounded border block appearance-none w-full bg-white border-gray-400 text-gray-700 py-2 px-4 pr-8 leading-tight focus:outline-none   focus:bg-white focus:border-gray-500",value:ie,onChange:function(e){ue(e.target.value)}},s.a.createElement("option",{value:"",disabled:!0,selected:!0},"Business Type"),s.a.createElement("option",{value:""},"All"),s.a.createElement("option",{value:"AMC"},"AMC"),s.a.createElement("option",{value:"WTY"},"Warranty"),s.a.createElement("option",{value:"NOS"},"NOS")),s.a.createElement("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},s.a.createElement("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},s.a.createElement("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})))),s.a.createElement("div",{className:"relative z-40 "},s.a.createElement("button",{onClick:function(){K(!Y)},className:"shadow-md z-20 appearance-none rounded border border-gray-400 border-b block pl-4 pr-6 py-2 w-full bg-white text-sm placeholder-gray-400 text-gray-700 focus:bg-white focus:placeholder-gray-600 focus:text-gray-700 focus:outline-none","aria-label":"Notifications","aria-haspopup":"true"},pe||"Pick Product"),s.a.createElement("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},s.a.createElement("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},s.a.createElement("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"}))),s.a.createElement(f.Dropdown,{isOpen:Y,onClose:function(){return K(!1)}},s.a.createElement(f.DropdownItem,{onClick:function(){K(!1),Ee("")}},s.a.createElement("span",null,"All")),s.a.createElement(f.DropdownItem,{onClick:function(){K(!1),Ee("Console")}},s.a.createElement("span",null,"Console")),s.a.createElement(f.DropdownItem,{onClick:function(){K(!1),Ee("DMP")}},s.a.createElement("span",null,"DMP")),s.a.createElement(f.DropdownItem,{onClick:function(){K(!1),Ee("Inkjet")}},s.a.createElement("span",null,"Inkjet")),s.a.createElement(f.DropdownItem,{onClick:function(){K(!1),Ee("KVM")}},s.a.createElement("span",null,"KVM")),s.a.createElement(f.DropdownItem,{onClick:function(){K(!1),Ee("Laptop")}},s.a.createElement("span",null,"Laptop")),s.a.createElement(f.DropdownItem,{onClick:function(){K(!1),Ee("Laser")}},s.a.createElement("span",null,"Laser")),s.a.createElement(f.DropdownItem,{onClick:function(){K(!1),Ee("LMP")}},s.a.createElement("span",null,"LMP")),s.a.createElement(f.DropdownItem,{onClick:function(){K(!1),Ee("Module")}},s.a.createElement("span",null,"Module")),s.a.createElement(f.DropdownItem,{onClick:function(){K(!1),Ee("Router")}},s.a.createElement("span",null,"Router")),s.a.createElement(f.DropdownItem,{onClick:function(){K(!1),Ee("Scanner")}},s.a.createElement("span",null,"Scanner")),s.a.createElement(f.DropdownItem,{onClick:function(){K(!1),Ee("Server")}},s.a.createElement("span",null,"Server")),s.a.createElement(f.DropdownItem,{onClick:function(){K(!1),Ee("Desktop")}},s.a.createElement("span",null,"Desktop")),s.a.createElement(f.DropdownItem,{onClick:function(){K(!1),Ee("Storage")}},s.a.createElement("span",null,"Storage")),s.a.createElement(f.DropdownItem,{onClick:function(){K(!1),Ee("Switch")}},s.a.createElement("span",null,"Switch")),s.a.createElement(f.DropdownItem,{onClick:function(){K(!1),Ee("UPS")}},s.a.createElement("span",null,"UPS")),s.a.createElement(f.DropdownItem,{onClick:function(){K(!1),Ee("Others")}},s.a.createElement("span",null,"Others")))),s.a.createElement("div",{className:"relative "},s.a.createElement("button",{onClick:function(){q(!W)},className:"shadow-md z-20 appearance-none rounded border border-gray-400 border-b block pl-4 pr-6 py-2 w-full bg-white text-sm placeholder-gray-400 text-gray-700 focus:bg-white focus:placeholder-gray-600 focus:text-gray-700 focus:outline-none","aria-label":"Notifications","aria-haspopup":"true"},Be?Fe:"Pick Search Type"),s.a.createElement("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},s.a.createElement("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},s.a.createElement("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"}))),s.a.createElement(f.Dropdown,{isOpen:W,onClose:function(){return q(!1)}},s.a.createElement(f.DropdownItem,{onClick:function(){q(!1),Ae(""),Re(""),ce(!0),Ke(""),ae(!te)}},s.a.createElement("span",null,"All")),s.a.createElement(f.DropdownItem,{onClick:function(){q(!1),Ae("kbdsno"),Re("Keyboard Serial"),ce(!1)}},s.a.createElement("span",null,"Keyboard Serial")),s.a.createElement(f.DropdownItem,{onClick:function(){q(!1),Ae("mousesno"),Re("Mouse Serial"),ce(!1)}},s.a.createElement("span",null,"Mouse Serial")),s.a.createElement(f.DropdownItem,{onClick:function(){q(!1),Ae("motherboardsno"),Re("Motherboard Serial"),ce(!1)}},s.a.createElement("span",null,"Motherboard Serial")),s.a.createElement(f.DropdownItem,{onClick:function(){q(!1),Ae("monitorsno"),Re("Monitor Serial"),ce(!1)}},s.a.createElement("span",null,"Monitor Serial")),s.a.createElement(f.DropdownItem,{onClick:function(){q(!1),Ae("hddsno"),Re("HDD Serial"),ce(!1)}},s.a.createElement("span",null,"HDD Serial")),s.a.createElement(f.DropdownItem,{onClick:function(){q(!1),Ae("cpusno"),Re("CPU Serial"),ce(!1)}},s.a.createElement("span",null,"CPU Serial")),s.a.createElement(f.DropdownItem,{onClick:function(){q(!1),Ae("ramsno"),Re("Ram Serial"),ce(!1)}},s.a.createElement("span",null,"RAM Serial")),s.a.createElement(f.DropdownItem,{onClick:function(){q(!1),Ae("smpssno"),Re("SMPS Serial"),ce(!1)}},s.a.createElement("span",null,"SMPS Serial")),s.a.createElement(f.DropdownItem,{onClick:function(){q(!1),Ae("fansno"),Re("Fan Serial"),ce(!1)}},s.a.createElement("span",null,"Fan Serial")),s.a.createElement(f.DropdownItem,{onClick:function(){q(!1),Ae("opticaldrivesno"),Re("Optical Drive Serial"),ce(!1)}},s.a.createElement("span",null,"Optical Drive Serial")))),s.a.createElement("div",{class:"block relative xl:ml-64"},s.a.createElement("span",{class:"h-full absolute inset-y-0 left-0 flex items-center pl-2"},s.a.createElement("svg",{viewBox:"0 0 24 24",class:"h-4 w-4 fill-current text-gray-500"},s.a.createElement("path",{d:"M10 4a6 6 0 100 12 6 6 0 000-12zm-8 6a8 8 0 1114.32 4.906l5.387 5.387a1 1 0 01-1.414 1.414l-5.387-5.387A8 8 0 012 10z"}))),s.a.createElement("form",{onSubmit:function(e){e.preventDefault(),ae(!te)}},s.a.createElement("input",{value:Ye,onChange:function(e){return Ke(e.target.value)},placeholder:"Search",disabled:re,class:"shadow-md z-20 appearance-none rounded border border-gray-400 border-b block pl-8 pr-6 py-2 w-full bg-white text-sm placeholder-gray-400 text-gray-700 focus:bg-white focus:placeholder-gray-600 focus:text-gray-700 focus:outline-none"}))))),s.a.createElement(f.TableContainer,{className:"mt-4"},s.a.createElement(f.Table,null,s.a.createElement(f.TableHeader,null,s.a.createElement("tr",null,s.a.createElement(f.TableCell,null,"Call No"),s.a.createElement(f.TableCell,null,"Date"),s.a.createElement(f.TableCell,null,"Unit Name"),s.a.createElement(f.TableCell,null,"Phone"),s.a.createElement(f.TableCell,null,"Call Status"),s.a.createElement(f.TableCell,null,"Assigned Employee"),s.a.createElement(f.TableCell,null,"Update"))),s.a.createElement(f.TableBody,null,F.map((function(e,t){return s.a.createElement(f.TableRow,{className:"hover:shadow-lg dark:hover:bg-gray-600 ".concat(j==e._id?"bg-blue-300 shadow-lg dark:bg-gray-600":"white"," "),key:t,onClick:function(){D(e._id),x(1),Pe(e),console.log("SELECTD",e),O(e.assetId)}},s.a.createElement(f.TableCell,{className:"w-8"},s.a.createElement("div",{className:"flex items-center text-sm "},s.a.createElement("div",null,s.a.createElement("p",{className:"font-semibold"},e.callNo)))),s.a.createElement(f.TableCell,null,s.a.createElement("span",{className:"text-sm"},u()(e.date).format("DD/MM/YYYY"))),s.a.createElement(f.TableCell,null,s.a.createElement("span",{className:"text-sm"},e.unitName)),s.a.createElement(f.TableCell,null,s.a.createElement("span",{className:"text-sm"},e.phone)),s.a.createElement(f.TableCell,null,s.a.createElement("div",{className:"flex "},s.a.createElement(f.Select,{className:"inline",onChange:function(t){var a=F;console.log(a),a=a.filter((function(a){return a._id===e._id?(a.callStatus=t.target.value,a):a})),R(a)},value:e.callStatus},s.a.createElement("option",{value:"0"},"Not Allocated"),s.a.createElement("option",{value:"1"},"Pending for Percall Approval"),s.a.createElement("option",{value:"2"}," Pending for Response"),s.a.createElement("option",{value:"3"}," Pending for OEM Response"),s.a.createElement("option",{value:"4"}," Pending for 2nd Response"),s.a.createElement("option",{value:"5"}," Pending for Customer"),s.a.createElement("option",{value:"6"}," Under Observation"),s.a.createElement("option",{value:"7"}," Pending for Others"),s.a.createElement("option",{value:"8"}," Pending for Spare"),s.a.createElement("option",{value:"9"}," Spare in Transit"),s.a.createElement("option",{value:"10"}," Cancelled Calls"),s.a.createElement("option",{value:"11"}," Closed Calls")),s.a.createElement("div",{className:"p-1 m-2 dark:hover:bg-green-700 hover:bg-green-200 rounded-full text-green-400",onClick:Object(r.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={id:e._id,update:{callStatus:e.callStatus}},t.prev=1,t.next=4,d()({url:"".concat(b.a,"/call/").concat(p.a.getId(),"/assignEngg"),method:"POST",data:a});case 4:t.sent,console.log("updated"),S(!0),t.next=12;break;case 9:throw t.prev=9,t.t0=t.catch(1),t.t0;case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))},s.a.createElement(E.TickIcon,{className:"w-5 h-5 fill-current","aria-hidden":"true"})))),s.a.createElement(f.TableCell,null,e.employeeId?s.a.createElement(s.a.Fragment,null,e.employeeName):s.a.createElement(s.a.Fragment,null,"Not Assigned")),s.a.createElement(f.TableCell,null,s.a.createElement(w.b,{key:e._id,to:"/app/call/updatecall/".concat(e._id,"/").concat(e.assetId._id)},s.a.createElement(f.Button,{layout:"outline",onClick:function(){},className:" "},"Update"))))})))),s.a.createElement(f.TableFooter,null,s.a.createElement(f.Pagination,{totalResults:We,resultsPerPage:10,label:"Table navigation",onChange:function(e){A(e)}})))))}}}]);
//# sourceMappingURL=54.f09e6a9a.chunk.js.map