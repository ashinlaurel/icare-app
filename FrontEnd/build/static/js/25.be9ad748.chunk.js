(this["webpackJsonpwindmill-dashboard-react"]=this["webpackJsonpwindmill-dashboard-react"]||[]).push([[25],{100:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a(3),l=a.n(n),c=a(10),r=a(2),u=a(0),s=a.n(u),o=a(7),m=a.n(o),i=a(1),d=a(92),b=(a(87),a(8));function p(e){var t=e.isModalOpen,a=e.setIsModalOpen,n=e.unit,o=e.setUnit,p=e.account,E=e.setAccount,f=e.customer,g=e.setCustomer,v=Object(u.useState)([]),O=Object(r.a)(v,2),h=O[0],N=O[1],x=Object(u.useState)([]),j=Object(r.a)(x,2),T=j[0],C=j[1],y=Object(u.useState)([]),w=Object(r.a)(y,2),S=w[0],k=w[1],_=Object(u.useState)(0),A=Object(r.a)(_,2),M=A[0],B=A[1],F=Object(u.useState)(""),I=Object(r.a)(F,2),P=I[0],D=I[1],R=function(e){D(e.target.value)},H=function(){var e=Object(c.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={search:P,role:1},e.prev=2,e.next=5,m()({url:"".concat(b.a,"/customer/customers"),method:"POST",data:a});case 5:n=e.sent,console.log(n.data),N(n.data),e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(2),e.t0;case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();Object(u.useEffect)((function(){!function(){var e=Object(c.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={search:P,role:1},e.prev=1,e.next=4,m()({url:"".concat(b.a,"/customer/customers"),method:"POST",data:t});case 4:a=e.sent,console.log(a.data),N(a.data),e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(1),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}()()}),[]);var U=function(){var e=Object(c.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g({_id:t._id,customerName:t.name}),E({_id:"",accountName:""}),o({_id:"",unitName:""}),e.prev=3,e.next=6,m.a.post("".concat(b.a,"/customer/accounts"),{customerId:t._id});case 6:a=e.sent,console.log(a.data),C(a.data),B(1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),console.log("axiosErr",e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(c.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),E({_id:t._id,accountName:t.name}),o({_id:"",unitName:""}),e.prev=3,e.next=6,m.a.post("".concat(b.a,"/customer/units"),{accountId:t._id});case 6:a=e.sent,console.log(a.data),k(a.data),B(2),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),console.log("axiosErr",e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(c.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),o({_id:t._id,unitName:t.unitName});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return s.a.createElement(s.a.Fragment,null,s.a.createElement(i.Modal,{isOpen:t,onClose:function(){return a(!1)}},s.a.createElement(i.ModalHeader,null,"Select"," ",0==M?s.a.createElement(s.a.Fragment,null,"Customer"):1==M?s.a.createElement(s.a.Fragment,null,"Account"):s.a.createElement(s.a.Fragment,null,"Unit")),s.a.createElement(i.ModalBody,null,s.a.createElement(d.d,{selectedIndex:M,onSelect:function(e){return B(e)}},s.a.createElement(d.b,null,s.a.createElement(d.a,null,"Customer"),s.a.createElement(d.a,null,"Account"),s.a.createElement(d.a,null,"Unit")),s.a.createElement(d.c,null,s.a.createElement(i.TableContainer,null,s.a.createElement(i.Table,null,s.a.createElement(i.TableHeader,null,s.a.createElement("tr",null,s.a.createElement(i.TableCell,null,"Customer")),s.a.createElement("tr",null,s.a.createElement(i.TableCell,null,s.a.createElement("form",{onSubmit:H},s.a.createElement("input",{className:"block w-full pr-20 text-sm text-black dark:text-gray-300 dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:focus:shadow-outline-gray form-input",placeholder:"Search Customers",onChange:R}))))),s.a.createElement(i.TableBody,null,h.map((function(e,t){return s.a.createElement(i.TableRow,{key:t,className:"hover:bg-purple-200 cursor-pointer",onClick:function(){return U(e)}},s.a.createElement(i.TableCell,null,s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("p",{className:"font-semibold"},e.name)))))})))),s.a.createElement(i.TableFooter,null))),s.a.createElement(d.c,null,s.a.createElement(i.TableContainer,null,s.a.createElement(i.Table,null,s.a.createElement(i.TableHeader,null,s.a.createElement("tr",null,s.a.createElement(i.TableCell,null,"Account"))),s.a.createElement(i.TableBody,null,T.map((function(e,t){return s.a.createElement(i.TableRow,{key:t,className:"hover:bg-purple-200 cursor-pointer",onClick:function(){return L(e)}},s.a.createElement(i.TableCell,null,s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("p",{className:"font-semibold"},e.name)))))})))),s.a.createElement(i.TableFooter,null))),s.a.createElement(d.c,null,s.a.createElement(i.TableContainer,null,s.a.createElement(i.Table,null,s.a.createElement(i.TableHeader,null,s.a.createElement("tr",null,s.a.createElement(i.TableCell,null,"Unit"))),s.a.createElement(i.TableBody,null,S.map((function(e,t){return s.a.createElement(i.TableRow,{key:t,className:"hover:bg-purple-200 cursor-pointer",onClick:function(){return z(e)}},s.a.createElement(i.TableCell,null,s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("p",{className:"font-semibold"},e.unitName)))))})))),s.a.createElement(i.TableFooter,null)))),s.a.createElement(i.Badge,{className:"mx-2 text-md",type:"success"},"Customer: ",f.customerName),s.a.createElement(i.Badge,{className:"mx-2 text-md",type:"success"},"Account : ",p.accountName),s.a.createElement(i.Badge,{className:"mx-2 text-md",type:"success"},"Unit: ",n.unitName)),s.a.createElement(i.ModalFooter,null,s.a.createElement(i.Button,{className:"w-full sm:w-auto",onClick:function(){return a(!1)}},"Select"))))}},1069:function(e,t,a){"use strict";a.r(t);var n=a(3),l=a.n(n),c=a(10),r=a(2),u=a(0),s=a.n(u),o=a(18),m=a.n(o),i=a(7),d=a.n(i),b=a(15),p=(a(85),a(28)),E=a(1),f=(a(113),a(8)),g=(a(100),a(93),a(115)),v=a(30),O=a(29);a(19);t.default=function(){var e=Object(u.useState)(!1),t=Object(r.a)(e,2),a=t[0],n=t[1],o=Object(u.useContext)(v.a),i=(o.bbaropen,o.setBBarOpen),h=o.setAssetDetails,N=(o.assetdetails,Object(u.useState)(0)),x=Object(r.a)(N,2),j=x[0],T=x[1],C=Object(u.useContext)(O.a),y=(C.topheading,C.setTopHeading),w=Object(u.useState)(!1),S=Object(r.a)(w,2),k=(S[0],S[1],Object(u.useState)(1)),_=Object(r.a)(k,2),A=_[0],M=_[1],B=Object(u.useState)([]),F=Object(r.a)(B,2),I=F[0],P=F[1],D=Object(u.useState)(!1),R=Object(r.a)(D,2),H=(R[0],R[1],Object(u.useState)(!1)),U=Object(r.a)(H,2),L=(U[0],U[1],Object(u.useState)(!1)),z=Object(r.a)(L,2),Y=(z[0],z[1],Object(u.useState)(!0)),J=Object(r.a)(Y,2),$=J[0],q=J[1],G=Object(u.useState)(!0),K=Object(r.a)(G,2),Q=(K[0],K[1],Object(u.useState)("")),V=Object(r.a)(Q,2),W=(V[0],V[1],Object(u.useState)("0")),X=Object(r.a)(W,2),Z=X[0],ee=X[1],te=Object(u.useState)(""),ae=Object(r.a)(te,2),ne=(ae[0],ae[1],Object(u.useState)("")),le=Object(r.a)(ne,2),ce=(le[0],le[1],Object(u.useState)("")),re=Object(r.a)(ce,2),ue=re[0],se=re[1],oe=Object(u.useState)(""),me=Object(r.a)(oe,2),ie=me[0],de=me[1],be=Object(u.useState)(""),pe=Object(r.a)(be,2),Ee=pe[0],fe=(pe[1],Object(u.useState)("")),ge=Object(r.a)(fe,2),ve=ge[0],Oe=(ge[1],Object(u.useState)({_id:"",unitName:""})),he=Object(r.a)(Oe,2),Ne=(he[0],he[1],Object(u.useState)({_id:"",customerName:""})),xe=Object(r.a)(Ne,2),je=(xe[0],xe[1],Object(u.useState)({_id:"",accountName:""})),Te=Object(r.a)(je,2),Ce=(Te[0],Te[1],Object(u.useState)({_id:"",enggName:""})),ye=Object(r.a)(Ce,2),we=ye[0],Se=ye[1],ke=Object(u.useState)(!1),_e=Object(r.a)(ke,2),Ae=_e[0],Me=_e[1],Be=Object(u.useState)({}),Fe=Object(r.a)(Be,2),Ie=Fe[0],Pe=Fe[1],De=Object(u.useState)(""),Re=Object(r.a)(De,2),He=(Re[0],Re[1],Object(u.useState)("")),Ue=Object(r.a)(He,2),Le=(Ue[0],Ue[1],Object(u.useState)("")),ze=Object(r.a)(Le,2),Ye=ze[0],Je=ze[1],$e=Object(u.useState)(""),qe=Object(r.a)($e,2),Ge=qe[0],Ke=qe[1],Qe=Object(u.useState)(""),Ve=Object(r.a)(Qe,2),We=Ve[0],Xe=Ve[1],Ze=Object(u.useState)(20),et=Object(r.a)(Ze,2),tt=et[0],at=et[1],nt=function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(E.Modal,{isOpen:a,onClose:function(){return n(!1)}},s.a.createElement(E.ModalHeader,null,"Confirm Assignment"),s.a.createElement(E.ModalBody,null,s.a.createElement("div",{className:"font-xl text-xl"},"Assign ",we.enggName," to call ",Ie.callNo),s.a.createElement("div",{className:"flex flex-col w-full mt-2"},s.a.createElement(E.Label,{className:"w-full"},s.a.createElement("span",null,"Assign Date"),s.a.createElement(E.Input,{className:"",type:"date",value:Ge,onChange:function(e){Ke(e.target.value)}}))),s.a.createElement("div",{className:"flex flex-col w-full"},s.a.createElement(E.Label,{className:"w-full"},s.a.createElement("span",null,"Assign ETA"),s.a.createElement(E.Input,{className:"",type:"time",value:We,onChange:function(e){Xe(e.target.value)}})))),s.a.createElement(E.ModalFooter,null,s.a.createElement(E.Button,{className:"w-full sm:w-auto",onClick:Object(c.a)(l.a.mark((function e(){var t,a,c,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(Ie),""!=Ge&&""!=We){e.next=3;break}return e.abrupt("return");case 3:return t={date:m()().format(),callStatus:"2",engineer:we.enggName,callAttendDate:"Nil",startOfService:"Nil",endOfService:"Nil",note:"".concat(we.enggName," has been assigned to the call. Assigned Date: ").concat(Ge," Assigned ETA: ").concat(We),actionTaken:"Nil"},a={id:Ie._id,update:{employeeId:we._id,employeeName:we.enggName,callStatus:2,assignedDate:Ge,assignedETA:We,$push:{history:t}}},c={id:we._id,update:{$push:{assignedCalls:{priority:99,callId:Ie._id,date:new Date}}}},e.prev=6,e.next=9,d()({url:"".concat(f.a,"/call/").concat(b.a.getId(),"/assignEngg"),method:"POST",data:a});case 9:return e.sent,r=I,console.log(r),r=r.filter((function(e){if(e._id===Ie._id)return e.callStatus=2,e.employeeName=we.enggName,e.employeeId=we._id,e;P(r)})),e.next=15,d()({url:"".concat(f.a,"/admin/").concat(b.a.getId(),"/update"),method:"POST",data:c});case 15:n(!1),Ke(""),Xe(""),e.next=23;break;case 20:throw e.prev=20,e.t0=e.catch(6),e.t0;case 23:case"end":return e.stop()}}),e,null,[[6,20]])})))},"Confirm Assignment"))))};return Object(u.useEffect)((function(){return function(){i(0),h({})}}),[]),Object(u.useEffect)((function(){return y("Assign Engineer"),function(){y("")}}),[]),Object(u.useEffect)((function(){!function(){var e=Object(c.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={pages:{page:A,limit:10},filters:{callStatus:Z,searchquery:Ye,fromDate:ue,toDate:ie}},e.prev=1,e.next=4,d()({url:"".concat(f.a,"/call/").concat(b.a.getId(),"/getall"),method:"POST",data:t});case 4:a=e.sent,at(a.data.total),P(a.data.out),e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(1),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}()()}),[A,Ee,ve,$,Z,Ye,ue,ie]),s.a.createElement(s.a.Fragment,null,s.a.createElement(g.a,{isModalOpen:Ae,setIsModalOpen:Me,setEngineer:Se,nextModal:n}),s.a.createElement(nt,null),s.a.createElement("div",{className:"mb-64 mt-4"},s.a.createElement("div",{className:""},s.a.createElement("div",{class:"my-2 flex sm:flex-row flex-col items-start sm:items-center sm:justify-left h-full space-x-2 "},s.a.createElement("div",{class:"relative mx-1 "},s.a.createElement("select",{class:" shadow-md h-full rounded border block appearance-none w-full bg-white border-gray-400 text-gray-700 py-2 px-4 pr-8 leading-tight focus:outline-none   focus:bg-white focus:border-gray-500",value:Z,onChange:function(e){ee(e.target.value)}},s.a.createElement("option",{value:"",disabled:!0,selected:!0},"Call Status"),s.a.createElement("option",{value:""},"All"),s.a.createElement("option",{selected:!0,value:"0"},"Pending For Allocation"),s.a.createElement("option",{value:"priority"},"Priority")),s.a.createElement("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},s.a.createElement("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},s.a.createElement("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})))),s.a.createElement(E.Label,{className:""},s.a.createElement("span",null,"From Date"),s.a.createElement("input",{className:"mt-1 p-2 rounded-sm mx-1",type:"date",value:ue,onChange:function(e){return se(e.target.value)}})),s.a.createElement(E.Label,{className:""},s.a.createElement("span",null,"To Date"),s.a.createElement("input",{className:"mt-1 p-2 rounded-sm mx-1 mr-5",type:"date",value:ie,onChange:function(e){return de(e.target.value)}})),s.a.createElement("div",{class:"block relative xl:ml-64"},s.a.createElement("span",{class:"h-full absolute inset-y-0 left-0 flex items-center pl-2"},s.a.createElement("svg",{viewBox:"0 0 24 24",class:"h-4 w-4 fill-current text-gray-500"},s.a.createElement("path",{d:"M10 4a6 6 0 100 12 6 6 0 000-12zm-8 6a8 8 0 1114.32 4.906l5.387 5.387a1 1 0 01-1.414 1.414l-5.387-5.387A8 8 0 012 10z"}))),s.a.createElement("form",{onSubmit:function(e){e.preventDefault(),q(!$)}},s.a.createElement("input",{value:Ye,onChange:function(e){return Je(e.target.value)},placeholder:"Search by Call No.",class:"shadow-md z-20 appearance-none rounded border border-gray-400 border-b block pl-8 pr-6 py-2 w-full bg-white text-sm placeholder-gray-400 text-gray-700 focus:bg-white focus:placeholder-gray-600 focus:text-gray-700 focus:outline-none"}))))),s.a.createElement(E.TableContainer,{className:"mt-4"},s.a.createElement(E.Table,null,s.a.createElement(E.TableHeader,null,s.a.createElement("tr",null,s.a.createElement(E.TableCell,null,"Call No"),s.a.createElement(E.TableCell,null,"Date"),s.a.createElement(E.TableCell,null,"Unit Name"),s.a.createElement(E.TableCell,null,"Phone"),s.a.createElement(E.TableCell,null,"Call Status"),s.a.createElement(E.TableCell,null,"Assigned Employee"))),s.a.createElement(E.TableBody,null,I.map((function(e,t){return s.a.createElement(E.TableRow,{className:"hover:shadow-lg dark:hover:bg-gray-600 ".concat(j==e._id?"bg-blue-300 shadow-lg dark:bg-gray-600":"white"," "),key:t,onClick:function(){T(e._id),i(1),Pe(e),e.assetId?h(e.assetId):h({}),console.log(e.assetId)}},s.a.createElement(E.TableCell,{className:"w-8"},s.a.createElement("div",{className:"flex items-center text-sm "},s.a.createElement("div",null,s.a.createElement("p",{className:"font-semibold"},e.callNo)))),s.a.createElement(E.TableCell,null,s.a.createElement("span",{className:"text-sm"},m()(e.date).format("DD/MM/YYYY"))),s.a.createElement(E.TableCell,null,s.a.createElement("span",{className:"text-sm"},e.unitName)),s.a.createElement(E.TableCell,null,s.a.createElement("span",{className:"text-sm"},e.phone)),s.a.createElement(E.TableCell,null,0==e.callStatus?s.a.createElement("span",{className:"text-sm"},"Not Allocated"):null,1==e.callStatus?s.a.createElement("span",{className:"text-sm"},"Pending for Percall Approval"):null,2==e.callStatus?s.a.createElement("span",{className:"text-sm"},"Pending for Response"):null,3==e.callStatus?s.a.createElement("span",{className:"text-sm"},"Pending for OEM Response"):null,4==e.callStatus?s.a.createElement("span",{className:"text-sm"},"Pending for 2nd Response"):null,5==e.callStatus?s.a.createElement("span",{className:"text-sm"},"Pending for Customer"):null,6==e.callStatus?s.a.createElement("span",{className:"text-sm"},"Under Observation"):null,7==e.callStatus?s.a.createElement("span",{className:"text-sm"},"Pending for Others"):null,8==e.callStatus?s.a.createElement("span",{className:"text-sm"},"Pending for Spare"):null,9==e.callStatus?s.a.createElement("span",{className:"text-sm"},"Spare in Transit"):null,10==e.callStatus?s.a.createElement("span",{className:"text-sm"},"Cancelled Calls"):null,11==e.callStatus?s.a.createElement("span",{className:"text-sm"},"Closed Calls"):null),s.a.createElement(E.TableCell,null,e.employeeId?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"px-4 py-2 dark:border-purple-400 border-purple-600 dark:bg-gray-700 bg-purple-100 inline-block rounded-lg dark:text-purple-400 text-purple-700"},e.employeeName,s.a.createElement(E.Button,{layout:"link",size:"icon","aria-label":"Edit",onClick:function(){Me(!0),Xe(e.assignedETA),Ke(e.assignedDate)},className:"rounded-full mx-2 "},s.a.createElement(p.EditIcon,{className:"w-5 h-5","aria-hidden":"true"})))):s.a.createElement(E.Button,{onClick:function(){return Me(!0)}},"Assign Now")))})))),s.a.createElement(E.TableFooter,null,s.a.createElement(E.Pagination,{totalResults:tt,resultsPerPage:10,label:"Table navigation",onChange:function(e){M(e)}})))))}},115:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(2),l=a(0),c=a.n(l),r=a(1),u=a(7),s=a.n(u),o=a(8),m=a(15);function i(e){var t=e.isModalOpen,a=e.setIsModalOpen,u=e.setEngineer,i=e.nextModal,d=Object(l.useState)([]),b=Object(n.a)(d,2),p=b[0],E=b[1];Object(l.useEffect)((function(){console.log("HERERRE"),s.a.post("".concat(o.a,"/admin/").concat(m.a.getId(),"/getAll")).then((function(e){console.log(e.data);var t=[];e.data.map((function(e){t.push(e)})),E(t)})).catch((function(e){console.log("axiosErr",e)}))}),[]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(r.Modal,{isOpen:t,onClose:function(){return a(!1)}},c.a.createElement(r.ModalHeader,null,"Assign Engineer"),c.a.createElement(r.ModalBody,null,c.a.createElement(r.TableContainer,null,c.a.createElement(r.Table,null,c.a.createElement(r.TableHeader,null,c.a.createElement("tr",null,c.a.createElement(r.TableCell,null,"Name"),c.a.createElement(r.TableCell,null,"Email"))),c.a.createElement(r.TableBody,null,p.map((function(e,t){return c.a.createElement(r.TableRow,{key:t,className:"hover:bg-blue-300 dark:hover:bg-gray-100 bg-opacity-25 ",onClick:function(){u({_id:e._id,enggName:e.employeeName}),a(!1),i(!0)}},c.a.createElement(r.TableCell,null,c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement("p",{className:"font-semibold"},e.employeeName)))),c.a.createElement(r.TableCell,null,c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement("p",{className:"font-semibold"},e.email)))))})))),c.a.createElement(r.TableFooter,null))),c.a.createElement(r.ModalFooter,null,c.a.createElement(r.Button,{className:"w-full sm:w-auto",layout:"outline",onClick:function(){return a(!1)}},"Cancel"),c.a.createElement(r.Button,{className:"w-full sm:w-auto"},"Accept"))))}},87:function(e,t,a){},93:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a(3),l=a.n(n),c=a(10),r=a(2),u=a(0),s=a.n(u),o=a(7),m=a.n(o),i=a(1),d=a(92),b=(a(87),a(8));function p(e){var t=e.isModalOpen,a=e.setIsModalOpen,n=e.unit,o=e.setUnit,p=e.account,E=e.setAccount,f=e.customer,g=e.setCustomer,v=e.refresh,O=e.setRefresh,h=Object(u.useState)([]),N=Object(r.a)(h,2),x=N[0],j=N[1],T=Object(u.useState)([]),C=Object(r.a)(T,2),y=C[0],w=C[1],S=Object(u.useState)([]),k=Object(r.a)(S,2),_=k[0],A=k[1],M=Object(u.useState)(0),B=Object(r.a)(M,2),F=B[0],I=B[1],P=Object(u.useState)(""),D=Object(r.a)(P,2),R=D[0],H=D[1],U=function(e){H(e.target.value)},L=function(){var e=Object(c.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={search:R,role:1},e.prev=2,e.next=5,m()({url:"".concat(b.a,"/customer/customers"),method:"POST",data:a});case 5:n=e.sent,console.log(n.data),j(n.data),e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(2),e.t0;case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();Object(u.useEffect)((function(){!function(){var e=Object(c.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={search:R,role:1},e.prev=1,e.next=4,m()({url:"".concat(b.a,"/customer/customers"),method:"POST",data:t});case 4:a=e.sent,console.log(a.data),j(a.data),e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(1),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}()()}),[]);var z=function(){var e=Object(c.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g({_id:t._id,customerName:t.name}),E({_id:"",accountName:""}),o({_id:"",unitName:""}),e.prev=3,e.next=6,m.a.post("".concat(b.a,"/customer/accounts"),{customerId:t._id});case 6:a=e.sent,console.log(a.data),w(a.data),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.log("axiosErr",e.t0);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(c.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),E({_id:t._id,accountName:t.name}),o({_id:"",unitName:""}),e.prev=3,e.next=6,m.a.post("".concat(b.a,"/customer/units"),{accountId:t._id});case 6:a=e.sent,console.log(a.data),A(a.data),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.log("axiosErr",e.t0);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(c.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),o({_id:t._id,unitName:t.unitName});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return s.a.createElement(s.a.Fragment,null,s.a.createElement(i.Modal,{isOpen:t,onClose:function(){return a(!1)}},s.a.createElement(i.ModalHeader,null,"Select"," ",0==F?s.a.createElement(s.a.Fragment,null,"Customer"):1==F?s.a.createElement(s.a.Fragment,null,"Account"):s.a.createElement(s.a.Fragment,null,"Unit")),s.a.createElement(i.ModalBody,null,s.a.createElement(d.d,{selectedIndex:F,onSelect:function(e){return I(e)}},s.a.createElement(d.b,null,s.a.createElement(d.a,null,"Customer"),s.a.createElement(d.a,null,"Account"),s.a.createElement(d.a,null,"Unit")),s.a.createElement(d.c,null,s.a.createElement(i.TableContainer,null,s.a.createElement(i.Table,null,s.a.createElement(i.TableHeader,null,s.a.createElement("tr",null,s.a.createElement(i.TableCell,null,"Customer")),s.a.createElement("tr",null,s.a.createElement(i.TableCell,null,s.a.createElement("form",{onSubmit:L},s.a.createElement("input",{className:"block w-full pr-20 text-sm text-black dark:text-gray-300 dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:focus:shadow-outline-gray form-input",placeholder:"Search Customers",onChange:U}))))),s.a.createElement(i.TableBody,null,x.map((function(e,t){return s.a.createElement(i.TableRow,{key:t,className:"hover:bg-purple-200 cursor-pointer",onClick:function(){return z(e)}},s.a.createElement(i.TableCell,null,s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("p",{className:"font-semibold"},e.name)))))})))),s.a.createElement(i.TableFooter,null))),s.a.createElement(d.c,null,s.a.createElement(i.TableContainer,null,s.a.createElement(i.Table,null,s.a.createElement(i.TableHeader,null,s.a.createElement("tr",null,s.a.createElement(i.TableCell,null,"Account"))),s.a.createElement(i.TableBody,null,y.map((function(e,t){return s.a.createElement(i.TableRow,{key:t,className:"hover:bg-purple-200 cursor-pointer",onClick:function(){return Y(e)}},s.a.createElement(i.TableCell,null,s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("p",{className:"font-semibold"},e.name)))))})))),s.a.createElement(i.TableFooter,null))),s.a.createElement(d.c,null,s.a.createElement(i.TableContainer,null,s.a.createElement(i.Table,null,s.a.createElement(i.TableHeader,null,s.a.createElement("tr",null,s.a.createElement(i.TableCell,null,"Unit"))),s.a.createElement(i.TableBody,null,_.map((function(e,t){return s.a.createElement(i.TableRow,{key:t,className:"hover:bg-purple-200 cursor-pointer",onClick:function(){return J(e)}},s.a.createElement(i.TableCell,null,s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("p",{className:"font-semibold"},e.unitName)))))})))),s.a.createElement(i.TableFooter,null)))),s.a.createElement(i.Badge,{className:"mx-2 text-md",type:"success"},"Customer: ",f.customerName),s.a.createElement(i.Badge,{className:"mx-2 text-md",type:"success"},"Account : ",p.accountName),s.a.createElement(i.Badge,{className:"mx-2 text-md",type:"success"},"Unit: ",n.unitName)),s.a.createElement(i.ModalFooter,null,s.a.createElement(i.Button,{className:"w-full sm:w-auto",onClick:function(){a(!1),O(!v)}},"Select"))))}}}]);
//# sourceMappingURL=25.be9ad748.chunk.js.map