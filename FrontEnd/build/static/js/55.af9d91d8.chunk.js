(this["webpackJsonpwindmill-dashboard-react"]=this["webpackJsonpwindmill-dashboard-react"]||[]).push([[55],{1220:function(e,t,a){"use strict";a.r(t);var l=a(16),n=a(5),r=a.n(n),o=a(12),c=a(3),s=a(0),u=a.n(s),i=a(21),m=a.n(i),d=a(9),b=a.n(d),p=a(211),f=a(18),g=a(36),E=a(2),v=a(10),w=a(43),h=a(37);t.default=function(){var e=Object(s.useState)(!1),t=Object(c.a)(e,2),a=t[0],n=t[1],i=Object(s.useState)(0),d=Object(c.a)(i,2),y=d[0],T=d[1],x=Object(s.useState)(-1),C=Object(c.a)(x,2),O=C[0],N=C[1],j=Object(s.useState)(!1),k=Object(c.a)(j,2),S=k[0],L=k[1],R=Object(s.useState)({}),D=Object(c.a)(R,2),M=D[0],B=D[1],A=Object(s.useState)(0),z=Object(c.a)(A,2),I=z[0],F=z[1],_=Object(s.useContext)(w.a),H=(_.topheading,_.setTopHeading),K=Object(s.useState)(!1),U=Object(c.a)(K,2),P=(U[0],U[1],Object(s.useState)(1)),Y=Object(c.a)(P,2),q=Y[0],G=Y[1],J=Object(s.useState)([{CMRRItems:[]}]),V=Object(c.a)(J,2),X=V[0],W=V[1],Q=Object(s.useState)(!0),Z=Object(c.a)(Q,2),$=Z[0],ee=Z[1],te=Object(s.useState)(!0),ae=Object(c.a)(te,2),le=(ae[0],ae[1],Object(s.useState)("")),ne=Object(c.a)(le,2),re=ne[0],oe=ne[1],ce=Object(s.useState)(""),se=Object(c.a)(ce,2),ue=se[0],ie=se[1],me=Object(s.useState)(""),de=Object(c.a)(me,2),be=de[0],pe=de[1],fe=Object(s.useState)(""),ge=Object(c.a)(fe,2),Ee=ge[0],ve=(ge[1],Object(s.useState)("Normal")),we=Object(c.a)(ve,2),he=we[0],ye=we[1],Te=Object(s.useState)({}),xe=Object(c.a)(Te,2),Ce=xe[0],Oe=(xe[1],Object(s.useState)("")),Ne=Object(c.a)(Oe,2),je=(Ne[0],Ne[1],Object(s.useState)("")),ke=Object(c.a)(je,2),Se=(ke[0],ke[1],Object(s.useState)("")),Le=Object(c.a)(Se,2),Re=Le[0],De=Le[1],Me=Object(s.useState)(20),Be=Object(c.a)(Me,2),Ae=Be[0],ze=Be[1],Ie=Object(s.useState)(-1),Fe=Object(c.a)(Ie,2),_e=Fe[0],He=Fe[1];Object(s.useEffect)((function(){return H("LST History"),function(){H("")}}),[]),Object(s.useEffect)((function(){!function(){var e=Object(o.a)(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getter called"),t={pages:{page:q,limit:10},filters:{from:ue,to:be,status:re,LSTtype:he,isDeleted:"false",searchquery:Re}},"Deleted"==re&&(t.filters.status="",t.filters.isDeleted="true"),e.prev=3,e.next=6,b()({url:"".concat(v.a,"/lst/").concat(f.a.getId(),"/getall"),method:"POST",data:t});case 6:a=e.sent,console.log(a.data.out),ze(a.data.total),W(a.data.out),e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(3),e.t0;case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(){return e.apply(this,arguments)}}()()}),[q,ue,be,Ee,re,$,he]),console.log(Ce);var Ke=function(){var e=Object(o.a)(r.a.mark((function e(t,a,l,n){var o,c,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={id:t,update:{CourierNumber:l,DocketType:n},despatchedBy:f.a.getName()},e.next=3,b()({url:"".concat(v.a,"/lst/").concat(f.a.getId(),"/downloadpdf"),method:"POST",data:o,responseType:"blob"});case 3:c=e.sent,s=new Blob([c.data],{type:"application/pdf"}),L(!1),Object(p.saveAs)(s,"LST_".concat(a,".pdf"));case 7:case"end":return e.stop()}}),e)})));return function(t,a,l,n){return e.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,u.a.createElement(u.a.Fragment,null,u.a.createElement(E.Modal,{isOpen:a,onClose:function(){return n(!1)}},u.a.createElement(E.ModalHeader,null,"Are you sure you want to delete!"),u.a.createElement(E.ModalBody,null),u.a.createElement(E.ModalFooter,null,u.a.createElement(E.Button,{className:"w-full sm:w-auto",onClick:Object(o.a)(r.a.mark((function e(){var t,a,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=X[O].invItems,console.log(t),t.map(function(){var e=Object(o.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={id:t._id,update:{location:X[O].from}},console.log("PAYLOAD",a),e.prev=2,e.next=5,b()({url:"".concat(v.a,"/inventory/").concat(f.a.getId(),"/invupdate"),method:"POST",data:a});case 5:console.log("Done"),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(2),console.log(e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()),e.prev=3,e.next=6,b()({url:"".concat(v.a,"/lst/").concat(f.a.getId(),"/delete"),method:"POST",data:{id:y}});case 6:a=e.sent,console.log(a.data),l=X.filter((function(e){return e._id!=y})),W(l),n(!1),e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(3),e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,13]])})))},"Confirm Delete")))),(console.log(M),u.a.createElement(u.a.Fragment,null,u.a.createElement(E.Modal,{isOpen:S,onClose:function(){return L(!1)}},u.a.createElement(E.ModalHeader,null,"Download LST"),u.a.createElement(E.ModalBody,null,X[I]?u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"flex flex-row"},u.a.createElement("div",{className:" my-2 ml-5 mr-2 w-full"},"Docket Type:"),u.a.createElement("input",{value:X[I].DocketType,onChange:function(e){var t=Object(l.a)(X);t[I].DocketType=e.target.value,W(t)},class:"w-full mr-5 shadow-md z-20 appearance-none rounded border border-gray-400 border-b block py-1  bg-white text-sm  text-gray-700 focus:bg-white focus:placeholder-gray-600 focus:text-gray-700 focus:outline-none"})),u.a.createElement("div",{className:"flex flex-row my-2"},u.a.createElement("div",{className:"my-2 ml-5 mr-2 w-full"},"Courier Number:"),u.a.createElement("input",{value:X[I].CourierNumber,onChange:function(e){var t=Object(l.a)(X);t[I].CourierNumber=e.target.value,W(t)},class:"w-full mr-5  shadow-md z-20 appearance-none rounded border border-gray-400 border-b block py-1  bg-white text-sm  text-gray-700 focus:bg-white focus:placeholder-gray-600 focus:text-gray-700 focus:outline-none"}))):null),u.a.createElement(E.ModalFooter,null,u.a.createElement(E.Button,{className:"w-full sm:w-auto",onClick:Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ke(X[I]._id,X[I].LSTNo,X[I].CourierNumber,X[I].DocketType);case 1:case"end":return e.stop()}}),e)})))},"Download"))))),u.a.createElement("div",{className:"mb-64 mt-4"},u.a.createElement("div",{className:""},u.a.createElement("div",{class:"my-2 flex sm:flex-row flex-col items-start sm:items-center sm:justify-left h-full space-x-2 "},u.a.createElement("div",{class:"relative mx-1 "},u.a.createElement("select",{class:" shadow-md h-full rounded border block appearance-none w-full bg-white border-gray-400 text-gray-700 py-2 px-4 pr-8 leading-tight focus:outline-none   focus:bg-white focus:border-gray-500",value:re,onChange:function(e){oe(e.target.value)}},u.a.createElement("option",{value:"",disabled:!0,selected:!0},"Status"),u.a.createElement("option",{value:""},"All"),u.a.createElement("option",{value:"In Transit"},"In Transit"),u.a.createElement("option",{value:"Received"},"Received"),u.a.createElement("option",{value:"Deleted"},"Deleted")),u.a.createElement("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},u.a.createElement("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},u.a.createElement("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})))),u.a.createElement("div",{class:"relative mx-1 "},u.a.createElement("select",{class:" shadow-md h-full rounded border block appearance-none w-full bg-white border-gray-400 text-gray-700 py-2 px-4 pr-8 leading-tight focus:outline-none   focus:bg-white focus:border-gray-500",value:he,onChange:function(e){ye(e.target.value)}},u.a.createElement("option",{value:"",selected:!0},"LST type"),u.a.createElement("option",{value:"Normal"},"Normal"),u.a.createElement("option",{value:"CMRR"},"CMRR"),u.a.createElement("option",{value:"Customer"},"Customer")),u.a.createElement("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},u.a.createElement("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},u.a.createElement("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})))),u.a.createElement("div",{class:"relative mx-1 "},u.a.createElement("select",{class:" shadow-md h-full rounded border block appearance-none w-full bg-white border-gray-400 text-gray-700 py-2 px-4 pr-8 leading-tight focus:outline-none   focus:bg-white focus:border-gray-500",value:ue,onChange:function(e){ie(e.target.value)}},u.a.createElement("option",{value:"",disabled:!0,selected:!0},"From Location"),u.a.createElement("option",{value:""},"All"),u.a.createElement("option",{value:"Trivandrum"},"Trivandrum"),u.a.createElement("option",{value:"Kottayam"},"Kottayam"),u.a.createElement("option",{value:"Kozhikode"},"Kozhikode")),u.a.createElement("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},u.a.createElement("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},u.a.createElement("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})))),u.a.createElement("div",{class:"relative mx-1 "},u.a.createElement("select",{class:" shadow-md h-full rounded border block appearance-none w-full bg-white border-gray-400 text-gray-700 py-2 px-4 pr-8 leading-tight focus:outline-none   focus:bg-white focus:border-gray-500",value:be,onChange:function(e){pe(e.target.value)}},u.a.createElement("option",{value:"",disabled:!0,selected:!0},"To Location"),u.a.createElement("option",{value:""},"All"),u.a.createElement("option",{value:"Trivandrum"},"Trivandrum"),u.a.createElement("option",{value:"Kottayam"},"Kottayam"),u.a.createElement("option",{value:"Kozhikode"},"Kozhikode"),u.a.createElement("option",{value:"Vendor"},"Vendor")),u.a.createElement("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},u.a.createElement("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},u.a.createElement("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})))),u.a.createElement("div",{class:"block relative xl:ml-64"},u.a.createElement("span",{class:"h-full absolute inset-y-0 left-0 flex items-center pl-2"},u.a.createElement("svg",{viewBox:"0 0 24 24",class:"h-4 w-4 fill-current text-gray-500"},u.a.createElement("path",{d:"M10 4a6 6 0 100 12 6 6 0 000-12zm-8 6a8 8 0 1114.32 4.906l5.387 5.387a1 1 0 01-1.414 1.414l-5.387-5.387A8 8 0 012 10z"}))),u.a.createElement("form",{onSubmit:function(e){e.preventDefault(),ee(!$)}},u.a.createElement("input",{value:Re,onChange:function(e){return De(e.target.value)},placeholder:"Search LST Number",class:"shadow-md z-20 appearance-none rounded border border-gray-400 border-b block pl-8 pr-6 py-2 w-full bg-white text-sm placeholder-gray-400 text-gray-700 focus:bg-white focus:placeholder-gray-600 focus:text-gray-700 focus:outline-none"}))))),u.a.createElement(E.TableContainer,{className:"mt-4"},u.a.createElement(E.Table,null,u.a.createElement(E.TableHeader,null,u.a.createElement("tr",{className:""},u.a.createElement(E.TableCell,null,"No"),u.a.createElement(E.TableCell,null,"From"),u.a.createElement(E.TableCell,null,"To"),u.a.createElement(E.TableCell,null,u.a.createElement("span",{className:""},"Date")," "),u.a.createElement(E.TableCell,null,u.a.createElement("span",{className:""},"Num")," "),u.a.createElement(E.TableCell,null," Report"),0==f.a.getRole()?u.a.createElement(E.TableCell,null," Delete"):null,u.a.createElement(E.TableCell,null,u.a.createElement("span",{className:"cursor-pointer",onClick:function(){return He(-1)}},"Items")))),u.a.createElement(E.TableBody,null,X.map((function(e,t){return u.a.createElement(u.a.Fragment,null,u.a.createElement(E.TableRow,{className:"hover:shadow-lg dark:hover:bg-gray-600   ".concat(_e==e._id?"bg-blue-300 shadow-lg dark:bg-gray-600":"white"," "),key:t,onClick:function(){}},u.a.createElement(E.TableCell,{className:"w-8"},u.a.createElement("div",{className:"flex items-center text-sm "},u.a.createElement("div",null,u.a.createElement("p",{className:"font-semibold"},e.LSTNo)))),u.a.createElement(E.TableCell,{className:""},u.a.createElement("span",{className:" "},e.from)),u.a.createElement(E.TableCell,{className:"  "},u.a.createElement("span",{className:"  "},e.vendorId?e.vendorName:e.to)),u.a.createElement(E.TableCell,null,u.a.createElement("span",{className:"text-sm"}," ",m()(e.date).format("DD/MM/YYYY"))),u.a.createElement(E.TableCell,null,u.a.createElement("span",{className:"text-sm"},"Normal"==e.LSTtype||"Customer"==e.LSTtype?e.invItems.length:e.CMRRItems.length)),u.a.createElement(E.TableCell,{className:" "},u.a.createElement(E.Button,{layout:"outline","aria-label":"DropDown",onClick:function(){console.log("dwlod"),B(e),L(!0),F(t)},className:"rounded-lg m-1"},"Download")),0==f.a.getRole()||15==f.a.getRole()?u.a.createElement(E.TableCell,{className:" "},u.a.createElement(E.Button,{layout:"link",size:"icon","aria-label":"Delete",onClick:Object(o.a)(r.a.mark((function a(){return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:console.log("delete LST"),n(!0),T(e._id),N(t);case 4:case"end":return a.stop()}}),a)})))},u.a.createElement(g.TrashIcon,{className:"w-5 h-5","aria-hidden":"true"}))):null,u.a.createElement(E.TableCell,{className:" "},u.a.createElement(E.Button,{size:"icon","aria-label":"DropDown",onClick:function(){console.log(_e),He(-1!=_e?-1:t)},className:"rounded-lg m-1"},u.a.createElement(g.DropdownIcon,{className:"w-5 h-5","aria-hidden":"true"})))),u.a.createElement(E.TableRow,{className:"hover:shadow-lg dark:hover:bg-gray-600 relative   ".concat(_e==e._id?"bg-blue-300 shadow-lg dark:bg-gray-600":"white"," "),key:t,onClick:function(){}},u.a.createElement(E.TableCell,{className:"absolute w-full m-0"},_e==t?function(e,t,a,l){return u.a.createElement("div",{className:" bg-gray-200 dark:bg-gray-700 p-3"},"Customer"==a?u.a.createElement("div",null,"Customer:",t):null,u.a.createElement("div",{className:"mb- mt-4"},u.a.createElement(E.TableContainer,{className:"mt-4"},u.a.createElement(E.Table,null,u.a.createElement(E.TableHeader,null,u.a.createElement("tr",null,u.a.createElement(E.TableCell,null,"Type"),u.a.createElement(E.TableCell,null,"Name"),u.a.createElement(E.TableCell,null,"Serial Number"),u.a.createElement(E.TableCell,null,"Location"),u.a.createElement(E.TableCell,null,"Inv Number"),u.a.createElement(E.TableCell,null,"Condition"))),u.a.createElement(E.TableBody,null,"Normal"==a||"Customer"==a?u.a.createElement(u.a.Fragment,null,e.map((function(e,t){return u.a.createElement(E.TableRow,{className:"hover:shadow-lg dark:hover:bg-gray-600 ".concat(_e==e._id?"bg-blue-300 shadow-lg dark:bg-gray-600":"white"," "),key:t,onClick:function(){He(e._id)}},u.a.createElement(E.TableCell,{className:"w-8"},u.a.createElement("div",{className:"flex items-center text-sm "},u.a.createElement("div",null,u.a.createElement("p",{className:"font-semibold"},Object(h.capitalize)(e.type))))),u.a.createElement(E.TableCell,null,u.a.createElement("span",{className:"text-sm"},e.name)),u.a.createElement(E.TableCell,null,u.a.createElement("span",{className:"text-sm"},e.sno)),u.a.createElement(E.TableCell,null,u.a.createElement("span",{className:"text-sm"},e.location)),u.a.createElement(E.TableCell,null,u.a.createElement("span",{className:"text-sm"},e.invnumber)),u.a.createElement(E.TableCell,null,u.a.createElement(E.Badge,{type:"Good"==e.condition?"primary":"danger"},e.condition)))}))):u.a.createElement(u.a.Fragment,null,l.map((function(e,t){return u.a.createElement(E.TableRow,{className:"hover:shadow-lg dark:hover:bg-gray-600 ".concat(_e==e._id?"bg-blue-300 shadow-lg dark:bg-gray-600":"white"," "),key:t,onClick:function(){He(e._id)}},u.a.createElement(E.TableCell,{className:"w-8"},u.a.createElement("div",{className:"flex items-center text-sm "},u.a.createElement("div",null,u.a.createElement("p",{className:"font-semibold"},Object(h.capitalize)(e.type))))),u.a.createElement(E.TableCell,null,u.a.createElement("span",{className:"text-sm"},e.name)),u.a.createElement(E.TableCell,null,u.a.createElement("span",{className:"text-sm"},e.sno)),u.a.createElement(E.TableCell,null,u.a.createElement("span",{className:"text-sm"},e.location)),u.a.createElement(E.TableCell,null,u.a.createElement("span",{className:"text-sm"},e.invnumber)),u.a.createElement(E.TableCell,null,u.a.createElement(E.Badge,{type:"Good"==e.condition?"primary":"danger"},e.condition)))}))))))))}(e.invItems,e.customerName,e.LSTtype,e.CMRRItems):null)))})))),u.a.createElement(E.TableFooter,null,u.a.createElement(E.Pagination,{totalResults:Ae,resultsPerPage:10,label:"Table navigation",onChange:function(e){G(e)}})))))}},211:function(e,t,a){(function(a){var l,n,r;n=[],void 0===(r="function"===typeof(l=function(){"use strict";function t(e,t,a){var l=new XMLHttpRequest;l.open("GET",e),l.responseType="blob",l.onload=function(){c(l.response,t,a)},l.onerror=function(){console.error("could not download file")},l.send()}function l(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function n(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(t){var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(a)}}var r="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof a&&a.global===a?a:void 0,o=r.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=r.saveAs||("object"!=typeof window||window!==r?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(e,a,o){var c=r.URL||r.webkitURL,s=document.createElement("a");a=a||e.name||"download",s.download=a,s.rel="noopener","string"==typeof e?(s.href=e,s.origin===location.origin?n(s):l(s.href)?t(e,a,o):n(s,s.target="_blank")):(s.href=c.createObjectURL(e),setTimeout((function(){c.revokeObjectURL(s.href)}),4e4),setTimeout((function(){n(s)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,a,r){if(a=a||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return"undefined"==typeof t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,r),a);else if(l(e))t(e,a,r);else{var o=document.createElement("a");o.href=e,o.target="_blank",setTimeout((function(){n(o)}))}}:function(e,a,l,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),"string"==typeof e)return t(e,a,l);var c="application/octet-stream"===e.type,s=/constructor/i.test(r.HTMLElement)||r.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||c&&s||o)&&"undefined"!=typeof FileReader){var i=new FileReader;i.onloadend=function(){var e=i.result;e=u?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=e:location=e,n=null},i.readAsDataURL(e)}else{var m=r.URL||r.webkitURL,d=m.createObjectURL(e);n?n.location=d:location.href=d,n=null,setTimeout((function(){m.revokeObjectURL(d)}),4e4)}});r.saveAs=c.saveAs=c,e.exports=c})?l.apply(t,n):l)||(e.exports=r)}).call(this,a(148))}}]);
//# sourceMappingURL=55.af9d91d8.chunk.js.map