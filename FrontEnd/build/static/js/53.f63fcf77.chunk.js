(this["webpackJsonpwindmill-dashboard-react"]=this["webpackJsonpwindmill-dashboard-react"]||[]).push([[53],{1069:function(e,t,a){"use strict";a.r(t);var l=a(3),n=a.n(l),r=a(10),c=a(2),o=a(0),s=a.n(o),u=a(18),m=a.n(u),i=a(7),d=a.n(i),E=a(15),p=(a(86),a(28),a(1)),b=a(8),f=a(30),g=a(6),w=a(29),S=(a(19),a(121));t.default=function(){var e=Object(o.useState)(!1),t=Object(c.a)(e,2),a=t[0],l=t[1],u=Object(o.useState)(!1),i=Object(c.a)(u,2),C=i[0],h=i[1],v=Object(o.useState)(!1),y=Object(c.a)(v,2),x=y[0],O=y[1],k=Object(o.useContext)(f.a),j=(k.bbaropen,k.setBBarOpen),N=k.setAssetDetails,T=(k.assetdetails,Object(o.useState)(0)),D=Object(c.a)(T,2),B=D[0],M=D[1],I=Object(o.useContext)(w.a),P=(I.topheading,I.setTopHeading),A=Object(o.useState)(!1),_=Object(c.a)(A,2),L=(_[0],_[1],Object(o.useState)(1)),R=Object(c.a)(L,2),z=R[0],F=R[1],H=Object(o.useState)([]),U=Object(c.a)(H,2),Y=U[0],K=U[1],V=Object(o.useState)(""),J=Object(c.a)(V,2),W=J[0],q=J[1],G=Object(o.useState)(!1),Q=Object(c.a)(G,2),X=Q[0],Z=Q[1],$=Object(o.useState)(!1),ee=Object(c.a)($,2),te=ee[0],ae=ee[1],le=Object(o.useState)(!1),ne=Object(c.a)(le,2),re=ne[0],ce=ne[1],oe=Object(o.useState)(!0),se=Object(c.a)(oe,2),ue=se[0],me=se[1],ie=Object(o.useState)(!0),de=Object(c.a)(ie,2),Ee=de[0],pe=de[1],be=Object(o.useState)(""),fe=Object(c.a)(be,2),ge=fe[0],we=fe[1],Se=Object(o.useState)(""),Ce=Object(c.a)(Se,2),he=Ce[0],ve=Ce[1],ye=Object(o.useState)({_id:"",unitName:""}),xe=Object(c.a)(ye,2),Oe=xe[0],ke=(xe[1],Object(o.useState)({_id:"",customerName:""})),je=Object(c.a)(ke,2),Ne=je[0],Te=(je[1],Object(o.useState)({_id:"",accountName:""})),De=Object(c.a)(Te,2),Be=De[0],Me=(De[1],Object(o.useState)({_id:"",enggName:""})),Ie=Object(c.a)(Me,2),Pe=Ie[0],Ae=(Ie[1],Object(o.useState)(!1)),_e=Object(c.a)(Ae,2),Le=(_e[0],_e[1],Object(o.useState)({})),Re=Object(c.a)(Le,2),ze=Re[0],Fe=Re[1],He=Object(o.useState)(""),Ue=Object(c.a)(He,2),Ye=Ue[0],Ke=Ue[1],Ve=Object(o.useState)(""),Je=Object(c.a)(Ve,2),We=Je[0],qe=Je[1],Ge=Object(o.useState)(""),Qe=Object(c.a)(Ge,2),Xe=Qe[0],Ze=Qe[1],$e=Object(o.useState)(20),et=Object(c.a)($e,2),tt=et[0],at=et[1],lt=function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(p.Modal,{isOpen:a,onClose:function(){return l(!1)}},s.a.createElement(p.ModalHeader,null,"Set Call Status"),s.a.createElement(p.ModalBody,null,s.a.createElement("div",{className:"flex-col flex"},s.a.createElement("div",{className:"font-xl dark:text-white"},"Current Status:"),s.a.createElement(p.Button,{className:"font-xl"},"Set Status"),s.a.createElement(p.Button,{className:"font-xl my-2 mx-10 inline"},"Pending for Allocation"),s.a.createElement(p.Button,{className:"font-xl my-2 mx-10 inline"},"Pending for Allocation"),s.a.createElement(p.Button,{className:"font-xl my-2 mx-10 inline"},"Pending for Allocation"),s.a.createElement(p.Button,{className:"font-xl my-2 mx-10 inline"},"Pending for Allocation"))),s.a.createElement(p.ModalFooter,null,s.a.createElement(p.Button,{className:"w-full sm:w-auto",onClick:Object(r.a)(n.a.mark((function e(){var t,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("SELECTED",ze),t={id:ze._id,update:{employeeId:Pe._id,employeeName:Pe.enggName,callStatus:1}},e.prev=2,e.next=5,d()({url:"".concat(b.a,"/call/").concat(E.a.getId(),"/ViewCallsg"),method:"POST",data:t});case 5:e.sent,a=Y,console.log(a),a=a.filter((function(e){if(e._id===ze._id)return e.callStatus=1,e.employeeName=Pe.enggName,e.employeeId=Pe._id,e;K(a)})),l(!1),e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(2),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,12]])})))},"Confirm Assignment"))))};Object(o.useEffect)((function(){return function(){j(0),N({})}}),[]),Object(o.useEffect)((function(){return P("View Calls"),function(){P("")}}),[]),Object(o.useEffect)((function(){!function(){var e=Object(r.a)(n.a.mark((function e(){var t,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={pages:{page:z,limit:10},filters:{business:ge,producttype:he,customer:Ne,account:Be,unitId:Oe._id,customerId:Ne._id,accountId:Be._id,searchtype:Ye,searchquery:Xe}},e.prev=1,e.next=4,d()({url:"".concat(b.a,"/call/").concat(E.a.getId(),"/getall"),method:"POST",data:t});case 4:a=e.sent,at(a.data.total),K(a.data.out),e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(1),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}()()}),[z,ge,he,ue]);var nt=function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(p.Modal,{isOpen:C,onClose:function(){return h(!1)}},s.a.createElement(p.ModalHeader,null,"Updated Successfully!"),s.a.createElement(p.ModalBody,null),s.a.createElement(p.ModalFooter,null,s.a.createElement(p.Button,{className:"w-full sm:w-auto",onClick:function(){return h(!1)}},"Okay!"))))};return s.a.createElement(s.a.Fragment,null,s.a.createElement(lt,null),s.a.createElement(nt,null),function(){if(Y[W]){var e=Y[W],t=Y[W].history;return console.log(t),s.a.createElement(s.a.Fragment,null,s.a.createElement(p.Modal,{isOpen:x,onClose:function(){return O(!1)},className:"w-9/12 dark:bg-gray-800 p-10 my-6  bg-gray-50 text-gray-900 dark:text-white  rounded-lg overflow-y-scroll"},s.a.createElement(p.ModalHeader,{className:"flex flex-row justify-between text-xl"},s.a.createElement("div",null,e.name),s.a.createElement("div",null,"Call No: ",s.a.createElement(p.Badge,null,e.callNo)," ")),s.a.createElement(p.ModalBody,null,s.a.createElement("div",{className:"font-semibold text-xl my-2"},"Call History"),s.a.createElement(p.TableContainer,{className:"mt-4"},s.a.createElement(p.Table,null,s.a.createElement(p.TableHeader,null,s.a.createElement("tr",null,s.a.createElement(p.TableCell,null,"Date"),s.a.createElement(p.TableCell,null,"Engineer"),s.a.createElement(p.TableCell,null,"Attended Date"),s.a.createElement(p.TableCell,null,"Start Of Service"),s.a.createElement(p.TableCell,null,"End Of Service"),s.a.createElement(p.TableCell,null,"Status"),s.a.createElement(p.TableCell,null,"Notes"),s.a.createElement(p.TableCell,null,"Action Taken"))),s.a.createElement(p.TableBody,null,t.map((function(e,t){return s.a.createElement(p.TableRow,{className:"hover:shadow-lg dark:hover:bg-gray-600 ".concat(B==e._id?"bg-blue-300 shadow-lg dark:bg-gray-600":"white"," "),key:t,onClick:function(){}},s.a.createElement(p.TableCell,{className:"w-8"},s.a.createElement("div",{className:"flex items-center text-sm "},s.a.createElement("div",null,s.a.createElement("p",{className:"font-semibold"},m()(e.date).format("DD-MM-YYYY"))))),s.a.createElement(p.TableCell,null,s.a.createElement("span",{className:"text-sm"},Object(S.capitalize)(e.engineer))),s.a.createElement(p.TableCell,null,s.a.createElement("span",{className:"text-sm"},e.callAttendDate)),s.a.createElement(p.TableCell,null,s.a.createElement("span",{className:"text-sm"},e.startOfService)),s.a.createElement(p.TableCell,null,s.a.createElement("span",{className:"text-sm"},e.endOfService)),s.a.createElement(p.TableCell,null,s.a.createElement("span",null,0==e.callStatus?s.a.createElement(p.Badge,null,"Not Allocated"):null,1==e.callStatus?s.a.createElement(p.Badge,null,"Pending for Percall Approval"):null,2==e.callStatus?s.a.createElement(p.Badge,null,"Pending for Response"):null,3==e.callStatus?s.a.createElement(p.Badge,null,"Pending for OEM Response"):null,4==e.callStatus?s.a.createElement(p.Badge,null,"Pending for 2nd Response"):null,5==e.callStatus?s.a.createElement(p.Badge,null,"Pending for Customer"):null,6==e.callStatus?s.a.createElement(p.Badge,null,"Under Observation"):null,7==e.callStatus?s.a.createElement(p.Badge,null,"Pending for Others"):null,8==e.callStatus?s.a.createElement(p.Badge,null,"Pending for Spare"):null,9==e.callStatus?s.a.createElement(p.Badge,null,"Spare in Transit"):null,10==e.callStatus?s.a.createElement(p.Badge,null,"Cancelled Calls"):null,11==e.callStatus?s.a.createElement(p.Badge,null,"Closed Calls"):null)),s.a.createElement(p.TableCell,null,s.a.createElement("span",{className:"text-sm "},e.note)),s.a.createElement(p.TableCell,null,s.a.createElement("span",{className:"text-sm"},e.actionTaken)))})))))),s.a.createElement(p.ModalFooter,null)))}}(),s.a.createElement("div",{className:"mb-64 mt-4"},s.a.createElement("div",{className:""},s.a.createElement("div",{class:"my-2 flex sm:flex-row flex-col items-start sm:items-center sm:justify-left h-full space-x-6 "},s.a.createElement("div",{class:"relative  "},s.a.createElement("button",{class:" shadow-md appearance-none h-full rounded border block w-full bg-white border-gray-400 text-gray-700 py-2 px-4 pr-8 leading-tight focus:outline-none   focus:bg-white focus:border-gray-500",onClick:function(){ce(!re)}},"Pick Customer"),s.a.createElement("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},s.a.createElement("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},s.a.createElement("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})))),s.a.createElement("div",{class:"relative mx-5 "},s.a.createElement("select",{class:" shadow-md h-full rounded border block appearance-none w-full bg-white border-gray-400 text-gray-700 py-2 px-4 pr-8 leading-tight focus:outline-none   focus:bg-white focus:border-gray-500",value:ge,onChange:function(e){we(e.target.value)}},s.a.createElement("option",{value:"",disabled:!0,selected:!0},"Business Type"),s.a.createElement("option",{value:""},"All"),s.a.createElement("option",{value:"AMC"},"AMC"),s.a.createElement("option",{value:"WTY"},"Warranty"),s.a.createElement("option",{value:"NOS"},"NOS")),s.a.createElement("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},s.a.createElement("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},s.a.createElement("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})))),s.a.createElement("div",{className:"relative z-40 "},s.a.createElement("button",{onClick:function(){Z(!X)},className:"shadow-md z-20 appearance-none rounded border border-gray-400 border-b block pl-4 pr-6 py-2 w-full bg-white text-sm placeholder-gray-400 text-gray-700 focus:bg-white focus:placeholder-gray-600 focus:text-gray-700 focus:outline-none","aria-label":"Notifications","aria-haspopup":"true"},he||"Pick Product"),s.a.createElement("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},s.a.createElement("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},s.a.createElement("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"}))),s.a.createElement(p.Dropdown,{isOpen:X,onClose:function(){return Z(!1)}},s.a.createElement(p.DropdownItem,{onClick:function(){Z(!1),ve("")}},s.a.createElement("span",null,"All")),s.a.createElement(p.DropdownItem,{onClick:function(){Z(!1),ve("Console")}},s.a.createElement("span",null,"Console")),s.a.createElement(p.DropdownItem,{onClick:function(){Z(!1),ve("DMP")}},s.a.createElement("span",null,"DMP")),s.a.createElement(p.DropdownItem,{onClick:function(){Z(!1),ve("Inkjet")}},s.a.createElement("span",null,"Inkjet")),s.a.createElement(p.DropdownItem,{onClick:function(){Z(!1),ve("KVM")}},s.a.createElement("span",null,"KVM")),s.a.createElement(p.DropdownItem,{onClick:function(){Z(!1),ve("Laptop")}},s.a.createElement("span",null,"Laptop")),s.a.createElement(p.DropdownItem,{onClick:function(){Z(!1),ve("Laser")}},s.a.createElement("span",null,"Laser")),s.a.createElement(p.DropdownItem,{onClick:function(){Z(!1),ve("LMP")}},s.a.createElement("span",null,"LMP")),s.a.createElement(p.DropdownItem,{onClick:function(){Z(!1),ve("Module")}},s.a.createElement("span",null,"Module")),s.a.createElement(p.DropdownItem,{onClick:function(){Z(!1),ve("Router")}},s.a.createElement("span",null,"Router")),s.a.createElement(p.DropdownItem,{onClick:function(){Z(!1),ve("Scanner")}},s.a.createElement("span",null,"Scanner")),s.a.createElement(p.DropdownItem,{onClick:function(){Z(!1),ve("Server")}},s.a.createElement("span",null,"Server")),s.a.createElement(p.DropdownItem,{onClick:function(){Z(!1),ve("Desktop")}},s.a.createElement("span",null,"Desktop")),s.a.createElement(p.DropdownItem,{onClick:function(){Z(!1),ve("Storage")}},s.a.createElement("span",null,"Storage")),s.a.createElement(p.DropdownItem,{onClick:function(){Z(!1),ve("Switch")}},s.a.createElement("span",null,"Switch")),s.a.createElement(p.DropdownItem,{onClick:function(){Z(!1),ve("UPS")}},s.a.createElement("span",null,"UPS")),s.a.createElement(p.DropdownItem,{onClick:function(){Z(!1),ve("Others")}},s.a.createElement("span",null,"Others")))),s.a.createElement("div",{className:"relative "},s.a.createElement("button",{onClick:function(){ae(!te)},className:"shadow-md z-20 appearance-none rounded border border-gray-400 border-b block pl-4 pr-6 py-2 w-full bg-white text-sm placeholder-gray-400 text-gray-700 focus:bg-white focus:placeholder-gray-600 focus:text-gray-700 focus:outline-none","aria-label":"Notifications","aria-haspopup":"true"},Ye?We:"Pick Search Type"),s.a.createElement("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},s.a.createElement("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},s.a.createElement("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"}))),s.a.createElement(p.Dropdown,{isOpen:te,onClose:function(){return ae(!1)}},s.a.createElement(p.DropdownItem,{onClick:function(){ae(!1),Ke(""),qe(""),pe(!0),Ze(""),me(!ue)}},s.a.createElement("span",null,"All")),s.a.createElement(p.DropdownItem,{onClick:function(){ae(!1),Ke("kbdsno"),qe("Keyboard Serial"),pe(!1)}},s.a.createElement("span",null,"Keyboard Serial")),s.a.createElement(p.DropdownItem,{onClick:function(){ae(!1),Ke("mousesno"),qe("Mouse Serial"),pe(!1)}},s.a.createElement("span",null,"Mouse Serial")),s.a.createElement(p.DropdownItem,{onClick:function(){ae(!1),Ke("motherboardsno"),qe("Motherboard Serial"),pe(!1)}},s.a.createElement("span",null,"Motherboard Serial")),s.a.createElement(p.DropdownItem,{onClick:function(){ae(!1),Ke("monitorsno"),qe("Monitor Serial"),pe(!1)}},s.a.createElement("span",null,"Monitor Serial")),s.a.createElement(p.DropdownItem,{onClick:function(){ae(!1),Ke("hddsno"),qe("HDD Serial"),pe(!1)}},s.a.createElement("span",null,"HDD Serial")),s.a.createElement(p.DropdownItem,{onClick:function(){ae(!1),Ke("cpusno"),qe("CPU Serial"),pe(!1)}},s.a.createElement("span",null,"CPU Serial")),s.a.createElement(p.DropdownItem,{onClick:function(){ae(!1),Ke("ramsno"),qe("Ram Serial"),pe(!1)}},s.a.createElement("span",null,"RAM Serial")),s.a.createElement(p.DropdownItem,{onClick:function(){ae(!1),Ke("smpssno"),qe("SMPS Serial"),pe(!1)}},s.a.createElement("span",null,"SMPS Serial")),s.a.createElement(p.DropdownItem,{onClick:function(){ae(!1),Ke("fansno"),qe("Fan Serial"),pe(!1)}},s.a.createElement("span",null,"Fan Serial")),s.a.createElement(p.DropdownItem,{onClick:function(){ae(!1),Ke("opticaldrivesno"),qe("Optical Drive Serial"),pe(!1)}},s.a.createElement("span",null,"Optical Drive Serial")))),s.a.createElement("div",{class:"block relative xl:ml-64"},s.a.createElement("span",{class:"h-full absolute inset-y-0 left-0 flex items-center pl-2"},s.a.createElement("svg",{viewBox:"0 0 24 24",class:"h-4 w-4 fill-current text-gray-500"},s.a.createElement("path",{d:"M10 4a6 6 0 100 12 6 6 0 000-12zm-8 6a8 8 0 1114.32 4.906l5.387 5.387a1 1 0 01-1.414 1.414l-5.387-5.387A8 8 0 012 10z"}))),s.a.createElement("form",{onSubmit:function(e){e.preventDefault(),me(!ue)}},s.a.createElement("input",{value:Xe,onChange:function(e){return Ze(e.target.value)},placeholder:"Search",disabled:Ee,class:"shadow-md z-20 appearance-none rounded border border-gray-400 border-b block pl-8 pr-6 py-2 w-full bg-white text-sm placeholder-gray-400 text-gray-700 focus:bg-white focus:placeholder-gray-600 focus:text-gray-700 focus:outline-none"}))))),s.a.createElement(p.TableContainer,{className:"mt-4"},s.a.createElement(p.Table,null,s.a.createElement(p.TableHeader,null,s.a.createElement("tr",null,s.a.createElement(p.TableCell,null,"Call No"),s.a.createElement(p.TableCell,null,"Date"),s.a.createElement(p.TableCell,null,"Unit Name"),s.a.createElement(p.TableCell,null,"Phone"),s.a.createElement(p.TableCell,null,"Call Status"),s.a.createElement(p.TableCell,null,"Assigned Employee"),s.a.createElement(p.TableCell,null,"Update / History"))),s.a.createElement(p.TableBody,null,Y.map((function(e,t){return s.a.createElement(p.TableRow,{className:"hover:shadow-lg dark:hover:bg-gray-600 ".concat(B==e._id?"bg-blue-300 shadow-lg dark:bg-gray-600":"white"," "),key:t,onClick:function(){M(e._id),j(1),Fe(e),console.log("SELECTD",e),N(e.assetId)}},s.a.createElement(p.TableCell,{className:"w-8"},s.a.createElement("div",{className:"flex items-center text-sm "},s.a.createElement("div",null,s.a.createElement("p",{className:"font-semibold"},e.callNo)))),s.a.createElement(p.TableCell,null,s.a.createElement("span",{className:"text-sm"},m()(e.date).format("DD/MM/YYYY"))),s.a.createElement(p.TableCell,null,s.a.createElement("span",{className:"text-sm"},e.unitName)),s.a.createElement(p.TableCell,null,s.a.createElement("span",{className:"text-sm"},e.phone)),s.a.createElement(p.TableCell,null,s.a.createElement("span",null,0==e.callStatus?s.a.createElement(p.Badge,null,"Not Allocated"):null,1==e.callStatus?s.a.createElement(p.Badge,null,"Pending for Percall Approval"):null,2==e.callStatus?s.a.createElement(p.Badge,null,"Pending for Response"):null,3==e.callStatus?s.a.createElement(p.Badge,null,"Pending for OEM Response"):null,4==e.callStatus?s.a.createElement(p.Badge,null,"Pending for 2nd Response"):null,5==e.callStatus?s.a.createElement(p.Badge,null,"Pending for Customer"):null,6==e.callStatus?s.a.createElement(p.Badge,null,"Under Observation"):null,7==e.callStatus?s.a.createElement(p.Badge,null,"Pending for Others"):null,8==e.callStatus?s.a.createElement(p.Badge,null,"Pending for Spare"):null,9==e.callStatus?s.a.createElement(p.Badge,null,"Spare in Transit"):null,10==e.callStatus?s.a.createElement(p.Badge,null,"Cancelled Calls"):null,11==e.callStatus?s.a.createElement(p.Badge,null,"Closed Calls"):null)),s.a.createElement(p.TableCell,null,e.employeeId?s.a.createElement(s.a.Fragment,null,e.employeeName):s.a.createElement(s.a.Fragment,null,"Not Assigned")),s.a.createElement(p.TableCell,null,s.a.createElement("div",{className:"flex justify-start items-center space-x-2"},s.a.createElement(g.b,{key:e._id,to:"/app/call/updatecall/".concat(e._id,"/").concat(e.assetId._id)},s.a.createElement(p.Button,{layout:"outline",onClick:function(){},className:" "},"Update")),s.a.createElement(p.Button,{onClick:function(){q(t),O(!0)},layout:"outline"},"History"))))})))),s.a.createElement(p.TableFooter,null,s.a.createElement(p.Pagination,{totalResults:tt,resultsPerPage:10,label:"Table navigation",onChange:function(e){F(e)}})))))}},121:function(e,t){t.capitalize=function(e){return"string"!==typeof e?"":e.charAt(0).toUpperCase()+e.slice(1)}}}]);
//# sourceMappingURL=53.f63fcf77.chunk.js.map