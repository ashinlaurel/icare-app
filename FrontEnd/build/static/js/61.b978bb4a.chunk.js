(this["webpackJsonpwindmill-dashboard-react"]=this["webpackJsonpwindmill-dashboard-react"]||[]).push([[61],{1228:function(e,t,a){"use strict";a.r(t);var n=a(5),r=a.n(n),l=a(12),c=a(3),o=a(0),s=a.n(o),m=a(9),i=a.n(m),u=a(10),d=a(1147),b=a.n(d),v=a(18),f=a(2),p=a(43),y=a(7),h=a(21),E=a.n(h),g=a(36);t.default=function(){Object(y.g)();var e=Object(o.useContext)(p.a).setTopHeading,t=Object(o.useState)(E()().format("MMMM")),a=Object(c.a)(t,2),n=a[0],m=a[1],d=Object(o.useState)(E()().format("YYYY")),h=Object(c.a)(d,2),x=h[0],w=h[1],N=Object(o.useState)([]),j=Object(c.a)(N,2),k=j[0],O=j[1],C=Object(o.useState)(0),M=Object(c.a)(C,2),Y=(M[0],M[1]),S=Object(o.useState)(!1),A=Object(c.a)(S,2),D=A[0],B=A[1],P=Object(o.useState)({today:{}}),L=Object(c.a)(P,2),F=L[0],J=L[1],I=Object(o.useState)(!1),z=Object(c.a)(I,2),T=z[0],H=z[1],V=Object(o.useState)(""),q=Object(c.a)(V,2),G=q[0],K=q[1];Object(o.useEffect)((function(){return e("View Attendance"),function(){e("")}}),[]),Object(o.useEffect)((function(){!function(){var e=Object(l.a)(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getter called"),t={pages:{page:1,limit:20},filters:{month:n,year:x}},e.prev=2,e.next=5,i()({url:"".concat(u.a,"/attendance/").concat(v.a.getId(),"/viewAttendance"),method:"POST",data:t});case 5:a=e.sent,console.log(a.data.out),Y(a.data.total),O(a.data.out),e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(2),e.t0;case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}()()}),[n,x]);var Q=function(){var e=Object(l.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(F),console.log(G),console.log(k),k.map(function(){var e=Object(l.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.employee!=F.employee){e.next=13;break}return e.next=3,t.days.map((function(e){parseInt(e.dayNo)==parseInt(F.today.dayNo)&&(e.isPresent=G)}));case 3:return e.prev=3,e.next=6,i()({url:"".concat(u.a,"/attendance/").concat(v.a.getId(),"/updateAttendance"),method:"POST",data:t});case 6:a=e.sent,console.log(a.data),e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(3),e.t0;case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function R(){B(!1)}return s.a.createElement(s.a.Fragment,null,s.a.createElement(f.Modal,{isOpen:D,onClose:R},s.a.createElement(f.ModalHeader,{className:"flex flex-row justify-between "},s.a.createElement("div",{className:"text-xl"},"Attendance Details"),s.a.createElement("div",{className:"text-base"},"Date:"," ",s.a.createElement(f.Badge,null,E()(F.today.date).format("DD-MM-YYYY"))," ")),s.a.createElement(f.ModalBody,null,s.a.createElement("hr",null),s.a.createElement("div",{className:"flex flex-row items-center justify-start w-full space-x-2"},s.a.createElement("div",{className:"mt-4 text-base font-semibold"},"Edit Status: "),s.a.createElement("div",{class:"relative  mt-2 w-3/4 "},s.a.createElement("select",{class:" shadow-md rounded-md text-sm border block appearance-none w-full bg-white border-gray-400 text-gray-700 pl-1 leading-tight focus:outline-none py-2   focus:bg-white focus:border-gray-500",value:G,onChange:function(e){K(e.target.value)}},s.a.createElement("option",{value:"",disabled:!0,selected:!0},"Not Marked Yet"),s.a.createElement("option",{value:"Present"},"Present"),s.a.createElement("option",{value:"Absent"},"Absent"),s.a.createElement("option",{value:"Leave"},"Leave")),s.a.createElement("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},s.a.createElement("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},s.a.createElement("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"}))))," ")),s.a.createElement(f.ModalFooter,null,s.a.createElement("div",{className:"hidden sm:block"},s.a.createElement(f.Button,{layout:"outline",onClick:R},"Cancel")),s.a.createElement("div",{className:"hidden sm:block"},s.a.createElement(f.Button,{onClick:Object(l.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q();case 2:R();case 3:case"end":return e.stop()}}),e)})))},"Accept")),s.a.createElement("div",{className:"block w-full sm:hidden"},s.a.createElement(f.Button,{block:!0,size:"large",layout:"outline",onClick:R},"Cancel")),s.a.createElement("div",{className:"block w-full sm:hidden"},s.a.createElement(f.Button,{block:!0,size:"large"},"Accept")))),s.a.createElement(f.Card,{className:"mt-4 shadow-md  overflow-x-auto"},s.a.createElement(f.CardBody,null,s.a.createElement("div",{className:" "},s.a.createElement("div",{class:"my-2 flex sm:flex-row flex-col items-start sm:items-center sm:justify-left h-full space-x-2 relative "},s.a.createElement("div",{class:"relative mx-1 "},s.a.createElement("select",{class:" text-sm border block appearance-none w-full bg-white border-gray-400 text-gray-700 pl-1 leading-tight focus:outline-none py-1   focus:bg-white focus:border-gray-500",value:n,onChange:function(e){m(e.target.value)}},s.a.createElement("option",{value:"",disabled:!0,selected:!0},"Select the Month"),s.a.createElement("option",{value:"January"},"January"),s.a.createElement("option",{value:"February"},"February"),s.a.createElement("option",{value:"March"},"March"),s.a.createElement("option",{value:"April"},"March"),s.a.createElement("option",{value:"May"},"May"),s.a.createElement("option",{value:"June"},"June"),s.a.createElement("option",{value:"July"},"July"),s.a.createElement("option",{value:"August"},"August"),s.a.createElement("option",{value:"September"},"September"),s.a.createElement("option",{value:"October"},"October"),s.a.createElement("option",{value:"November"},"November"),s.a.createElement("option",{value:"December"},"December")),s.a.createElement("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},s.a.createElement("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},s.a.createElement("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})))),s.a.createElement(b.a,{className:"bg-white z-20",clearIcon:null,onChange:function(e){console.log(E()(e).format("YYYY")),w(E()(e).format("YYYY"))},value:x,format:"y",maxDetail:"decade"}),s.a.createElement("div",{className:"flex flex-row items-center justify-center space-x-2 absolute right-0 "},s.a.createElement("div",{className:"text-sm"},"Show Dates:"),s.a.createElement(f.Button,{className:1==T?"bg-yellow-300 rounded-full w-2 h-2":"bg-white w-2 h-2 rounded-full",icon:g.TickIcon,onClick:function(){H(!T)},layout:"outline","aria-label":"Like"})))))),s.a.createElement(f.Card,{className:"my-4 shadow-md  overflow-x-auto"},s.a.createElement(f.CardBody,null,k.map((function(e){return s.a.createElement("div",{className:"flex flex-row justify-left items-center"},s.a.createElement("div",{className:"mx-4 dark:text-white"},e.employeeName,":"),s.a.createElement("div",{className:"flex flex-row items-center justify-center"}," ",e.days.map((function(t){return parseInt(t.dayNo)>E()().format("DD")&&"Absent"==t.isPresent?s.a.createElement("div",{onClick:function(){console.log(t,E()().format("DD")),B(!0);var a={employee:e.employee,month:e.month,employeeName:e.employeeName,year:e.year,today:t};J(a),K("")},className:"m-2"},(a=t.dayNo,s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"w-5 h-5 bg-gray-200 border-gray-600 border hover:border-black hover:bg-red-800 rounded-sm text-xs text-black flex justify-center items-center"},T?s.a.createElement("div",null,a):null)))):"Present"==t.isPresent?s.a.createElement("div",{onClick:function(){B(!0);var a={employee:e.employee,month:e.month,employeeName:e.employeeName,year:e.year,today:t};J(a),K("Present"),console.log(F)},className:"m-2"},function(e){return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:" relative w-5 h-5 bg-green-400 border-gray-600 border hover:border-black hover:bg-green-500 rounded-sm text-xs text-white flex justify-center items-center"},T?s.a.createElement("div",null,e):null))}(t.dayNo)):"Absent"==t.isPresent?s.a.createElement("div",{onClick:function(){B(!0);var a={employee:e.employee,month:e.month,employeeName:e.employeeName,year:e.year,today:t};J(a),K("Absent")},className:"m-2"},function(e){return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"w-5 h-5 bg-red-500 border-gray-600 border hover:border-black hover:bg-red-800 rounded-sm text-xs text-white flex justify-center items-center"},T?s.a.createElement("div",null,e):null))}(t.dayNo)):"Leave"==t.isPresent?s.a.createElement("div",{onClick:function(){B(!0);var a={employee:e.employee,month:e.month,employeeName:e.employeeName,year:e.year,today:t};J(a),K("Leave")},className:"m-2"},function(e){return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"w-5 h-5 bg-blue-500 border-blue-600 border hover:border-black hover:bg-red-800 rounded-sm text-xs text-white flex justify-center items-center"},T?s.a.createElement("div",null,e):null))}(t.dayNo)):void 0;var a}))))})))))}}}]);
//# sourceMappingURL=61.b978bb4a.chunk.js.map