(this["webpackJsonpwindmill-dashboard-react"]=this["webpackJsonpwindmill-dashboard-react"]||[]).push([[77],{1328:function(e,a,t){"use strict";t.r(a);var l=t(16),n=t(5),r=t.n(n),c=t(12),o=t(3),s=t(0),m=t.n(s),u=t(21),i=t.n(u),d=t(9),b=t.n(d),p=t(209),E=t(18),g=t(36),f=t(2),v=t(10),h=t(43),w=t(37),y=t(1);a.default=function(){var e=Object(s.useState)(!1),a=Object(o.a)(e,2),t=a[0],n=a[1],u=Object(s.useState)(0),d=Object(o.a)(u,2),x=d[0],T=d[1],C=Object(s.useState)(-1),N=Object(o.a)(C,2),O=N[0],j=N[1],k=Object(s.useState)(!1),S=Object(o.a)(k,2),D=S[0],L=S[1],I=Object(s.useState)({}),R=Object(o.a)(I,2),M=R[0],B=R[1],z=Object(s.useState)(0),_=Object(o.a)(z,2),A=_[0],F=_[1],P=Object(s.useContext)(h.a),K=(P.topheading,P.setTopHeading),H=Object(s.useState)(!1),Y=Object(o.a)(H,2),G=(Y[0],Y[1],Object(s.useState)(1)),J=Object(o.a)(G,2),V=J[0],q=J[1],Q=Object(s.useState)([{CMRRItems:[]}]),U=Object(o.a)(Q,2),W=U[0],X=U[1],Z=Object(s.useState)(!0),$=Object(o.a)(Z,2),ee=$[0],ae=$[1],te=Object(s.useState)(!0),le=Object(o.a)(te,2),ne=(le[0],le[1],Object(s.useState)("")),re=Object(o.a)(ne,2),ce=re[0],oe=re[1],se=Object(s.useState)(""),me=Object(o.a)(se,2),ue=me[0],ie=me[1],de=Object(s.useState)(""),be=Object(o.a)(de,2),pe=be[0],Ee=be[1],ge=Object(s.useState)(""),fe=Object(o.a)(ge,2),ve=fe[0],he=(fe[1],Object(s.useState)("Normal")),we=Object(o.a)(he,2),ye=we[0],xe=we[1],Te=Object(s.useState)({}),Ce=Object(o.a)(Te,2),Ne=Ce[0],Oe=(Ce[1],Object(s.useState)("")),je=Object(o.a)(Oe,2),ke=(je[0],je[1],Object(s.useState)("")),Se=Object(o.a)(ke,2),De=(Se[0],Se[1],Object(s.useState)("")),Le=Object(o.a)(De,2),Ie=Le[0],Re=Le[1],Me=Object(s.useState)(20),Be=Object(o.a)(Me,2),ze=Be[0],_e=Be[1],Ae=Object(s.useState)(-1),Fe=Object(o.a)(Ae,2),Pe=Fe[0],Ke=Fe[1];Object(s.useEffect)((function(){return K("LST History"),function(){K("")}}),[]),Object(s.useEffect)((function(){!function(){var e=Object(c.a)(r.a.mark((function e(){var a,t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getter called"),a={pages:{page:V,limit:10},filters:{from:ue,to:pe,status:ce,LSTtype:ye,isDeleted:"false",searchquery:Ie}},"Deleted"==ce&&(a.filters.status="",a.filters.isDeleted="true"),e.prev=3,e.next=6,b()({url:"".concat(v.API,"/lst/").concat(E.a.getId(),"/getall"),method:"POST",data:a});case 6:t=e.sent,console.log(t.data.out),_e(t.data.total),X(t.data.out),e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(3),e.t0;case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(){return e.apply(this,arguments)}}()()}),[V,ue,pe,ve,ce,ee,ye]),console.log(Ne);var He=function(){var e=Object(c.a)(r.a.mark((function e(a,t,l,n){var c,o,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={id:a,update:{CourierNumber:l,DocketType:n},despatchedBy:E.a.getName()},e.next=3,b()({url:"".concat(v.API,"/lst/").concat(E.a.getId(),"/downloadpdf"),method:"POST",data:c,responseType:"blob"});case 3:o=e.sent,s=new Blob([o.data],{type:"application/pdf"}),L(!1),Object(p.saveAs)(s,"LST_".concat(t,".pdf"));case 7:case"end":return e.stop()}}),e)})));return function(a,t,l,n){return e.apply(this,arguments)}}();return m.a.createElement(m.a.Fragment,null,m.a.createElement(m.a.Fragment,null,m.a.createElement(f.Modal,{isOpen:t,onClose:function(){return n(!1)}},m.a.createElement(f.ModalHeader,null,"Are you sure you want to delete!"),m.a.createElement(f.ModalBody,null),m.a.createElement(f.ModalFooter,null,m.a.createElement(f.Button,{className:"w-full sm:w-auto",onClick:Object(c.a)(r.a.mark((function e(){var a,t,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=W[O].invItems,console.log(a),a.map(function(){var e=Object(c.a)(r.a.mark((function e(a){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={id:a._id,update:{location:W[O].from}},console.log("PAYLOAD",t),e.prev=2,e.next=5,b()({url:"".concat(v.API,"/inventory/").concat(E.a.getId(),"/invupdate"),method:"POST",data:t});case 5:console.log("Done"),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(2),console.log(e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(a){return e.apply(this,arguments)}}()),e.prev=3,e.next=6,b()({url:"".concat(v.API,"/lst/").concat(E.a.getId(),"/delete"),method:"POST",data:{id:x}});case 6:t=e.sent,console.log(t.data),l=W.filter((function(e){return e._id!=x})),X(l),n(!1),e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(3),e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,13]])})))},"Confirm Delete")))),(console.log(M),m.a.createElement(m.a.Fragment,null,m.a.createElement(f.Modal,{isOpen:D,onClose:function(){return L(!1)}},m.a.createElement(f.ModalHeader,null,"Download LST"),m.a.createElement(f.ModalBody,null,W[A]?m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"flex flex-row"},m.a.createElement("div",{className:" my-2 ml-5 mr-2 w-full"},"Docket Type:"),m.a.createElement("input",{value:W[A].DocketType,onChange:function(e){var a=Object(l.a)(W);a[A].DocketType=e.target.value,X(a)},class:"w-full mr-5 shadow-md z-20 appearance-none rounded border border-gray-400 border-b block py-1  bg-white text-sm  text-gray-700 focus:bg-white focus:placeholder-gray-600 focus:text-gray-700 focus:outline-none"})),m.a.createElement("div",{className:"flex flex-row my-2"},m.a.createElement("div",{className:"my-2 ml-5 mr-2 w-full"},"Courier Number:"),m.a.createElement("input",{value:W[A].CourierNumber,onChange:function(e){var a=Object(l.a)(W);a[A].CourierNumber=e.target.value,X(a)},class:"w-full mr-5  shadow-md z-20 appearance-none rounded border border-gray-400 border-b block py-1  bg-white text-sm  text-gray-700 focus:bg-white focus:placeholder-gray-600 focus:text-gray-700 focus:outline-none"}))):null),m.a.createElement(f.ModalFooter,null,m.a.createElement(f.Button,{className:"w-full sm:w-auto",onClick:Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:He(W[A]._id,W[A].LSTNo,W[A].CourierNumber,W[A].DocketType);case 1:case"end":return e.stop()}}),e)})))},"Download"))))),m.a.createElement("div",{className:"mb-64 mt-4"},m.a.createElement("div",{className:""},m.a.createElement("div",{class:"my-2 flex sm:flex-row flex-col items-start sm:items-center sm:justify-left h-full space-x-2 "},m.a.createElement("div",{class:"relative mx-1 "},m.a.createElement("select",{class:" shadow-md h-full rounded border block appearance-none w-full bg-white border-gray-400 text-gray-700 py-2 px-4 pr-8 leading-tight focus:outline-none   focus:bg-white focus:border-gray-500",value:ce,onChange:function(e){oe(e.target.value)}},m.a.createElement("option",{value:"",disabled:!0,selected:!0},"Status"),m.a.createElement("option",{value:""},"All"),m.a.createElement("option",{value:"In Transit"},"In Transit"),m.a.createElement("option",{value:"Received"},"Received"),m.a.createElement("option",{value:"Deleted"},"Deleted")),m.a.createElement("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},m.a.createElement("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},m.a.createElement("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})))),m.a.createElement("div",{class:"relative mx-1 "},m.a.createElement("select",{class:" shadow-md h-full rounded border block appearance-none w-full bg-white border-gray-400 text-gray-700 py-2 px-4 pr-8 leading-tight focus:outline-none   focus:bg-white focus:border-gray-500",value:ye,onChange:function(e){xe(e.target.value)}},m.a.createElement("option",{value:"",selected:!0},"LST type"),m.a.createElement("option",{value:"Normal"},"Normal"),m.a.createElement("option",{value:"CMRR"},"CMRR"),m.a.createElement("option",{value:"Customer"},"Customer")),m.a.createElement("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},m.a.createElement("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},m.a.createElement("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})))),m.a.createElement("div",{class:"relative mx-1 "},m.a.createElement("select",{class:" shadow-md h-full rounded border block appearance-none w-full bg-white border-gray-400 text-gray-700 py-2 px-4 pr-8 leading-tight focus:outline-none   focus:bg-white focus:border-gray-500",value:ue,onChange:function(e){ie(e.target.value)}},m.a.createElement("option",{value:"",disabled:!0,selected:!0},"From Location"),m.a.createElement("option",{value:""},"All"),m.a.createElement("option",{value:"Trivandrum"},"Trivandrum"),m.a.createElement("option",{value:"Kottayam"},"Kottayam"),m.a.createElement("option",{value:"Kozhikode"},"Kozhikode")),m.a.createElement("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},m.a.createElement("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},m.a.createElement("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})))),m.a.createElement("div",{class:"relative mx-1 "},m.a.createElement("select",{class:" shadow-md h-full rounded border block appearance-none w-full bg-white border-gray-400 text-gray-700 py-2 px-4 pr-8 leading-tight focus:outline-none   focus:bg-white focus:border-gray-500",value:pe,onChange:function(e){Ee(e.target.value)}},m.a.createElement("option",{value:"",disabled:!0,selected:!0},"To Location"),m.a.createElement("option",{value:""},"All"),m.a.createElement("option",{value:"Trivandrum"},"Trivandrum"),m.a.createElement("option",{value:"Kottayam"},"Kottayam"),m.a.createElement("option",{value:"Kozhikode"},"Kozhikode"),m.a.createElement("option",{value:"Vendor"},"Vendor")),m.a.createElement("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},m.a.createElement("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},m.a.createElement("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})))),m.a.createElement("div",{class:"block relative xl:ml-64"},m.a.createElement("span",{class:"h-full absolute inset-y-0 left-0 flex items-center pl-2"},m.a.createElement("svg",{viewBox:"0 0 24 24",class:"h-4 w-4 fill-current text-gray-500"},m.a.createElement("path",{d:"M10 4a6 6 0 100 12 6 6 0 000-12zm-8 6a8 8 0 1114.32 4.906l5.387 5.387a1 1 0 01-1.414 1.414l-5.387-5.387A8 8 0 012 10z"}))),m.a.createElement("form",{onSubmit:function(e){e.preventDefault(),ae(!ee)}},m.a.createElement("input",{value:Ie,onChange:function(e){return Re(e.target.value)},placeholder:"Search LST Number",class:"shadow-md z-20 appearance-none rounded border border-gray-400 border-b block pl-8 pr-6 py-2 w-full bg-white text-sm placeholder-gray-400 text-gray-700 focus:bg-white focus:placeholder-gray-600 focus:text-gray-700 focus:outline-none"}))))),m.a.createElement(f.TableContainer,{className:"mt-4"},m.a.createElement(f.Table,null,m.a.createElement(f.TableHeader,null,m.a.createElement("tr",{className:""},m.a.createElement(f.TableCell,null,"No"),m.a.createElement(f.TableCell,null,"From"),m.a.createElement(f.TableCell,null,"To"),m.a.createElement(f.TableCell,null,m.a.createElement("span",{className:""},"Date")," "),m.a.createElement(f.TableCell,null,m.a.createElement("span",{className:""},"Num")," "),m.a.createElement(f.TableCell,null," Report"),0==E.a.getRole()?m.a.createElement(f.TableCell,null," Delete"):null,m.a.createElement(f.TableCell,null,m.a.createElement("span",{className:"cursor-pointer",onClick:function(){return Ke(-1)}},"Items")))),m.a.createElement(f.TableBody,null,W.map((function(e,a){return m.a.createElement(m.a.Fragment,null,m.a.createElement(f.TableRow,{className:"hover:shadow-lg dark:hover:bg-gray-600   ".concat(Pe==e._id?"bg-blue-300 shadow-lg dark:bg-gray-600":"white"," "),key:a,onClick:function(){}},m.a.createElement(f.TableCell,{className:"w-8"},m.a.createElement("div",{className:"flex items-center text-sm "},m.a.createElement("div",null,m.a.createElement("p",{className:"font-semibold"},e.LSTNo)))),m.a.createElement(f.TableCell,{className:""},m.a.createElement("span",{className:" "},e.from)),m.a.createElement(f.TableCell,{className:"  "},m.a.createElement("span",{className:"  "},e.vendorId?e.vendorName:e.to)),m.a.createElement(f.TableCell,null,m.a.createElement("span",{className:"text-sm"}," ",i()(e.date).format("DD/MM/YYYY"))),m.a.createElement(f.TableCell,null,m.a.createElement("span",{className:"text-sm"},"Normal"==e.LSTtype||"Customer"==e.LSTtype?e.invItems.length:e.CMRRItems.length)),m.a.createElement(f.TableCell,{className:" "},m.a.createElement(f.Button,{layout:"outline","aria-label":"DropDown",onClick:function(){console.log("dwlod"),B(e),L(!0),F(a)},className:"rounded-lg m-1"},"Download")),0==E.a.getRole()||15==E.a.getRole()?m.a.createElement(f.TableCell,{className:" "},m.a.createElement(f.Button,{layout:"link",size:"icon","aria-label":"Edit"},m.a.createElement(y.b,{key:e._id,to:"/app/lst/update/".concat(e._id)},m.a.createElement(g.EditIcon,{className:"w-5 h-5 mx-2","aria-hidden":"true"}))," "),m.a.createElement(f.Button,{layout:"link",size:"icon","aria-label":"Delete",onClick:Object(c.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("delete LST"),n(!0),T(e._id),j(a);case 4:case"end":return t.stop()}}),t)})))},m.a.createElement(g.TrashIcon,{className:"w-5 h-5","aria-hidden":"true"}))):null,m.a.createElement(f.TableCell,{className:" "},m.a.createElement(f.Button,{size:"icon","aria-label":"DropDown",onClick:function(){console.log(Pe),Ke(-1!=Pe?-1:a)},className:"rounded-lg m-1"},m.a.createElement(g.DropdownIcon,{className:"w-5 h-5","aria-hidden":"true"})))),m.a.createElement(f.TableRow,{className:"hover:shadow-lg dark:hover:bg-gray-600 relative   ".concat(Pe==e._id?"bg-blue-300 shadow-lg dark:bg-gray-600":"white"," "),key:a,onClick:function(){}},m.a.createElement(f.TableCell,{className:"absolute w-full m-0"},Pe==a?function(e,a,t,l){return m.a.createElement("div",{className:" bg-gray-200 dark:bg-gray-700 p-3"},"Customer"==t?m.a.createElement("div",null,"Customer:",a):null,m.a.createElement("div",{className:"mb- mt-4"},m.a.createElement(f.TableContainer,{className:"mt-4"},m.a.createElement(f.Table,null,m.a.createElement(f.TableHeader,null,m.a.createElement("tr",null,m.a.createElement(f.TableCell,null,"Type"),m.a.createElement(f.TableCell,null,"Name"),m.a.createElement(f.TableCell,null,"Serial Number"),m.a.createElement(f.TableCell,null,"Location"),m.a.createElement(f.TableCell,null,"Inv Number"),m.a.createElement(f.TableCell,null,"Condition"))),m.a.createElement(f.TableBody,null,"Normal"==t||"Customer"==t?m.a.createElement(m.a.Fragment,null,e.map((function(e,a){return m.a.createElement(f.TableRow,{className:"hover:shadow-lg dark:hover:bg-gray-600 ".concat(Pe==e._id?"bg-blue-300 shadow-lg dark:bg-gray-600":"white"," "),key:a,onClick:function(){Ke(e._id)}},m.a.createElement(f.TableCell,{className:"w-8"},m.a.createElement("div",{className:"flex items-center text-sm "},m.a.createElement("div",null,m.a.createElement("p",{className:"font-semibold"},Object(w.capitalize)(e.type))))),m.a.createElement(f.TableCell,null,m.a.createElement("span",{className:"text-sm"},e.name)),m.a.createElement(f.TableCell,null,m.a.createElement("span",{className:"text-sm"},e.sno)),m.a.createElement(f.TableCell,null,m.a.createElement("span",{className:"text-sm"},e.location)),m.a.createElement(f.TableCell,null,m.a.createElement("span",{className:"text-sm"},e.invnumber)),m.a.createElement(f.TableCell,null,m.a.createElement(f.Badge,{type:"Good"==e.condition?"primary":"danger"},e.condition)))}))):m.a.createElement(m.a.Fragment,null,l.map((function(e,a){return m.a.createElement(f.TableRow,{className:"hover:shadow-lg dark:hover:bg-gray-600 ".concat(Pe==e._id?"bg-blue-300 shadow-lg dark:bg-gray-600":"white"," "),key:a,onClick:function(){Ke(e._id)}},m.a.createElement(f.TableCell,{className:"w-8"},m.a.createElement("div",{className:"flex items-center text-sm "},m.a.createElement("div",null,m.a.createElement("p",{className:"font-semibold"},Object(w.capitalize)(e.type))))),m.a.createElement(f.TableCell,null,m.a.createElement("span",{className:"text-sm"},e.name)),m.a.createElement(f.TableCell,null,m.a.createElement("span",{className:"text-sm"},e.sno)),m.a.createElement(f.TableCell,null,m.a.createElement("span",{className:"text-sm"},e.location)),m.a.createElement(f.TableCell,null,m.a.createElement("span",{className:"text-sm"},e.invnumber)),m.a.createElement(f.TableCell,null,m.a.createElement(f.Badge,{type:"Good"==e.condition?"primary":"danger"},e.condition)))}))))))))}(e.invItems,e.customerName,e.LSTtype,e.CMRRItems):null)))})))),m.a.createElement(f.TableFooter,null,m.a.createElement(f.Pagination,{totalResults:ze,resultsPerPage:10,label:"Table navigation",onChange:function(e){q(e)}})))))}}}]);
//# sourceMappingURL=77.dbaf9312.chunk.js.map