(this["webpackJsonpwindmill-dashboard-react"]=this["webpackJsonpwindmill-dashboard-react"]||[]).push([[78],{1223:function(e,t,a){"use strict";a.r(t);var l=a(16),n=a(5),r=a.n(n),o=a(12),c=a(3),s=a(0),m=a.n(s),u=a(20),i=a.n(u),d=a(9),b=a.n(d),p=a(207),g=a(18),f=a(36),v=a(2),E=a(10),h=(a(203),a(44),a(43));t.default=function(){var e=Object(s.useContext)(h.a),t=(e.topheading,e.setTopHeading),a=Object(s.useState)(!1),n=Object(c.a)(a,2),u=(n[0],n[1],Object(s.useState)(1)),d=Object(c.a)(u,2),w=d[0],y=d[1],x=Object(s.useState)([]),T=Object(c.a)(x,2),C=T[0],N=T[1],O=Object(s.useState)(!0),j=Object(c.a)(O,2),k=j[0],I=j[1],S=Object(s.useState)(!0),R=Object(c.a)(S,2),L=(R[0],R[1],Object(s.useState)("")),D=Object(c.a)(L,2),M=D[0],B=(D[1],Object(s.useState)("")),A=Object(c.a)(B,2),z=A[0],F=A[1],P=Object(s.useState)(""),_=Object(c.a)(P,2),K=_[0],G=_[1],H=Object(s.useState)(""),Y=Object(c.a)(H,2),V=Y[0],J=Y[1],$=Object(s.useState)("Normal"),q=Object(c.a)($,2),Q=q[0],U=q[1],W=Object(s.useState)({}),X=Object(c.a)(W,2),Z=X[0],ee=(X[1],Object(s.useState)("")),te=Object(c.a)(ee,2),ae=(te[0],te[1],Object(s.useState)("")),le=Object(c.a)(ae,2),ne=(le[0],le[1],Object(s.useState)("")),re=Object(c.a)(ne,2),oe=re[0],ce=re[1],se=Object(s.useState)(20),me=Object(c.a)(se,2),ue=me[0],ie=me[1],de=Object(s.useState)(-1),be=Object(c.a)(de,2),pe=be[0],ge=be[1],fe=Object(s.useState)(!1),ve=Object(c.a)(fe,2),Ee=ve[0],he=ve[1],we=Object(s.useState)(""),ye=Object(c.a)(we,2),xe=ye[0],Te=ye[1],Ce=Object(s.useState)(!1),Ne=Object(c.a)(Ce,2),Oe=Ne[0],je=Ne[1],ke=Object(s.useState)({}),Ie=Object(c.a)(ke,2),Se=Ie[0],Re=Ie[1],Le=Object(s.useState)(0),De=Object(c.a)(Le,2),Me=De[0],Be=De[1];Object(s.useEffect)((function(){return t("Notifications"),function(){t("")}}),[]),Object(s.useEffect)((function(){var e=g.a.getLocation();!function(){var t=Object(o.a)(r.a.mark((function t(){var a,l;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("getter called"),a={pages:{page:w,limit:10},filters:{from:z,to:K,status:"In Transit",LSTtype:Q,searchquery:oe}},"All"!=e&&(a.filters.to=e),t.prev=3,t.next=6,b()({url:"".concat(E.API,"/lst/").concat(g.a.getId(),"/getall"),method:"POST",data:a});case 6:l=t.sent,console.log(l.data.out),ie(l.data.total),N(l.data.out),t.next=15;break;case 12:throw t.prev=12,t.t0=t.catch(3),t.t0;case 15:case"end":return t.stop()}}),t,null,[[3,12]])})));return function(){return t.apply(this,arguments)}}()()}),[w,z,K,V,M,k,Q]),console.log(Z);var Ae=function(){var e=Object(o.a)(r.a.mark((function e(t,a,l,n){var o,c,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={id:t,update:{CourierNumber:l,DocketType:n}},e.next=3,b()({url:"".concat(E.API,"/lst/").concat(g.a.getId(),"/downloadpdf"),method:"POST",data:o,responseType:"blob"});case 3:c=e.sent,s=new Blob([c.data],{type:"application/pdf"}),je(!1),Object(p.saveAs)(s,"LST_".concat(a,".pdf"));case 7:case"end":return e.stop()}}),e)})));return function(t,a,l,n){return e.apply(this,arguments)}}(),ze=function(){var e=Object(o.a)(r.a.mark((function e(t,a){var l,n,o,c,s,m,u,d;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=C,n=C[t],o=n.invItems[a],console.log(n,o),c=i()().format(),s={histtype:"lst",date:c,location:n.to,callId:"Nil",assetId:"Nil",status:o.condition,note:"Item received at ".concat(n.to)},m={},"Vendor"==n.to?(s.note="Item received from ".concat(n.vendorName," back to ").concat(n.from),m={id:o._id,update:{location:n.from,sno:o.sno,condition:o.condition,$push:{history:s}}}):m={id:o._id,update:{location:n.to,status:o.condition,$push:{history:s}}},console.log("PAYLOAD",m),e.prev=9,e.next=12,b()({url:"".concat(E.API,"/inventory/").concat(g.a.getId(),"/invupdate"),method:"POST",data:m});case 12:l[t].invItems[a].location=n.to,N(l),ge(-1),ge(t),console.log("Done"),e.next=23;break;case 19:throw e.prev=19,e.t0=e.catch(9),console.log(e.t0),e.t0;case 23:if(u=!1,l[t].invItems.map((function(e){"In Transit"==e.location&&(u=!0)})),1!=u){e.next=29;break}return Te("".concat(o.name," Recieved")),he(!0),e.abrupt("return");case 29:return d={id:n._id,update:{status:"Received"}},e.prev=30,e.next=33,b()({url:"".concat(E.API,"/lst/").concat(g.a.getId(),"/update"),method:"POST",data:d});case 33:Te("".concat(o.name," Recieved.\n All Items Received from LST")),he(!0),console.log("Done"),e.next=42;break;case 38:throw e.prev=38,e.t1=e.catch(30),console.log(e.t1),e.t1;case 42:case"end":return e.stop()}}),e,null,[[9,19],[30,38]])})));return function(t,a){return e.apply(this,arguments)}}(),Fe=function(){var e=Object(o.a)(r.a.mark((function e(t,a){var l,n,o,c,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=C,n=C[t],o=n.CMRRItems[a],console.log(n,o),l[t].CMRRItems[a].location=n.to,N(l),console.log("Done",l),c=!1,l[t].CMRRItems.map((function(e){"In Transit"==e.location&&(c=!0)})),s={id:n._id,update:{CMRRItems:l[t].CMRRItems}},0==c&&(s.update.status="Received"),e.prev=11,e.next=14,b()({url:"".concat(E.API,"/lst/").concat(g.a.getId(),"/update"),method:"POST",data:s});case 14:return 1==c?(Te("".concat(o.name," Recieved")),he(!0)):(Te("".concat(o.name," Recieved.\n All Items Received from LST")),he(!0)),console.log("Done"),e.abrupt("return");case 19:throw e.prev=19,e.t0=e.catch(11),console.log(e.t0),e.t0;case 23:case"end":return e.stop()}}),e,null,[[11,19]])})));return function(t,a){return e.apply(this,arguments)}}();return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"mb-64 mt-4"},m.a.createElement("div",{className:" font-bold text-xl mt-10 dark:text-white"},"LSTs In Transit"),m.a.createElement("div",{className:""},m.a.createElement("div",{class:"my-2 flex sm:flex-row flex-col items-start sm:items-center sm:justify-left h-full space-x-2 "},m.a.createElement("div",{class:"relative mx-1 "},m.a.createElement("select",{class:" shadow-md h-full rounded border block appearance-none w-full bg-white border-gray-400 text-gray-700 py-2 px-4 pr-8 leading-tight focus:outline-none   focus:bg-white focus:border-gray-500",value:z,onChange:function(e){F(e.target.value)}},m.a.createElement("option",{value:"",disabled:!0,selected:!0},"From Location"),m.a.createElement("option",{value:""},"All"),m.a.createElement("option",{value:"Trivandrum"},"Trivandrum"),m.a.createElement("option",{value:"Kottayam"},"Kottayam"),m.a.createElement("option",{value:"Kozhikode"},"Kozhikode")),m.a.createElement("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},m.a.createElement("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},m.a.createElement("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})))),"All"==g.a.getLocation?m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{class:"relative mx-1 "},m.a.createElement("select",{class:" shadow-md h-full rounded border block appearance-none w-full bg-white border-gray-400 text-gray-700 py-2 px-4 pr-8 leading-tight focus:outline-none   focus:bg-white focus:border-gray-500",value:K,onChange:function(e){G(e.target.value)}},m.a.createElement("option",{value:"",disabled:!0,selected:!0},"To Location"),m.a.createElement("option",{value:""},"All"),m.a.createElement("option",{value:"Trivandrum"},"Trivandrum"),m.a.createElement("option",{value:"Kottayam"},"Kottayam"),m.a.createElement("option",{value:"Kozhikode"},"Kozhikode")),m.a.createElement("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},m.a.createElement("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},m.a.createElement("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"}))))):null,m.a.createElement("div",{class:"relative mx-1 "},m.a.createElement("select",{class:" shadow-md h-full rounded border block appearance-none w-full bg-white border-gray-400 text-gray-700 py-2 px-4 pr-8 leading-tight focus:outline-none   focus:bg-white focus:border-gray-500",value:Q,onChange:function(e){U(e.target.value)}},m.a.createElement("option",{value:"",selected:!0},"All"),m.a.createElement("option",{value:"Normal"},"Normal"),m.a.createElement("option",{value:"CMRR"},"CMRR"),m.a.createElement("option",{value:"Customer"},"Customer")),m.a.createElement("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},m.a.createElement("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},m.a.createElement("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})))),m.a.createElement("div",{class:"relative mx-1 "},m.a.createElement("select",{class:" shadow-md h-full rounded border block appearance-none w-full bg-white border-gray-400 text-gray-700 py-2 px-4 pr-8 leading-tight focus:outline-none   focus:bg-white focus:border-gray-500",value:V,onChange:function(e){J(e.target.value)}},m.a.createElement("option",{value:"",disabled:!0,selected:!0},"Condition"),m.a.createElement("option",{value:""},"All"),m.a.createElement("option",{value:"Good"},"Good"),m.a.createElement("option",{value:"Bad"},"Bad")),m.a.createElement("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},m.a.createElement("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},m.a.createElement("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})))),m.a.createElement("div",{class:"block relative xl:ml-64"},m.a.createElement("span",{class:"h-full absolute inset-y-0 left-0 flex items-center pl-2"},m.a.createElement("svg",{viewBox:"0 0 24 24",class:"h-4 w-4 fill-current text-gray-500"},m.a.createElement("path",{d:"M10 4a6 6 0 100 12 6 6 0 000-12zm-8 6a8 8 0 1114.32 4.906l5.387 5.387a1 1 0 01-1.414 1.414l-5.387-5.387A8 8 0 012 10z"}))),m.a.createElement("form",{onSubmit:function(e){e.preventDefault(),I(!k)}},m.a.createElement("input",{value:oe,onChange:function(e){return ce(e.target.value)},placeholder:"Search LST Number",class:"shadow-md z-20 appearance-none rounded border border-gray-400 border-b block pl-8 pr-6 py-2 w-full bg-white text-sm placeholder-gray-400 text-gray-700 focus:bg-white focus:placeholder-gray-600 focus:text-gray-700 focus:outline-none"}))))),m.a.createElement(v.TableContainer,{className:"mt-4"},m.a.createElement(v.Table,null,m.a.createElement(v.TableHeader,null,m.a.createElement("tr",{className:"flex flex-row justify-between"},m.a.createElement(v.TableCell,null,"LST.No"),m.a.createElement(v.TableCell,null,"From"),m.a.createElement(v.TableCell,null,"To"),m.a.createElement(v.TableCell,null,"Date"),m.a.createElement(v.TableCell,null,"No."),m.a.createElement(v.TableCell,null," Report"),m.a.createElement(v.TableCell,null,m.a.createElement("span",{className:"cursor-pointer",onClick:function(){return ge(-1)}},"Items")))),m.a.createElement(v.TableBody,null,C.map((function(e,t){return m.a.createElement("div",{className:"flex flex-col justify-around"},m.a.createElement(v.TableRow,{className:"hover:shadow-lg dark:hover:bg-gray-600 flex flex-row justify-between  ".concat(pe==e._id?"bg-blue-300 shadow-lg dark:bg-gray-600":"white"," "),key:t,onClick:function(){}},m.a.createElement(v.TableCell,{className:"w-8"},m.a.createElement("div",{className:"flex items-center text-sm "},m.a.createElement("div",null,m.a.createElement("p",{className:"font-semibold"},e.LSTNo)))),m.a.createElement(v.TableCell,null,m.a.createElement("span",{className:"text-sm"},e.from)),m.a.createElement(v.TableCell,null,m.a.createElement("span",{className:"text-sm"},"Vendor"==e.to?e.vendorName:e.to)),m.a.createElement(v.TableCell,null,m.a.createElement("span",{className:"text-sm"}," ",i()(e.date).format("DD/MM/YYYY"))),m.a.createElement(v.TableCell,null,m.a.createElement("span",{className:"text-sm"},"Normal"==e.LSTtype||"Customer"==e.LSTtype?e.invItems.length:e.CMRRItems.length)),m.a.createElement(v.TableCell,{className:"text-center "},m.a.createElement(v.Button,{layout:"outline","aria-label":"DropDown",onClick:function(){console.log("dwlod"),Re(e),je(!0),Be(t)},className:"rounded-lg m-1"},"Download")),m.a.createElement(v.TableCell,{className:"text-center "},m.a.createElement(v.Button,{size:"icon","aria-label":"DropDown",onClick:function(){console.log(pe),console.log(t),ge(pe==t?-1:t)},className:"rounded-lg m-1"},m.a.createElement(f.DropdownIcon,{className:"w-5 h-5","aria-hidden":"true"})))),pe==t?function(e,t){var a=C[e].invItems,n=C[e].LSTtype;C[e].CMRRItems;return console.log("TO",a.to),m.a.createElement("div",{className:" bg-gray-200 dark:bg-gray-700 p-3"},m.a.createElement("div",{className:"mb- mt-4"},m.a.createElement(v.TableContainer,{className:"mt-4"},m.a.createElement(v.Table,null,m.a.createElement(v.TableHeader,null,m.a.createElement("tr",null,m.a.createElement(v.TableCell,null,"Category"),m.a.createElement(v.TableCell,null,"Description"),m.a.createElement(v.TableCell,null,"Serial Number"),m.a.createElement(v.TableCell,null,"Location"),m.a.createElement(v.TableCell,null,"Inv Number"),m.a.createElement(v.TableCell,null,"Condition"),m.a.createElement(v.TableCell,null,"Receive"))),m.a.createElement(v.TableBody,null,"Normal"==n||"Customer"==n?m.a.createElement(m.a.Fragment,null,C[e].invItems.map((function(t,a){return m.a.createElement(v.TableRow,{className:"hover:shadow-lg dark:hover:bg-gray-600 ".concat(pe==t._id?"bg-blue-300 shadow-lg dark:bg-gray-600":"white"," "),key:a,onClick:function(){ge(t._id)}},m.a.createElement(v.TableCell,{className:"w-8"},m.a.createElement("div",{className:"flex items-center text-sm "},m.a.createElement("div",null,m.a.createElement("p",{className:"font-semibold"},t.type)))),m.a.createElement(v.TableCell,null,m.a.createElement("span",{className:"text-sm"},t.name)),m.a.createElement(v.TableCell,null,"Vendor"==C[e].to&&"In Transit"==t.location?m.a.createElement("span",{className:"text-sm"},m.a.createElement("input",{value:t.sno,onChange:function(a){var n=C,r=C[e].invItems;r=r.filter((function(e){return e._id!=t._id||(console.log("here",a.target.value,e.name),e.sno=a.target.value),e})),n[e].invItems=r,console.log(n),N(Object(l.a)(n))},placeholder:"Cse Id.",class:"shadow-md z-20 appearance-none rounded border border-gray-400 border-b block pl-1 pr-1 py-1 w-full bg-white text-sm placeholder-gray-400 text-gray-700 focus:bg-white focus:placeholder-gray-600 focus:text-gray-700 focus:outline-none"})):t.sno),m.a.createElement(v.TableCell,null,m.a.createElement("span",{className:"text-sm"},t.location)),m.a.createElement(v.TableCell,null,m.a.createElement("span",{className:"text-sm"},t.invnumber)),m.a.createElement(v.TableCell,null,"Vendor"==C[e].to&&"In Transit"==t.location?m.a.createElement(v.Select,{value:t.condition,className:"mt-1",onChange:function(a){var n=C,r=C[e].invItems;r=r.filter((function(e){return e._id!=t._id||(console.log("here",a.target.value,e.name),e.condition=a.target.value),e})),n[e].invItems=r,console.log(n),N(Object(l.a)(n))}},m.a.createElement("option",{value:"Good"}," Good"),m.a.createElement("option",{value:"Bad"},"Bad"),m.a.createElement("option",{value:"DOA"},"DOA"),"z"):m.a.createElement(v.Badge,{type:"Good"==t.condition?"primary":"danger"},t.condition)),m.a.createElement(v.TableCell,null,m.a.createElement(v.Button,{layout:"outline",className:"dark:border-green-700 border-green-400",onClick:function(){"In Transit"==t.location?ze(e,a):(Te("Already Received"),he(!0))}},"In Transit"==t.location?m.a.createElement(m.a.Fragment,null,"Receive"):m.a.createElement(m.a.Fragment,null,"Received"))))}))):m.a.createElement(m.a.Fragment,null,C[e].CMRRItems.map((function(t,a){return m.a.createElement(v.TableRow,{key:a,onClick:function(){}},m.a.createElement(v.TableCell,{className:"w-8"},m.a.createElement("div",{className:"flex items-center text-sm "},m.a.createElement("div",null,m.a.createElement("p",{className:"font-semibold"},t.type)))),m.a.createElement(v.TableCell,null,m.a.createElement("span",{className:"text-sm"},t.name)),m.a.createElement(v.TableCell,null,t.sno),m.a.createElement(v.TableCell,null,m.a.createElement("span",{className:"text-sm"},t.location)),m.a.createElement(v.TableCell,null,m.a.createElement("span",{className:"text-sm"},t.invnumber)),m.a.createElement(v.TableCell,null,m.a.createElement(v.Badge,{type:"Good"==t.condition?"primary":"danger"},t.condition)),m.a.createElement(v.TableCell,null,m.a.createElement(v.Button,{layout:"outline",className:"dark:border-green-700 border-green-400",onClick:function(){"In Transit"==t.location?Fe(e,a):(Te("Already Received"),he(!0))}},"In Transit"==t.location?m.a.createElement(m.a.Fragment,null,"Receive"):m.a.createElement(m.a.Fragment,null,"Received"))))}))))))))}(t,e.to):null)})))),m.a.createElement(v.TableFooter,null,m.a.createElement(v.Pagination,{totalResults:ue,resultsPerPage:10,label:"Table navigation",onChange:function(e){y(e)}})))),(console.log(Se),m.a.createElement(m.a.Fragment,null,m.a.createElement(v.Modal,{isOpen:Oe,onClose:function(){return je(!1)}},m.a.createElement(v.ModalHeader,null,"Download LST"),m.a.createElement(v.ModalBody,null,C[Me]?m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"flex flex-row"},m.a.createElement("div",{className:" my-2 ml-5 mr-2 w-full"},"Docket Type:"),m.a.createElement("input",{value:C[Me].DocketType,onChange:function(e){var t=Object(l.a)(C);t[Me].DocketType=e.target.value,N(t)},class:"w-full mr-5 shadow-md z-20 appearance-none rounded border border-gray-400 border-b block py-1  bg-white text-sm  text-gray-700 focus:bg-white focus:placeholder-gray-600 focus:text-gray-700 focus:outline-none"})),m.a.createElement("div",{className:"flex flex-row my-2"},m.a.createElement("div",{className:"my-2 ml-5 mr-2 w-full"},"Courier Number:"),m.a.createElement("input",{value:C[Me].CourierNumber,onChange:function(e){var t=Object(l.a)(C);t[Me].CourierNumber=e.target.value,N(t)},class:"w-full mr-5  shadow-md z-20 appearance-none rounded border border-gray-400 border-b block py-1  bg-white text-sm  text-gray-700 focus:bg-white focus:placeholder-gray-600 focus:text-gray-700 focus:outline-none"}))):null),m.a.createElement(v.ModalFooter,null,m.a.createElement(v.Button,{className:"w-full sm:w-auto",onClick:Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ae(C[Me]._id,C[Me].LSTNo,C[Me].CourierNumber,C[Me].DocketType);case 1:case"end":return e.stop()}}),e)})))},"Download"))))),m.a.createElement(m.a.Fragment,null,m.a.createElement(v.Modal,{isOpen:Ee,onClose:function(){return he(!1)}},m.a.createElement(v.ModalHeader,null,xe),m.a.createElement(v.ModalBody,null),m.a.createElement(v.ModalFooter,null,m.a.createElement(v.Button,{className:"w-full sm:w-auto",onClick:function(){return he(!1)}},"Okay!")))))}}}]);
//# sourceMappingURL=78.3092f753.chunk.js.map