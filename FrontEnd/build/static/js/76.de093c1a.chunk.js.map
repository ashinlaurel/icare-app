{"version":3,"sources":["pages/Inventory/PurchaseHistory.js"],"names":["PurchaseHistory","useContext","TopBarContext","setTopHeading","topheading","useState","page","setPage","data","setData","refresh","setRefresh","type","setType","stocktype","location","setLocation","ToLocation","condition","selectedprod","searchquery","setSearchQuery","vendorsearchquery","setVendorSearchQuery","totalResults","setTotalResults","activeRowID","setActiveRowID","useEffect","a","console","log","payload","pages","limit","filters","systype","axios","url","API","Emp","getId","method","response","out","total","downloadInv","csv","array","map","invoice","tcount","invnumber","moment","invdate","format","purchlocation","invtype","invItems","i","tt","capitalize","name","sno","wty","expirydate","purchtype","vendor","rate","taxcategory","Number","nettax","toFixed","amount","tcs","invamount","csvData","Blob","saveAs","className","class","value","onChange","e","target","disabled","selected","xmlns","viewBox","d","onSubmit","preventDefault","placeholder","onClick","layout","user","_id","key","length","size","aria-label","aria-hidden","items","resultsPerPage","label","p"],"mappings":"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","file":"static/js/76.de093c1a.chunk.js","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport moment from \"moment\";\nimport axios from \"axios\";\nimport { saveAs } from \"file-saver\";\n\nimport Emp from \"../../helpers/auth/EmpProfile\";\nimport { EditIcon, TrashIcon, DropdownIcon } from \"../../icons\";\nimport { Modal, ModalHeader, ModalBody, ModalFooter } from \"@windmill/react-ui\";\n\nimport {\n  TableBody,\n  TableContainer,\n  Table,\n  Button,\n  TableHeader,\n  TableCell,\n  TableRow,\n  TableFooter,\n  Avatar,\n  Badge,\n  Pagination,\n  Dropdown,\n  DropdownItem,\n} from \"@windmill/react-ui\";\n\nimport { API } from \"../../backendapi\";\nimport CustomerSelection from \"../../components/Modal/AssetFilters/CustomerSelection\";\nimport { BottomBarContext } from \"../../context/BottomBarContext\";\nimport { Link } from \"react-router-dom\";\nimport { TopBarContext } from \"../../context/TopBarContext\";\nimport { capitalize } from \"../../helpers/toolfuctions/toolfunctions\";\n// import PrintLST from \"./PrintLST\";\n\nfunction PurchaseHistory() {\n  // table variable styles\n\n  const { topheading, setTopHeading } = useContext(TopBarContext);\n\n  const [floatbox, setFloatBox] = useState(false);\n  const [page, setPage] = useState(1);\n  const [data, setData] = useState([]);\n  // dropdown and modals\n\n  const [refresh, setRefresh] = useState(true);\n  const [disabler, setDisabler] = useState(true);\n\n  // filterhooks\n  const [type, setType] = useState(\"\");\n  const [stocktype, setStocktype] = useState(\"\");\n  const [location, setLocation] = useState(\"\");\n  const [ToLocation, setToLocation] = useState(\"\");\n  const [condition, setCondition] = useState(\"\");\n\n  // Selected Prod for the bottom bar----------\n  const [selectedprod, setSelectedProd] = useState({});\n\n  // search\n  const [searchtype, setSearchType] = useState(\"\");\n  const [searchlabel, setSearchLabel] = useState(\"\");\n  const [searchquery, setSearchQuery] = useState(\"\");\n  const [vendorsearchquery, setVendorSearchQuery] = useState(\"\");\n\n  // Getting data states\n\n  // pagination setup\n  const resultsPerPage = 10;\n  const [totalResults, setTotalResults] = useState(20);\n\n  const [activeRowID, setActiveRowID] = useState(-1);\n\n  // pagination change control\n  function onPageChange(p) {\n    setPage(p);\n  }\n\n  // on page change, load new sliced data\n  // here you would make another server request for new data\n\n  // -------------------------------\n  // ----------------------Heading Use Effect-------------\n  useEffect(() => {\n    setTopHeading(\"Purchase History\");\n    return () => {\n      setTopHeading(\"\");\n    };\n  }, []);\n  // -----------------------------------------------------\n\n  useEffect(() => {\n    // Using an IIFE\n    (async function thegetter() {\n      console.log(\"getter called\");\n      let payload = {\n        pages: {\n          page: page,\n          limit: resultsPerPage,\n        },\n        filters: {\n          systype: type,\n          location: location,\n          ////////////////\n          searchquery: searchquery,\n          vendorsearchquery: vendorsearchquery,\n          stocktype: stocktype,\n        },\n      };\n      // console.log(`${API}/asset/${Emp.getId()}/getall`);\n\n      try {\n        let response = await axios({\n          url: `${API}/inventory/${Emp.getId()}/getallhistory`,\n          method: \"POST\",\n          data: payload,\n        });\n        console.log(response.data.out);\n        setTotalResults(response.data.total);\n        // const { total, data } = response.data;\n        // console.log(data + \"Now\");\n\n        setData(response.data.out);\n      } catch (error) {\n        throw error;\n      }\n    })();\n    // setData(response.slice((page - 1) * resultsPerPage, page * resultsPerPage));\n  }, [page, location, ToLocation, condition, type, refresh, stocktype]);\n\n  console.log(selectedprod);\n\n  const downloadInv = async () => {\n    let csv =\n      \"Sl No,Stock Location,Stock Type,Sys-Type,Category,Description,Serial Number,Warranty,WTY Expiry Date,Status,Purc.Type,Purc Location,Inv.Type,Vendor,Inv No,Inv Date,Rate,Tax Category,GST,Amount,TCS,Net Amount\\n\";\n\n    let array;\n    let payload = {\n      pages: {\n        page: 1,\n        limit: 10000000000,\n      },\n      filters: {\n        systype: type,\n        location: location,\n        searchquery: searchquery,\n        vendorsearchquery: vendorsearchquery,\n        stocktype: stocktype,\n      },\n    };\n    try {\n      let response = await axios({\n        url: `${API}/inventory/${Emp.getId()}/getallhistory`,\n        method: \"POST\",\n        data: payload,\n      });\n      console.log(response.data.out);\n      array = response.data.out;\n      // return response.data;\n    } catch (error) {\n      throw error;\n    }\n    array.map((invoice, tcount) => {\n      csv =\n        csv +\n        `Invoice No: ${invoice.invnumber},Date: ${moment(\n          invoice.invdate\n        ).format(\"DD-MM-YYYY\")},Inv Location: ${\n          invoice.location\n        },Purchase Type: ${invoice.purchlocation},Inv Type: ${\n          invoice.invtype\n        }\\n`;\n\n      // \"Sl No,Stock Location,Stock Type,Sys-Type,Category,Description,Serial Number,Warranty,WTY Expiry Date,Status,\n      // Purc.Type,Purc Location,Inv.Type,Vendor,Inv No,Inv Date,Rate,Tax Category,Net Tax,Amount,TCS,Net Amount\\n\";\n\n      invoice.invItems.map((i, tt) => {\n        csv =\n          csv +\n          `\"${tt + 1}\",\"${i.location}\",\"${capitalize(\n            i.stocktype\n          )}\",\"${capitalize(i.systype)}\",\"${capitalize(i.type)}\",\"${i.name}\",\"${\n            i.sno\n          }\",\"${i.wty}\",\"${i.expirydate}\",\"${i.condition}\",\"${i.purchtype}\",\"${\n            i.purchlocation\n          }\",\"${i.invtype}\",\"${i.vendor}\",\"${invoice.invnumber}\",\"${moment(\n            invoice.invdate\n          ).format(\"DD-MM-YYYY\")}\",\"${i.rate}\",\"${i.taxcategory}\",\"${Number(\n            i.nettax\n          ).toFixed(2)}\",\"${i.amount}\",\"${Number(i.tcs).toFixed(2)}\",\"${Number(\n            i.invamount\n          ).toFixed(2)}\",\\n`;\n      });\n    });\n    // console.log(csv);\n    const csvData = new Blob([csv], { type: \"text/csv;charset=utf-8;\" });\n    saveAs(csvData, \"Inventory.csv\");\n  };\n\n  const InvTable = (items) => {\n    return (\n      <div className=\" bg-gray-200 dark:bg-gray-700 p-3 \">\n        <div className=\"mb- mt-4\">\n          {/* ----------------------------------------------Table----------------------------------------------------- */}\n          <TableContainer className=\"mt-4\">\n            <Table>\n              <TableHeader>\n                <tr>\n                  <TableCell>Category</TableCell>\n                  <TableCell>Description</TableCell>\n                  <TableCell>Serial Number</TableCell>\n                  <TableCell>Location</TableCell>\n                  <TableCell>Invoice Number</TableCell>\n                  <TableCell>Inv Date</TableCell>\n                  <TableCell>Wty Expiry</TableCell>\n                  <TableCell>Status</TableCell>\n                </tr>\n              </TableHeader>\n              <TableBody>\n                {items.map((user, i) => (\n                  <TableRow\n                    className={`hover:shadow-lg dark:hover:bg-gray-600 ${\n                      activeRowID == user._id\n                        ? \"bg-blue-300 shadow-lg dark:bg-gray-600\"\n                        : \"white\"\n                    } `}\n                    key={i}\n                    onClick={() => {\n                      setActiveRowID(user._id);\n                      // console.log(\"the id is \" + user._id);\n                      // setSelectedProd(user);\n                      // setAssetDetails(user);\n                      // console.log(user.product.keyboard[0].keyboardname);\n                    }}\n                  >\n                    <TableCell className=\"w-8\">\n                      <div className=\"flex items-center text-sm \">\n                        {/* <Avatar\n                        className=\"hidden ml-2 mr-3 md:block\"\n                        src=\"https://s3.amazonaws.com/uifaces/faces/twitter/suribbles/128.jpg\"\n                        alt=\"User image\"\n                      /> */}\n                        <div>\n                          <p className=\"font-semibold\">{user.type}</p>\n                          {/* <p className=\"text-xs text-gray-600 dark:text-gray-400\">\n                          {user.accountName}\n                        </p> */}\n                        </div>\n                      </div>\n                    </TableCell>\n                    <TableCell>\n                      <span className=\"text-sm\">{user.name}</span>\n                    </TableCell>\n\n                    <TableCell>\n                      <span className=\"text-sm\">{user.sno}</span>\n                    </TableCell>\n                    <TableCell>\n                      <span className=\"text-sm\">{user.location}</span>\n                    </TableCell>\n                    <TableCell>\n                      <span className=\"text-sm\">{user.invnumber}</span>\n                    </TableCell>\n                    <TableCell>\n                      <span className=\"text-sm\">\n                        {moment(user.invdate).format(\"DD/MM/YY\")}\n                      </span>\n                    </TableCell>\n                    <TableCell>\n                      {/* <span className=\"text-sm\">{moment(user.expirydate).format(\"DD/MM/YY\")}</span> */}\n                      <span className=\"text-sm\">{user.expirydate}</span>\n                    </TableCell>\n\n                    <TableCell>\n                      <Badge\n                        type={user.condition == \"Good\" ? \"primary\" : \"danger\"}\n                      >\n                        {user.condition}\n                      </Badge>\n                    </TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </TableContainer>\n\n          {/* ----------------------------------------------Table----------------------------------------------------- */}\n        </div>\n\n        {/* ------------------------------------Bottom Bar---------------------------------- */}\n      </div>\n    );\n  };\n\n  return (\n    <>\n      <div className=\"mb-64 mt-4\">\n        {/* ------------------------------------------Filters----------------------------------------------------------------------------  */}\n        <div className=\"\">\n          {/* -------------------------------------Row 1 ------------------------------------------------------------------------------- */}\n          <div class=\"my-2 flex sm:flex-row flex-col items-start sm:items-center sm:justify-left h-full space-x-2 \">\n            <div class=\"relative mx-1 \">\n              <select\n                class=\" shadow-md h-full rounded border block appearance-none w-full bg-white border-gray-400 text-gray-700 py-2 px-4 pr-8 leading-tight focus:outline-none   focus:bg-white focus:border-gray-500\"\n                value={type}\n                onChange={(e) => {\n                  setType(e.target.value);\n                }}\n              >\n                <option value=\"\" disabled selected>\n                  Type\n                </option>\n                <option value=\"\">All</option>\n                <option value=\"item\">Item</option>\n                <option value=\"full system\">Full System</option>\n              </select>\n\n              <div class=\"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700\">\n                <svg\n                  class=\"fill-current h-4 w-4\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  viewBox=\"0 0 20 20\"\n                >\n                  <path d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\" />\n                </svg>\n              </div>\n            </div>\n\n            {/* -----------------------------------------Location ----------------------- */}\n            <div class=\"relative mx-1 \">\n              <select\n                class=\" shadow-md h-full rounded border block appearance-none w-full bg-white border-gray-400 text-gray-700 py-2 px-4 pr-8 leading-tight focus:outline-none   focus:bg-white focus:border-gray-500\"\n                value={location}\n                onChange={(e) => {\n                  setLocation(e.target.value);\n                }}\n              >\n                <option value=\"\" disabled selected>\n                  Location\n                </option>\n                <option value=\"\">All</option>\n                <option value=\"Trivandrum\">Trivandrum</option>\n                <option value=\"Kottayam\">Kottayam</option>\n                <option value=\"Kozhikode\">Kozhikode</option>\n              </select>\n\n              <div class=\"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700\">\n                <svg\n                  class=\"fill-current h-4 w-4\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  viewBox=\"0 0 20 20\"\n                >\n                  <path d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\" />\n                </svg>\n              </div>\n            </div>\n\n            {/* -----------------Search Bar------------------------------------ */}\n            <div class=\"block relative xl:ml-64\">\n              <span class=\"h-full absolute inset-y-0 left-0 flex items-center pl-2\">\n                <svg\n                  viewBox=\"0 0 24 24\"\n                  class=\"h-4 w-4 fill-current text-gray-500\"\n                >\n                  <path d=\"M10 4a6 6 0 100 12 6 6 0 000-12zm-8 6a8 8 0 1114.32 4.906l5.387 5.387a1 1 0 01-1.414 1.414l-5.387-5.387A8 8 0 012 10z\"></path>\n                </svg>\n              </span>\n              <form\n                onSubmit={(e) => {\n                  e.preventDefault();\n                  setRefresh(!refresh);\n                }}\n              >\n                <input\n                  value={searchquery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  placeholder=\"Search Invoice Number\"\n                  class=\"shadow-md z-20 appearance-none rounded border border-gray-400 border-b block pl-8 pr-6 py-2 w-full bg-white text-sm placeholder-gray-400 text-gray-700 focus:bg-white focus:placeholder-gray-600 focus:text-gray-700 focus:outline-none\"\n                />\n              </form>\n            </div>\n\n            {/* -----------------Search Bar------------------------------------ */}\n            <div class=\"block relative xl:ml-64\">\n              <span class=\"h-full absolute inset-y-0 left-0 flex items-center pl-2\">\n                <svg\n                  viewBox=\"0 0 24 24\"\n                  class=\"h-4 w-4 fill-current text-gray-500\"\n                >\n                  <path d=\"M10 4a6 6 0 100 12 6 6 0 000-12zm-8 6a8 8 0 1114.32 4.906l5.387 5.387a1 1 0 01-1.414 1.414l-5.387-5.387A8 8 0 012 10z\"></path>\n                </svg>\n              </span>\n              <form\n                onSubmit={(e) => {\n                  e.preventDefault();\n                  setRefresh(!refresh);\n                }}\n              >\n                <input\n                  value={vendorsearchquery}\n                  onChange={(e) => setVendorSearchQuery(e.target.value)}\n                  placeholder=\"Search Vendor\"\n                  class=\"shadow-md z-20 appearance-none rounded border border-gray-400 border-b block pl-8 pr-6 py-2 w-full bg-white text-sm placeholder-gray-400 text-gray-700 focus:bg-white focus:placeholder-gray-600 focus:text-gray-700 focus:outline-none\"\n                />\n              </form>\n            </div>\n\n            <div className=\"flex justify-end items-end \">\n              <Button\n                onClick={() => {\n                  downloadInv();\n                  // console.log(\"export\");\n                }}\n                layout=\"outline\"\n              >\n                Export\n              </Button>\n            </div>\n            <div className=\"flex justify-end items-end \">\n              <Button\n                onClick={async () => {\n                  // console.log(\"export\");\n                  let payload = {};\n                  try {\n                    let response = await axios({\n                      url: `${API}/inventory/${Emp.getId()}/fixpurch`,\n                      method: \"POST\",\n                      data: payload,\n                    });\n                    console.log(response.data.out);\n\n                    // return response.data;\n                  } catch (error) {\n                    throw error;\n                  }\n                }}\n                layout=\"outline\"\n              >\n                Fix Inventory\n              </Button>\n            </div>\n          </div>\n        </div>\n        {/* ----------------------------------------------Table----------------------------------------------------- */}\n        <TableContainer className=\"mt-4\">\n          <Table>\n            <TableHeader>\n              <tr className=\"flex flex-row justify-between\">\n                <TableCell> Type</TableCell>\n                <TableCell>Vendor</TableCell>\n                <TableCell>Inventory No.</TableCell>\n                <TableCell>Date</TableCell>\n                <TableCell>Location</TableCell>\n                <TableCell>No.Items</TableCell>\n\n                <TableCell>\n                  <span\n                    className=\"cursor-pointer\"\n                    onClick={() => setActiveRowID(-1)}\n                  >\n                    Items\n                  </span>\n                </TableCell>\n              </tr>\n            </TableHeader>\n            <TableBody>\n              {data.map((user, i) => (\n                <div className=\"flex flex-col justify-around\">\n                  <TableRow\n                    className={`hover:shadow-lg dark:hover:bg-gray-600 flex flex-row justify-between  ${\n                      activeRowID == user._id\n                        ? \"bg-blue-300 shadow-lg dark:bg-gray-600\"\n                        : \"white\"\n                    } `}\n                    key={i}\n                    onClick={() => {\n                      // setActiveRowID(i);\n                      // console.log(\"the id is \" + user._id);\n                      // setSelectedProd(user);\n                      // setAssetDetails(user);\n                      // console.log(user.product.keyboard[0].keyboardname);\n                    }}\n                  >\n                    <TableCell className=\"w-8\">\n                      <div className=\"flex items-center text-sm \">\n                        <div>\n                          <p className=\"font-semibold\">{user.purchtype}</p>\n                        </div>\n                      </div>\n                    </TableCell>\n                    <TableCell>\n                      <span className=\"text-sm\">{user.vendor}</span>\n                    </TableCell>\n\n                    <TableCell>\n                      <span className=\"text-sm\">{user.invnumber}</span>\n                    </TableCell>\n                    <TableCell>\n                      <span className=\"text-sm\">\n                        {\" \"}\n                        {moment(user.invdate).format(\"DD/MM/YYYY\")}\n                      </span>\n                    </TableCell>\n                    <TableCell>\n                      <span className=\"text-sm\">{user.location}</span>\n                    </TableCell>\n                    <TableCell>\n                      <span className=\"text-sm\">{user.invItems.length}</span>\n                    </TableCell>\n                    {/* <TableCell>\n                    <Badge>\n                      condition\n                    </Badge>\n                  </TableCell> */}\n\n                    <TableCell className=\"text-center \">\n                      <Button\n                        // layout=\"link\"\n                        size=\"icon\"\n                        aria-label=\"DropDown\"\n                        onClick={\n                          () => {\n                            console.log(activeRowID);\n                            if (activeRowID == i) {\n                              setActiveRowID(-1);\n                            } else setActiveRowID(i);\n                          }\n                          // console.log(ac)\n                        }\n                        className=\"rounded-lg m-1\"\n                      >\n                        <DropdownIcon className=\"w-5 h-5\" aria-hidden=\"true\" />\n                      </Button>\n                    </TableCell>\n                  </TableRow>\n\n                  {activeRowID == i ? InvTable(user.invItems) : null}\n                </div>\n              ))}\n            </TableBody>\n          </Table>\n          <TableFooter>\n            <Pagination\n              totalResults={totalResults}\n              resultsPerPage={resultsPerPage}\n              label=\"Table navigation\"\n              onChange={onPageChange}\n            />\n          </TableFooter>\n        </TableContainer>\n\n        {/* ----------------------------------------------Table----------------------------------------------------- */}\n      </div>\n\n      {/* ------------------------------------Bottom Bar---------------------------------- */}\n    </>\n  );\n}\n\nexport default PurchaseHistory;\n"],"sourceRoot":""}