(this["webpackJsonpwindmill-dashboard-react"]=this["webpackJsonpwindmill-dashboard-react"]||[]).push([[80],{1300:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return h}));var n=t(16),r=t(1103),l=t(5),c=t.n(l),s=t(12),o=t(3),i=t(2),m=t(192),u=t(194),d=t(0),f=t.n(d),p=t(36),E=t(18),b=t(9).default,v=t(10).API,g=t(1104);function h(){var e=Object(d.useState)([""]),a=Object(o.a)(e,2),t=a[0],l=a[1],h=Object(d.useState)(0),x=Object(o.a)(h,2),k=x[0],w=x[1];Object(d.useEffect)((function(){!function(){var e=Object(s.a)(c.a.mark((function e(){var a,t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b({url:"".concat(v,"/settings/").concat(E.a.getId(),"/getReportsEmails")});case 3:a=e.sent,(t=a.data.emails)&&l(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Error occured in useEffect while trying to getReportsEmails: ",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()()}),[]);return f.a.createElement(f.a.Fragment,null,f.a.createElement(f.a.Fragment,null,f.a.createElement(i.Modal,{isOpen:0!==k,onClose:function(){return w(0)}},f.a.createElement(i.ModalHeader,null,1===k?"Successfully Updated Emails":"Error occured while updating emails. Try Again"),f.a.createElement(i.ModalBody,null),f.a.createElement(i.ModalFooter,null,f.a.createElement(i.Button,{className:"w-full sm:w-auto",onClick:function(){return w(0)}},"Okay!")))),f.a.createElement("div",{className:""},f.a.createElement(m.a,null,"Settings"),0===E.a.getRole()&&f.a.createElement(f.a.Fragment,null,f.a.createElement(u.a,null,"Reports Emails"),f.a.createElement(f.a.Fragment,null,f.a.createElement("form",{onSubmit:function(){var e=Object(s.a)(c.a.mark((function e(a){var n,l,s,o,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),n=Object(r.a)(t),e.prev=2,n.s();case 4:if((l=n.n()).done){e.next=11;break}if(s=l.value,g.isEmail(s)){e.next=9;break}return w(2),e.abrupt("return");case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),n.e(e.t0);case 16:return e.prev=16,n.f(),e.finish(16);case 19:return o=E.a.getId(),e.prev=20,e.next=23,b({url:"".concat(v,"/settings/").concat(E.a.getId(),"/setReportsEmails"),method:"POST",data:{emails:t,empId:o}});case 23:if(!(i=e.sent).error){e.next=26;break}throw i.error;case 26:w(1),console.log("Updated Emails in DB"),e.next=34;break;case 30:e.prev=30,e.t1=e.catch(20),w(2),console.log("Error occured while setting emails from settings to mongoDb: ",e.t1);case 34:case"end":return e.stop()}}),e,null,[[2,13,16,19],[20,30]])})));return function(a){return e.apply(this,arguments)}}()},f.a.createElement("div",{className:"flex flex-row items-center"},f.a.createElement(i.Label,{className:"font-bold"},f.a.createElement("span",null,"Emails")),f.a.createElement("div",{className:"ml-3"},f.a.createElement(i.Button,{onClick:function(){var e=[].concat(Object(n.a)(t),[""]);l(e)},icon:p.Add,layout:"link","aria-label":"Like"})),f.a.createElement("div",{className:"ml-3"},f.a.createElement(i.Button,{onClick:function(){var e=Object(n.a)(t);e.length>1&&(e.pop(),l(e))},icon:p.Remove,layout:"link","aria-label":"Like"}))),f.a.createElement("hr",{className:"mb-2 mt-4"}),f.a.createElement("div",{className:"flex flex-wrap "},t.map((function(e,a){return f.a.createElement("div",{key:a,className:"w-1/3 px-4 py-2 "},f.a.createElement("div",{className:"flex flex-col lg:flex-row items-center justify-start lg:space-x-8"},f.a.createElement(i.Label,{className:"w-full my-1"},f.a.createElement("span",null,"Email ",a+1),f.a.createElement(i.Input,{className:"mt-1 border ".concat(g.isEmail(e)?"":"border-red-700 dark:border-red-400"),placeholder:"Email ".concat(a+1),name:"email",value:e,onChange:function(e){var r=Object(n.a)(t);r[a]=e.target.value,l(r)}}))))}))),f.a.createElement("div",{className:"flex items-center justify-center my-10"},f.a.createElement(i.Button,{type:"submit"},"Submit"))))),f.a.createElement("div",{className:"grid gap-8 my-8 md:grid-cols-2 xl:grid-cols-4"})))}}}]);
//# sourceMappingURL=80.eddf87a4.chunk.js.map