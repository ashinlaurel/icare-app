(this["webpackJsonpwindmill-dashboard-react"]=this["webpackJsonpwindmill-dashboard-react"]||[]).push([[76],{1210:function(e,t,a){"use strict";a.r(t);var l=a(5),n=a.n(l),c=a(12),r=a(3),o=a(0),s=a.n(o),m=a(20),u=a.n(m),i=a(9),b=a.n(i),d=a(207),p=a(18),E=(a(36),a(2)),v=a(10),y=(a(202),a(44),a(43)),g=a(37);t.default=function(){var e=Object(o.useContext)(y.a),t=(e.topheading,e.setTopHeading),a=Object(o.useState)(!1),l=Object(r.a)(a,2),m=(l[0],l[1],Object(o.useState)(1)),i=Object(r.a)(m,2),f=i[0],h=i[1],x=Object(o.useState)([]),w=Object(r.a)(x,2),T=w[0],j=w[1],O=Object(o.useState)(!0),C=Object(r.a)(O,2),N=C[0],S=C[1],k=Object(o.useState)(!0),I=Object(r.a)(k,2),D=(I[0],I[1],Object(o.useState)("")),M=Object(r.a)(D,2),Y=M[0],z=M[1],P=Object(o.useState)(""),B=Object(r.a)(P,2),L=B[0],A=(B[1],Object(o.useState)("")),F=Object(r.a)(A,2),H=F[0],q=F[1],K=Object(o.useState)(""),R=Object(r.a)(K,2),V=R[0],W=(R[1],Object(o.useState)("")),_=Object(r.a)(W,2),G=_[0],J=(_[1],Object(o.useState)({})),Q=Object(r.a)(J,2),U=Q[0],X=(Q[1],Object(o.useState)([])),Z=Object(r.a)(X,2),$=Z[0],ee=Z[1],te=Object(o.useState)(!1),ae=Object(r.a)(te,2),le=ae[0],ne=ae[1],ce=Object(o.useState)(""),re=Object(r.a)(ce,2),oe=(re[0],re[1],Object(o.useState)("")),se=Object(r.a)(oe,2),me=(se[0],se[1],Object(o.useState)("")),ue=Object(r.a)(me,2),ie=ue[0],be=ue[1],de=Object(o.useState)(""),pe=Object(r.a)(de,2),Ee=pe[0],ve=pe[1],ye=Object(o.useState)(20),ge=Object(r.a)(ye,2),fe=ge[0],he=ge[1],xe=Object(o.useState)(-1),we=Object(r.a)(xe,2),Te=we[0],je=we[1];Object(o.useEffect)((function(){return t("Purchase History"),function(){t("")}}),[]),Object(o.useEffect)((function(){!function(){var e=Object(c.a)(n.a.mark((function e(){var t,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getter called"),t={pages:{page:f,limit:10},filters:{systype:Y,location:H,searchquery:ie,vendorsearchquery:Ee,stocktype:L}},e.prev=2,e.next=5,b()({url:"".concat(v.API,"/inventory/").concat(p.a.getId(),"/getallhistory"),method:"POST",data:t});case 5:a=e.sent,console.log(a.data.out),he(a.data.total),j(a.data.out),e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(2),e.t0;case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}()()}),[f,H,V,G,Y,N,L]),console.log(U);var Oe=function(){var e=Object(c.a)(n.a.mark((function e(){var t,a,l,c,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="Sl No,Stock Location,Stock Type,Sys-Type,Category,Description,Serial Number,Warranty,WTY Expiry Date,Status,Purc.Type,Purc Location,Inv.Type,Vendor,Inv No,Inv Date,Rate,Tax Category,GST,Amount,TCS,Net Amount\n",l={pages:{page:1,limit:1e10},filters:{systype:Y,location:H,searchquery:ie,vendorsearchquery:Ee,stocktype:L}},e.prev=2,e.next=5,b()({url:"".concat(v.API,"/inventory/").concat(p.a.getId(),"/getallhistory"),method:"POST",data:l});case 5:c=e.sent,console.log(c.data.out),a=c.data.out,e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(2),e.t0;case 13:a.map((function(e,a){t+="Invoice No: ".concat(e.invnumber,",Date: ").concat(u()(e.invdate).format("DD-MM-YYYY"),",Inv Location: ").concat(e.location,",Purchase Type: ").concat(e.purchlocation,",Inv Type: ").concat(e.invtype,"\n"),e.invItems.map((function(a,l){t+='"'.concat(l+1,'","').concat(a.location,'","').concat(Object(g.capitalize)(a.stocktype),'","').concat(Object(g.capitalize)(a.systype),'","').concat(Object(g.capitalize)(a.type),'","').concat(a.name,'","').concat(a.sno,'","').concat(a.wty,'","').concat(a.expirydate,'","').concat(a.condition,'","').concat(a.purchtype,'","').concat(a.purchlocation,'","').concat(a.invtype,'","').concat(a.vendor,'","').concat(e.invnumber,'","').concat(u()(e.invdate).format("DD-MM-YYYY"),'","').concat(a.rate,'","').concat(a.taxcategory,'","').concat(Number(a.nettax).toFixed(2),'","').concat(a.amount,'","').concat(Number(a.tcs).toFixed(2),'","').concat(Number(a.invamount).toFixed(2),'",\n')}))})),r=new Blob([t],{type:"text/csv;charset=utf-8;"}),Object(d.saveAs)(r,"Inventory.csv");case 16:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}();return s.a.createElement(s.a.Fragment,null,s.a.createElement(s.a.Fragment,null,s.a.createElement(E.Modal,{isOpen:le,onClose:function(){return ne(!1)},className:"w-9/12 h-h-159 overflow-y-auto dark:bg-gray-800 p-10 my-6  bg-gray-50 text-gray-900 dark:text-white  rounded-lg "},s.a.createElement(E.ModalHeader,{className:"flex flex-row justify-between text-xl"},s.a.createElement("div",null,"Inventory Purchased")),s.a.createElement(E.ModalBody,null,s.a.createElement("div",{className:" bg-gray-200 dark:bg-gray-700 p-3 "},s.a.createElement("div",{className:"mb- mt-4"},s.a.createElement(E.TableContainer,{className:"mt-4"},s.a.createElement(E.Table,null,s.a.createElement(E.TableHeader,null,s.a.createElement("tr",null,s.a.createElement(E.TableCell,null,"Category"),s.a.createElement(E.TableCell,null,"Description"),s.a.createElement(E.TableCell,null,"Serial Number"),s.a.createElement(E.TableCell,null,"Location"),s.a.createElement(E.TableCell,null,"Invoice Number"),s.a.createElement(E.TableCell,null,"Inv Date"),s.a.createElement(E.TableCell,null,"Wty Expiry"),s.a.createElement(E.TableCell,null,"Status"))),s.a.createElement(E.TableBody,null,$.map((function(e,t){return s.a.createElement(E.TableRow,{className:"hover:shadow-lg dark:hover:bg-gray-600 ".concat(Te==e._id?"bg-blue-300 shadow-lg dark:bg-gray-600":"white"," "),key:t,onClick:function(){je(e._id)}},s.a.createElement(E.TableCell,{className:"w-8"},s.a.createElement("div",{className:"flex items-center text-sm "},s.a.createElement("div",null,s.a.createElement("p",{className:"font-semibold"},Object(g.capitalize)(e.type))))),s.a.createElement(E.TableCell,null,s.a.createElement("span",{className:"text-sm"},e.name)),s.a.createElement(E.TableCell,null,s.a.createElement("span",{className:"text-sm"},e.sno)),s.a.createElement(E.TableCell,null,s.a.createElement("span",{className:"text-sm"},e.location)),s.a.createElement(E.TableCell,null,s.a.createElement("span",{className:"text-sm"},e.invnumber)),s.a.createElement(E.TableCell,null,s.a.createElement("span",{className:"text-sm"},u()(e.invdate).format("DD/MM/YY"))),s.a.createElement(E.TableCell,null,s.a.createElement("span",{className:"text-sm"},e.expirydate)),s.a.createElement(E.TableCell,null,s.a.createElement(E.Badge,{type:"Good"==e.condition?"primary":"danger"},e.condition)))})))))))),s.a.createElement(E.ModalFooter,null))),s.a.createElement("div",{className:"mb-64 mt-4"},s.a.createElement("div",{className:""},s.a.createElement("div",{class:"my-2 flex sm:flex-row flex-col items-start sm:items-center sm:justify-left h-full space-x-2 "},s.a.createElement("div",{class:"relative mx-1 "},s.a.createElement("select",{class:" shadow-md h-full rounded border block appearance-none w-full bg-white border-gray-400 text-gray-700 py-2 px-4 pr-8 leading-tight focus:outline-none   focus:bg-white focus:border-gray-500",value:Y,onChange:function(e){z(e.target.value)}},s.a.createElement("option",{value:"",disabled:!0,selected:!0},"Type"),s.a.createElement("option",{value:""},"All"),s.a.createElement("option",{value:"item"},"Item"),s.a.createElement("option",{value:"full system"},"Full System")),s.a.createElement("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},s.a.createElement("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},s.a.createElement("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})))),s.a.createElement("div",{class:"relative mx-1 "},s.a.createElement("select",{class:" shadow-md h-full rounded border block appearance-none w-full bg-white border-gray-400 text-gray-700 py-2 px-4 pr-8 leading-tight focus:outline-none   focus:bg-white focus:border-gray-500",value:H,onChange:function(e){q(e.target.value)}},s.a.createElement("option",{value:"",disabled:!0,selected:!0},"Location"),s.a.createElement("option",{value:""},"All"),s.a.createElement("option",{value:"Trivandrum"},"Trivandrum"),s.a.createElement("option",{value:"Kottayam"},"Kottayam"),s.a.createElement("option",{value:"Kozhikode"},"Kozhikode")),s.a.createElement("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},s.a.createElement("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},s.a.createElement("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})))),s.a.createElement("div",{class:"block relative xl:ml-64"},s.a.createElement("span",{class:"h-full absolute inset-y-0 left-0 flex items-center pl-2"},s.a.createElement("svg",{viewBox:"0 0 24 24",class:"h-4 w-4 fill-current text-gray-500"},s.a.createElement("path",{d:"M10 4a6 6 0 100 12 6 6 0 000-12zm-8 6a8 8 0 1114.32 4.906l5.387 5.387a1 1 0 01-1.414 1.414l-5.387-5.387A8 8 0 012 10z"}))),s.a.createElement("form",{onSubmit:function(e){e.preventDefault(),S(!N)}},s.a.createElement("input",{value:ie,onChange:function(e){return be(e.target.value)},placeholder:"Search Invoice Number",class:"shadow-md z-20 appearance-none rounded border border-gray-400 border-b block pl-8 pr-6 py-2 w-full bg-white text-sm placeholder-gray-400 text-gray-700 focus:bg-white focus:placeholder-gray-600 focus:text-gray-700 focus:outline-none"}))),s.a.createElement("div",{class:"block relative xl:ml-64"},s.a.createElement("span",{class:"h-full absolute inset-y-0 left-0 flex items-center pl-2"},s.a.createElement("svg",{viewBox:"0 0 24 24",class:"h-4 w-4 fill-current text-gray-500"},s.a.createElement("path",{d:"M10 4a6 6 0 100 12 6 6 0 000-12zm-8 6a8 8 0 1114.32 4.906l5.387 5.387a1 1 0 01-1.414 1.414l-5.387-5.387A8 8 0 012 10z"}))),s.a.createElement("form",{onSubmit:function(e){e.preventDefault(),S(!N)}},s.a.createElement("input",{value:Ee,onChange:function(e){return ve(e.target.value)},placeholder:"Search Vendor",class:"shadow-md z-20 appearance-none rounded border border-gray-400 border-b block pl-8 pr-6 py-2 w-full bg-white text-sm placeholder-gray-400 text-gray-700 focus:bg-white focus:placeholder-gray-600 focus:text-gray-700 focus:outline-none"}))),s.a.createElement("div",{className:"flex justify-end items-end "},s.a.createElement(E.Button,{onClick:function(){Oe()},layout:"outline"},"Export")))),s.a.createElement(E.TableContainer,{className:"mt-4"},s.a.createElement(E.Table,null,s.a.createElement(E.TableHeader,null,s.a.createElement("tr",null,s.a.createElement(E.TableCell,null," Type"),s.a.createElement(E.TableCell,null,"Vendor"),s.a.createElement(E.TableCell,null,"Inventory No."),s.a.createElement(E.TableCell,null,"Date"),s.a.createElement(E.TableCell,null,"Location"),s.a.createElement(E.TableCell,null,"No.Items"),s.a.createElement(E.TableCell,null,s.a.createElement("span",{className:"cursor-pointer",onClick:function(){return je(-1)}},"Items")))),s.a.createElement(E.TableBody,null,T.map((function(e,t){return s.a.createElement(E.TableRow,{className:"hover:shadow-lg dark:hover:bg-gray-600   ".concat(Te==e._id?"bg-blue-300 shadow-lg dark:bg-gray-600":"white"," "),key:t,onClick:function(){}},s.a.createElement(E.TableCell,{className:"w-8"},s.a.createElement("div",{className:"flex items-center text-sm "},s.a.createElement("div",null,s.a.createElement("p",{className:"font-semibold"}," ",s.a.createElement("p",{className:"font-semibold"},e.purchtype))))),s.a.createElement(E.TableCell,null,s.a.createElement("span",{className:"text-sm"},e.vendor)),s.a.createElement(E.TableCell,null,s.a.createElement("span",{className:"text-sm"},e.invnumber)),s.a.createElement(E.TableCell,null,s.a.createElement("span",{className:"text-sm"}," ",u()(e.invdate).format("DD/MM/YYYY"))),s.a.createElement(E.TableCell,null,s.a.createElement("span",{className:"text-sm"},e.location)),s.a.createElement(E.TableCell,null,s.a.createElement("span",{className:"text-sm"},e.invItems.length)),s.a.createElement(E.TableCell,{className:"text-center "},s.a.createElement(E.Button,{onClick:function(){console.log(Te),je(Te==t?-1:t),ee(e.invItems),ne(!0)},className:"rounded-lg m-1"},"View")))})))),s.a.createElement(E.TableFooter,null,s.a.createElement(E.Pagination,{totalResults:fe,resultsPerPage:10,label:"Table navigation",onChange:function(e){h(e)}})))))}}}]);
//# sourceMappingURL=76.6d15d1bd.chunk.js.map