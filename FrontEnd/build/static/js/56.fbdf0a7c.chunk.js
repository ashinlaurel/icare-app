(this["webpackJsonpwindmill-dashboard-react"]=this["webpackJsonpwindmill-dashboard-react"]||[]).push([[56],{1228:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return v}));var n=t(5),l=t.n(n),r=t(12),s=t(19),c=t(6),o=t(3),u=t(0),m=t.n(u),d=t(18),i=t(2),p=t(43),f=t(10),b=t(9),E=t.n(b);t(20);function v(){var e=Object(u.useContext)(p.a),a=(e.topheading,e.setTopHeading),t=Object(u.useState)({employeeName:"",employeeId:"",startdate:"",enddate:"item",reason:""}),n=Object(o.a)(t,2),b=n[0],v=n[1],x=Object(u.useState)(!1),g=Object(o.a)(x,2),N=g[0],h=g[1],w=Object(u.useState)(""),y=Object(o.a)(w,2),O=y[0],k=y[1];Object(u.useEffect)((function(){return a("Apply Leave"),function(){a("")}}),[]);var D=function(e){return function(a){v(Object(c.a)(Object(c.a)({},b),{},Object(s.a)({},e,a.target.value)))}},j=function(){var e=Object(r.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==b.startdate){e.next=5;break}return k("Start Date necessary"),h(!0),console.log("missing inputs"),e.abrupt("return");case 5:if(""!==b.enddate){e.next=10;break}return k("End Date necessary"),h(!0),console.log("missing inputs"),e.abrupt("return");case 10:if(!(Math.floor((Date.parse(b.enddate)-Date.parse(b.startdate))/864e5)<0)){e.next=15;break}return k("Invalid Date"),h(!0),console.log("invalid inputs"),e.abrupt("return");case 15:if(""!==b.reason){e.next=20;break}return k("Please Give Reason"),h(!0),console.log("missing inputs"),e.abrupt("return");case 20:return b.employeeName=d.a.getName(),b.employeeId=d.a.getId(),console.log(b),e.next=25,E()({url:"".concat(f.API,"/leave/").concat(d.a.getId(),"/create"),method:"POST",data:b}).then((function(e){console.log("Added",e),k("Leave Application Submitted."),h(!0);var a=b;a.startdate="",a.enddate="",a.reason="",v(a)})).catch((function(e){console.log("err",e)}));case 25:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return m.a.createElement("div",null,m.a.createElement(m.a.Fragment,null,m.a.createElement(i.Modal,{isOpen:N,onClose:function(){return h(!1)}},m.a.createElement(i.ModalHeader,null,O),m.a.createElement(i.ModalBody,null),m.a.createElement(i.ModalFooter,null,m.a.createElement(i.Button,{className:"w-full sm:w-auto",onClick:function(){return h(!1)}},"Okay!")))),m.a.createElement("div",{className:"px-4 py-3 mt-4 mb-8 bg-white rounded-lg shadow-md dark:bg-gray-800"},m.a.createElement(i.Label,{className:"font-bold"},m.a.createElement("span",null,"Apply for Leave")),m.a.createElement("hr",{className:"mb-5 mt-2"}),m.a.createElement("div",{className:"flex-row flex space-x-3 w-full"},m.a.createElement("div",{className:"flex flex-col w-full"},m.a.createElement(i.Label,{className:"w-full"},m.a.createElement("span",null,"Start Date*"),m.a.createElement(i.Input,{className:"mt-1",type:"date",value:b.startdate,onChange:D("startdate")}))),m.a.createElement("div",{className:"flex flex-col w-full"},m.a.createElement(i.Label,{className:"w-full"},m.a.createElement("span",null,"End Date*"),m.a.createElement(i.Input,{className:"mt-1",type:"date",value:b.enddate,onChange:D("enddate")}))),m.a.createElement("div",{className:"flex flex-col w-full"},m.a.createElement(i.Label,{className:"w-full"},m.a.createElement("div",null,"Number of Days"),m.a.createElement("div",{className:"text-xl font-semibold my-2 p-2 mx-5 text-black dark:text-white"},""!=b.startdate&&""!=b.enddate?Math.floor((Date.parse(b.enddate)-Date.parse(b.startdate))/864e5)>=0?Math.floor((Date.parse(b.enddate)-Date.parse(b.startdate))/864e5)+1:m.a.createElement(m.a.Fragment,null,"Invalid Dates"):null)))),m.a.createElement("div",{className:"flex-row flex space-x-3 my-2"},m.a.createElement("div",{className:"flex flex-col w-full "},m.a.createElement(i.Label,{className:"w-full"},m.a.createElement("span",null,"Reason"),m.a.createElement(i.Input,{className:"mt-1  ",type:"text-area",value:b.reason,onChange:D("reason")})))),m.a.createElement(i.Button,{onClick:function(){j()},"aria-label":"Notifications","aria-haspopup":"true",className:"mt-4"}," ","Submit Application")))}}}]);
//# sourceMappingURL=56.fbdf0a7c.chunk.js.map