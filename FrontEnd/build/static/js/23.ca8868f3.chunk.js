/*! For license information please see 23.ca8868f3.chunk.js.LICENSE.txt */
(this["webpackJsonpwindmill-dashboard-react"]=this["webpackJsonpwindmill-dashboard-react"]||[]).push([[23],{1238:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(191),c=a(201),s=a(43),l=a(7),i=a(196),u=a(36),d=a(5),p=a.n(d),m=a(12),f=a(21),g=a.n(f),v=a(18),h=a(9).default,b=a(10).API,y=a(200).saveAs,w=a(37),x=w.capitalize,E=w.getCallStatusAsString,C=function(){var e=Object(m.a)(p.a.mark((function e(){var t,a,n,o,r,c,s,l,i,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],a={search:"",limit:1e6},e.prev=2,e.next=5,h({url:"".concat(b,"/admin/").concat(v.a.getId(),"/getAllEmpCalls"),method:"POST",data:a});case 5:n=e.sent,console.log(n.data),n.data.map((function(e){t.push(e)})),e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(2),e.t0;case 13:console.log(t),o=[],r=0;case 16:if(!(r<t.length)){e.next=32;break}return c={pages:{page:1,limit:1e5},filters:{callStatus:"",searchquery:"",fromDate:"",toDate:"",employeeId:t[r]._id}},e.prev=18,e.next=21,h({url:"".concat(b,"/call/").concat(v.a.getId(),"/getall"),method:"POST",data:c});case 21:s=e.sent,console.log(s.data.out),o.push(s.data.out),e.next=29;break;case 26:throw e.prev=26,e.t1=e.catch(18),e.t1;case 29:r++,e.next=16;break;case 32:for(l="CallNo,Date,Time,Unit,Phone,Product,SerialNumber,Problem,CallStatus,AssignedTo,AssignedDate,ETA,Priority,Age,\n",i=0;i<o.length;i++)o[i][0]&&(l+="".concat(x(o[i][0].employeeName),",\n")),o[i].map((function(e,t){l+="".concat(e.callNo,",").concat(g()(e.date).format("DD-MM-YYYY"),",").concat(g()("2018-04-02".concat("T",e.time)).format("h:mm a"),",").concat(e.unitName,",").concat(e.phone,",").concat(e.assetId.producttype,",").concat(e.assetId.ponumber,",").concat(e.problem,",").concat(E(e.callStatus),",").concat(e.employeeName?e.employeeName:"Not Assigned",",").concat(g()(e.assignedDate).format("DD-MM-YYYY"),",").concat(e.assignedETA,",").concat(t+1,",").concat(Math.round(g.a.duration(g()().startOf("day")-g()(e.assignedDate)).asDays()+1),"\n")}));u=new Blob([l],{type:"text/csv;charset=utf-8;"}),y(u,"CallsExport.csv");case 36:case"end":return e.stop()}}),e,null,[[2,10],[18,26]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(m.a)(p.a.mark((function e(t){var a,n,o,r,c,s,l,i,u,d;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],n={search:"",limit:1e6},e.prev=2,e.next=5,h({url:"".concat(b,"/admin/").concat(v.a.getId(),"/getAllEmpCalls"),method:"POST",data:n});case 5:o=e.sent,console.log(o.data),o.data.map((function(e){a.push(e)})),e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(2),e.t0;case 13:console.log(a),r=[],c=0;case 16:if(!(c<a.length)){e.next=32;break}return s={pages:{page:1,limit:1e5},filters:{callStatus:"",searchquery:"",fromDate:"",toDate:"",employeeId:a[c]._id}},e.prev=18,e.next=21,h({url:"".concat(b,"/call/").concat(v.a.getId(),"/getall"),method:"POST",data:s});case 21:l=e.sent,console.log(l.data.out),r.push(l.data.out),e.next=29;break;case 26:throw e.prev=26,e.t1=e.catch(18),e.t1;case 29:c++,e.next=16;break;case 32:for(i="CallNo,Date,Time,Unit,Phone,Product,SerialNumber,Problem,CallStatus,AssignedTo,AssignedDate,ETA,Priority,Age,\n",u=0;u<r.length;u++)r[u][0]&&(i+="".concat(x(r[u][0].employeeName),",\n")),r[u].filter((function(e){if(Math.round(g.a.duration(g()().startOf("day")-g()(e.assignedDate)).asDays()+1)<3)return!1})).map((function(e,t){i+="".concat(e.callNo,",").concat(g()(e.date).format("DD-MM-YYYY"),",").concat(g()("2018-04-02".concat("T",e.time)).format("h:mm a"),",").concat(e.unitName,",").concat(e.phone,",").concat(e.assetId.producttype,",").concat(e.assetId.ponumber,",").concat(e.problem,",").concat(E(e.callStatus),",").concat(e.employeeName?e.employeeName:"Not Assigned",",").concat(g()(e.assignedDate).format("DD-MM-YYYY"),",").concat(e.assignedETA,",").concat(t+1,",").concat(Math.round(g.a.duration(g()().startOf("day")-g()(e.assignedDate)).asDays()+1),"\n")}));d=new Blob([i],{type:"text/csv;charset=utf-8;"}),y(d,"CallsExport.csv");case 36:case"end":return e.stop()}}),e,null,[[2,10],[18,26]])})));return function(t){return e.apply(this,arguments)}}();t.default=function(){Object(l.g)();var e=Object(n.useContext)(s.a).setTopHeading;return Object(n.useEffect)((function(){return e("Reports"),function(){e("")}}),[]),o.a.createElement(o.a.Fragment,null,o.a.createElement(r.a,null,"Call Reports"),o.a.createElement("div",{className:"grid gap-6 mb-8 md:grid-cols-2 xl:grid-cols-4"},o.a.createElement("div",{className:" cursor-pointer",onClick:function(){return C()}},o.a.createElement(c.a,{className:"",title:"Click To Download",value:"Total Active Calls"},o.a.createElement(i.a,{icon:u.PeopleIcon,iconColorClass:"text-orange-500 dark:text-orange-100",bgColorClass:"bg-orange-100 dark:bg-orange-500",className:"mr-4"}))),o.a.createElement("div",{className:" cursor-pointer",onClick:function(){return k(2)}},o.a.createElement(c.a,{className:"",title:"Click To Download",value:"Calls > 24 hrs"},o.a.createElement(i.a,{icon:u.PeopleIcon,iconColorClass:"text-orange-500 dark:text-orange-100",bgColorClass:"bg-orange-100 dark:bg-orange-500",className:"mr-4"}))),o.a.createElement("div",{className:" cursor-pointer",onClick:function(){return k(3)}},o.a.createElement(c.a,{className:"",title:"Click To Download",value:"Calls > 3 days"},o.a.createElement(i.a,{icon:u.PeopleIcon,iconColorClass:"text-orange-500 dark:text-orange-100",bgColorClass:"bg-orange-100 dark:bg-orange-500",className:"mr-4"})))),o.a.createElement(r.a,null,"Asset Reports"))}},195:function(e,t,a){var n;!function(){"use strict";var a={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r=typeof n;if("string"===r||"number"===r)e.push(n);else if(Array.isArray(n)&&n.length){var c=o.apply(null,n);c&&e.push(c)}else if("object"===r)for(var s in n)a.call(n,s)&&n[s]&&e.push(s)}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},196:function(e,t,a){"use strict";var n=a(0),o=a.n(n),r=a(195),c=a.n(r);t.a=function(e){var t=e.icon,a=e.iconColorClass,n=void 0===a?"text-purple-600 dark:text-purple-100":a,r=e.bgColorClass,s=void 0===r?"bg-purple-100 dark:bg-purple-600":r,l=e.className,i=c()("rounded-full p-5",n,s,l);return o.a.createElement("div",{className:i},o.a.createElement(t,{className:"w-6 h-6"}))}},200:function(e,t,a){(function(a){var n,o,r;o=[],void 0===(r="function"===typeof(n=function(){"use strict";function t(e,t,a){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){s(n.response,t,a)},n.onerror=function(){console.error("could not download file")},n.send()}function n(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function o(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(t){var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(a)}}var r="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof a&&a.global===a?a:void 0,c=r.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=r.saveAs||("object"!=typeof window||window!==r?function(){}:"download"in HTMLAnchorElement.prototype&&!c?function(e,a,c){var s=r.URL||r.webkitURL,l=document.createElement("a");a=a||e.name||"download",l.download=a,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?o(l):n(l.href)?t(e,a,c):o(l,l.target="_blank")):(l.href=s.createObjectURL(e),setTimeout((function(){s.revokeObjectURL(l.href)}),4e4),setTimeout((function(){o(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,a,r){if(a=a||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return"undefined"==typeof t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,r),a);else if(n(e))t(e,a,r);else{var c=document.createElement("a");c.href=e,c.target="_blank",setTimeout((function(){o(c)}))}}:function(e,a,n,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof e)return t(e,a,n);var s="application/octet-stream"===e.type,l=/constructor/i.test(r.HTMLElement)||r.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||s&&l||c)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var e=u.result;e=i?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=e:location=e,o=null},u.readAsDataURL(e)}else{var d=r.URL||r.webkitURL,p=d.createObjectURL(e);o?o.location=p:location.href=p,o=null,setTimeout((function(){d.revokeObjectURL(p)}),4e4)}});r.saveAs=s.saveAs=s,e.exports=s})?n.apply(t,o):n)||(e.exports=r)}).call(this,a(148))},201:function(e,t,a){"use strict";var n=a(0),o=a.n(n),r=a(2);t.a=function(e){var t=e.title,a=e.value,n=e.children;return o.a.createElement(r.Card,null,o.a.createElement(r.CardBody,{className:"flex items-center"},n,o.a.createElement("div",null,o.a.createElement("p",{className:"mb-2 text-sm font-medium text-gray-600 dark:text-gray-400"},t),o.a.createElement("p",{className:"text-lg font-semibold text-gray-700 dark:text-gray-200"},a))))}}}]);
//# sourceMappingURL=23.ca8868f3.chunk.js.map