(this["webpackJsonpwindmill-dashboard-react"]=this["webpackJsonpwindmill-dashboard-react"]||[]).push([[26],{1068:function(e,t,a){"use strict";a.r(t);var n=a(3),l=a.n(n),r=a(9),c=a(2),o=a(0),s=a.n(o),u=a(19),i=a.n(u),m=a(8),d=a.n(m),b=(a(118),a(15)),p=a(28),f=a(1),E=a(10),v=(a(94),a(30),a(29));t.default=function(){var e=Object(o.useContext)(v.a),t=(e.topheading,e.setTopHeading),a=Object(o.useState)(!1),n=Object(c.a)(a,2),u=(n[0],n[1],Object(o.useState)(1)),m=Object(c.a)(u,2),g=m[0],h=m[1],w=Object(o.useState)([]),y=Object(c.a)(w,2),x=y[0],T=y[1],O=Object(o.useState)(!0),j=Object(c.a)(O,2),C=j[0],k=j[1],N=Object(o.useState)(!0),S=Object(c.a)(N,2),B=(S[0],S[1],Object(o.useState)("")),L=Object(c.a)(B,2),A=L[0],M=L[1],R=Object(o.useState)(""),_=Object(c.a)(R,2),I=_[0],U=_[1],F=Object(o.useState)(""),H=Object(c.a)(F,2),z=H[0],D=H[1],P=Object(o.useState)(""),K=Object(c.a)(P,2),q=K[0],Y=(K[1],Object(o.useState)("")),G=Object(c.a)(Y,2),J=G[0],V=(G[1],Object(o.useState)({})),X=Object(c.a)(V,2),W=X[0],Q=(X[1],Object(o.useState)("")),Z=Object(c.a)(Q,2),$=(Z[0],Z[1],Object(o.useState)("")),ee=Object(c.a)($,2),te=(ee[0],ee[1],Object(o.useState)("")),ae=Object(c.a)(te,2),ne=ae[0],le=ae[1],re=Object(o.useState)(""),ce=Object(c.a)(re,2),oe=ce[0],se=ce[1],ue=Object(o.useState)(20),ie=Object(c.a)(ue,2),me=ie[0],de=ie[1],be=Object(o.useState)(-1),pe=Object(c.a)(be,2),fe=pe[0],Ee=pe[1];return Object(o.useEffect)((function(){return t("Purchase History"),function(){t("")}}),[]),Object(o.useEffect)((function(){!function(){var e=Object(r.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getter called"),t={pages:{page:g,limit:10},filters:{systype:A,location:z,searchquery:ne,vendorsearchquery:oe,stocktype:I}},e.prev=2,e.next=5,d()({url:"".concat(E.a,"/inventory/").concat(b.a.getId(),"/getallhistory"),method:"POST",data:t});case 5:a=e.sent,console.log(a.data.out),de(a.data.total),T(a.data.out),e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(2),e.t0;case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}()()}),[g,z,q,J,A,C,I]),console.log(W),s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"mb-64 mt-4"},s.a.createElement("div",{className:""},s.a.createElement("div",{class:"my-2 flex sm:flex-row flex-col items-start sm:items-center sm:justify-left h-full space-x-2 "},s.a.createElement("div",{class:"relative mx-1 "},s.a.createElement("select",{class:" shadow-md h-full rounded border block appearance-none w-full bg-white border-gray-400 text-gray-700 py-2 px-4 pr-8 leading-tight focus:outline-none   focus:bg-white focus:border-gray-500",value:A,onChange:function(e){M(e.target.value)}},s.a.createElement("option",{value:"",disabled:!0,selected:!0},"Type"),s.a.createElement("option",{value:""},"All"),s.a.createElement("option",{value:"item"},"Item"),s.a.createElement("option",{value:"full system"},"Full System")),s.a.createElement("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},s.a.createElement("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},s.a.createElement("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})))),s.a.createElement("div",{class:"relative mx-1 "},s.a.createElement("select",{class:" shadow-md h-full rounded border block appearance-none w-full bg-white border-gray-400 text-gray-700 py-2 px-4 pr-8 leading-tight focus:outline-none   focus:bg-white focus:border-gray-500",value:I,onChange:function(e){U(e.target.value)}},s.a.createElement("option",{value:"",disabled:!0,selected:!0},"Stock Type"),s.a.createElement("option",{value:""},"All"),s.a.createElement("option",{value:"Purchased"},"Purchased"),s.a.createElement("option",{value:"Serviced"},"Serviced")),s.a.createElement("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},s.a.createElement("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},s.a.createElement("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})))),s.a.createElement("div",{class:"relative mx-1 "},s.a.createElement("select",{class:" shadow-md h-full rounded border block appearance-none w-full bg-white border-gray-400 text-gray-700 py-2 px-4 pr-8 leading-tight focus:outline-none   focus:bg-white focus:border-gray-500",value:z,onChange:function(e){D(e.target.value)}},s.a.createElement("option",{value:"",disabled:!0,selected:!0},"Location"),s.a.createElement("option",{value:""},"All"),s.a.createElement("option",{value:"Trivandrum"},"Trivandrum"),s.a.createElement("option",{value:"Kottayam"},"Kottayam"),s.a.createElement("option",{value:"Kozhikode"},"Kozhikode")),s.a.createElement("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},s.a.createElement("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},s.a.createElement("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})))),s.a.createElement("div",{class:"block relative xl:ml-64"},s.a.createElement("span",{class:"h-full absolute inset-y-0 left-0 flex items-center pl-2"},s.a.createElement("svg",{viewBox:"0 0 24 24",class:"h-4 w-4 fill-current text-gray-500"},s.a.createElement("path",{d:"M10 4a6 6 0 100 12 6 6 0 000-12zm-8 6a8 8 0 1114.32 4.906l5.387 5.387a1 1 0 01-1.414 1.414l-5.387-5.387A8 8 0 012 10z"}))),s.a.createElement("form",{onSubmit:function(e){e.preventDefault(),k(!C)}},s.a.createElement("input",{value:ne,onChange:function(e){return le(e.target.value)},placeholder:"Search Inventory Number",class:"shadow-md z-20 appearance-none rounded border border-gray-400 border-b block pl-8 pr-6 py-2 w-full bg-white text-sm placeholder-gray-400 text-gray-700 focus:bg-white focus:placeholder-gray-600 focus:text-gray-700 focus:outline-none"}))),s.a.createElement("div",{class:"block relative xl:ml-64"},s.a.createElement("span",{class:"h-full absolute inset-y-0 left-0 flex items-center pl-2"},s.a.createElement("svg",{viewBox:"0 0 24 24",class:"h-4 w-4 fill-current text-gray-500"},s.a.createElement("path",{d:"M10 4a6 6 0 100 12 6 6 0 000-12zm-8 6a8 8 0 1114.32 4.906l5.387 5.387a1 1 0 01-1.414 1.414l-5.387-5.387A8 8 0 012 10z"}))),s.a.createElement("form",{onSubmit:function(e){e.preventDefault(),k(!C)}},s.a.createElement("input",{value:oe,onChange:function(e){return se(e.target.value)},placeholder:"Search Vendor",class:"shadow-md z-20 appearance-none rounded border border-gray-400 border-b block pl-8 pr-6 py-2 w-full bg-white text-sm placeholder-gray-400 text-gray-700 focus:bg-white focus:placeholder-gray-600 focus:text-gray-700 focus:outline-none"}))))),s.a.createElement(f.TableContainer,{className:"mt-4"},s.a.createElement(f.Table,null,s.a.createElement(f.TableHeader,null,s.a.createElement("tr",{className:"flex flex-row justify-between"},s.a.createElement(f.TableCell,null," Type"),s.a.createElement(f.TableCell,null,"Vendor"),s.a.createElement(f.TableCell,null,"Inventory No."),s.a.createElement(f.TableCell,null,"Date"),s.a.createElement(f.TableCell,null,"Location"),s.a.createElement(f.TableCell,null,"No.Items"),s.a.createElement(f.TableCell,null,s.a.createElement("span",{className:"cursor-pointer",onClick:function(){return Ee(-1)}},"Items")))),s.a.createElement(f.TableBody,null,x.map((function(e,t){return s.a.createElement("div",{className:"flex flex-col justify-around"},s.a.createElement(f.TableRow,{className:"hover:shadow-lg dark:hover:bg-gray-600 flex flex-row justify-between  ".concat(fe==e._id?"bg-blue-300 shadow-lg dark:bg-gray-600":"white"," "),key:t,onClick:function(){Ee(t)}},s.a.createElement(f.TableCell,{className:"w-8"},s.a.createElement("div",{className:"flex items-center text-sm "},s.a.createElement("div",null,s.a.createElement("p",{className:"font-semibold"},e.purchtype)))),s.a.createElement(f.TableCell,null,s.a.createElement("span",{className:"text-sm"},e.vendor)),s.a.createElement(f.TableCell,null,s.a.createElement("span",{className:"text-sm"},e.invnumber)),s.a.createElement(f.TableCell,null,s.a.createElement("span",{className:"text-sm"}," ",i()(e.invdate).format("DD/MM/YYYY"))),s.a.createElement(f.TableCell,null,s.a.createElement("span",{className:"text-sm"},e.location)),s.a.createElement(f.TableCell,null,s.a.createElement("span",{className:"text-sm"},e.invItems.length)),s.a.createElement(f.TableCell,{className:"text-center "},s.a.createElement(f.Button,{size:"icon","aria-label":"DropDown",onClick:function(){console.log(fe),Ee(fe==t?-1:t)},className:"rounded-lg m-1"},s.a.createElement(p.DropdownIcon,{className:"w-5 h-5","aria-hidden":"true"})))),fe==t?(a=e.invItems,s.a.createElement("div",{className:" bg-gray-200 dark:bg-gray-700 p-3"},s.a.createElement("div",{className:"mb- mt-4"},s.a.createElement(f.TableContainer,{className:"mt-4"},s.a.createElement(f.Table,null,s.a.createElement(f.TableHeader,null,s.a.createElement("tr",null,s.a.createElement(f.TableCell,null,"Type"),s.a.createElement(f.TableCell,null,"Name"),s.a.createElement(f.TableCell,null,"Serial Number"),s.a.createElement(f.TableCell,null,"Location"),s.a.createElement(f.TableCell,null,"Inventory Number"),s.a.createElement(f.TableCell,null,"Condition"))),s.a.createElement(f.TableBody,null,a.map((function(e,t){return s.a.createElement(f.TableRow,{className:"hover:shadow-lg dark:hover:bg-gray-600 ".concat(fe==e._id?"bg-blue-300 shadow-lg dark:bg-gray-600":"white"," "),key:t,onClick:function(){Ee(e._id)}},s.a.createElement(f.TableCell,{className:"w-8"},s.a.createElement("div",{className:"flex items-center text-sm "},s.a.createElement("div",null,s.a.createElement("p",{className:"font-semibold"},e.type)))),s.a.createElement(f.TableCell,null,s.a.createElement("span",{className:"text-sm"},e.name)),s.a.createElement(f.TableCell,null,s.a.createElement("span",{className:"text-sm"},e.sno)),s.a.createElement(f.TableCell,null,s.a.createElement("span",{className:"text-sm"},e.location)),s.a.createElement(f.TableCell,null,s.a.createElement("span",{className:"text-sm"},e.invnumber)),s.a.createElement(f.TableCell,null,s.a.createElement(f.Badge,{type:"Good"==e.condition?"primary":"danger"},e.condition)))})))))))):null);var a})))),s.a.createElement(f.TableFooter,null,s.a.createElement(f.Pagination,{totalResults:me,resultsPerPage:10,label:"Table navigation",onChange:function(e){h(e)}})))))}},118:function(e,t,a){(function(a){var n,l,r;l=[],void 0===(r="function"===typeof(n=function(){"use strict";function t(e,t,a){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){o(n.response,t,a)},n.onerror=function(){console.error("could not download file")},n.send()}function n(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function l(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(t){var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(a)}}var r="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof a&&a.global===a?a:void 0,c=r.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),o=r.saveAs||("object"!=typeof window||window!==r?function(){}:"download"in HTMLAnchorElement.prototype&&!c?function(e,a,c){var o=r.URL||r.webkitURL,s=document.createElement("a");a=a||e.name||"download",s.download=a,s.rel="noopener","string"==typeof e?(s.href=e,s.origin===location.origin?l(s):n(s.href)?t(e,a,c):l(s,s.target="_blank")):(s.href=o.createObjectURL(e),setTimeout((function(){o.revokeObjectURL(s.href)}),4e4),setTimeout((function(){l(s)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,a,r){if(a=a||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return"undefined"==typeof t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,r),a);else if(n(e))t(e,a,r);else{var c=document.createElement("a");c.href=e,c.target="_blank",setTimeout((function(){l(c)}))}}:function(e,a,n,l){if((l=l||open("","_blank"))&&(l.document.title=l.document.body.innerText="downloading..."),"string"==typeof e)return t(e,a,n);var o="application/octet-stream"===e.type,s=/constructor/i.test(r.HTMLElement)||r.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||o&&s||c)&&"undefined"!=typeof FileReader){var i=new FileReader;i.onloadend=function(){var e=i.result;e=u?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),l?l.location.href=e:location=e,l=null},i.readAsDataURL(e)}else{var m=r.URL||r.webkitURL,d=m.createObjectURL(e);l?l.location=d:location.href=d,l=null,setTimeout((function(){m.revokeObjectURL(d)}),4e4)}});r.saveAs=o.saveAs=o,e.exports=o})?n.apply(t,l):n)||(e.exports=r)}).call(this,a(52))},87:function(e,t,a){},94:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a(3),l=a.n(n),r=a(9),c=a(2),o=a(0),s=a.n(o),u=a(8),i=a.n(u),m=a(1),d=a(92),b=(a(87),a(10));function p(e){var t=e.isModalOpen,a=e.setIsModalOpen,n=e.unit,u=e.setUnit,p=e.account,f=e.setAccount,E=e.customer,v=e.setCustomer,g=e.refresh,h=e.setRefresh,w=Object(o.useState)([]),y=Object(c.a)(w,2),x=y[0],T=y[1],O=Object(o.useState)([]),j=Object(c.a)(O,2),C=j[0],k=j[1],N=Object(o.useState)([]),S=Object(c.a)(N,2),B=S[0],L=S[1],A=Object(o.useState)(0),M=Object(c.a)(A,2),R=M[0],_=M[1],I=Object(o.useState)(""),U=Object(c.a)(I,2),F=U[0],H=U[1],z=function(e){H(e.target.value)},D=function(){var e=Object(r.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={search:F,role:1},e.prev=2,e.next=5,i()({url:"".concat(b.a,"/customer/customers"),method:"POST",data:a});case 5:n=e.sent,console.log(n.data),T(n.data),e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(2),e.t0;case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){!function(){var e=Object(r.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={search:F,role:1},e.prev=1,e.next=4,i()({url:"".concat(b.a,"/customer/customers"),method:"POST",data:t});case 4:a=e.sent,console.log(a.data),T(a.data),e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(1),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}()()}),[]);var P=function(){var e=Object(r.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v({_id:t._id,customerName:t.name}),f({_id:"",accountName:""}),u({_id:"",unitName:""}),e.prev=3,e.next=6,i.a.post("".concat(b.a,"/customer/accounts"),{customerId:t._id});case 6:a=e.sent,console.log(a.data),k(a.data),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.log("axiosErr",e.t0);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(r.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),f({_id:t._id,accountName:t.name}),u({_id:"",unitName:""}),e.prev=3,e.next=6,i.a.post("".concat(b.a,"/customer/units"),{accountId:t._id});case 6:a=e.sent,console.log(a.data),L(a.data),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.log("axiosErr",e.t0);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(r.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),u({_id:t._id,unitName:t.unitName});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return s.a.createElement(s.a.Fragment,null,s.a.createElement(m.Modal,{isOpen:t,onClose:function(){return a(!1)}},s.a.createElement(m.ModalHeader,null,"Select"," ",0==R?s.a.createElement(s.a.Fragment,null,"Customer"):1==R?s.a.createElement(s.a.Fragment,null,"Account"):s.a.createElement(s.a.Fragment,null,"Unit")),s.a.createElement(m.ModalBody,null,s.a.createElement(d.d,{selectedIndex:R,onSelect:function(e){return _(e)}},s.a.createElement(d.b,null,s.a.createElement(d.a,null,"Customer"),s.a.createElement(d.a,null,"Account"),s.a.createElement(d.a,null,"Unit")),s.a.createElement(d.c,null,s.a.createElement(m.TableContainer,null,s.a.createElement(m.Table,null,s.a.createElement(m.TableHeader,null,s.a.createElement("tr",null,s.a.createElement(m.TableCell,null,"Customer")),s.a.createElement("tr",null,s.a.createElement(m.TableCell,null,s.a.createElement("form",{onSubmit:D},s.a.createElement("input",{className:"block w-full pr-20 text-sm text-black dark:text-gray-300 dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:focus:shadow-outline-gray form-input",placeholder:"Search Customers",onChange:z}))))),s.a.createElement(m.TableBody,null,x.map((function(e,t){return s.a.createElement(m.TableRow,{key:t,className:"hover:bg-purple-200 cursor-pointer",onClick:function(){return P(e)}},s.a.createElement(m.TableCell,null,s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("p",{className:"font-semibold"},e.name)))))})))),s.a.createElement(m.TableFooter,null))),s.a.createElement(d.c,null,s.a.createElement(m.TableContainer,null,s.a.createElement(m.Table,null,s.a.createElement(m.TableHeader,null,s.a.createElement("tr",null,s.a.createElement(m.TableCell,null,"Account"))),s.a.createElement(m.TableBody,null,C.map((function(e,t){return s.a.createElement(m.TableRow,{key:t,className:"hover:bg-purple-200 cursor-pointer",onClick:function(){return K(e)}},s.a.createElement(m.TableCell,null,s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("p",{className:"font-semibold"},e.name)))))})))),s.a.createElement(m.TableFooter,null))),s.a.createElement(d.c,null,s.a.createElement(m.TableContainer,null,s.a.createElement(m.Table,null,s.a.createElement(m.TableHeader,null,s.a.createElement("tr",null,s.a.createElement(m.TableCell,null,"Unit"))),s.a.createElement(m.TableBody,null,B.map((function(e,t){return s.a.createElement(m.TableRow,{key:t,className:"hover:bg-purple-200 cursor-pointer",onClick:function(){return q(e)}},s.a.createElement(m.TableCell,null,s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("p",{className:"font-semibold"},e.unitName)))))})))),s.a.createElement(m.TableFooter,null)))),s.a.createElement(m.Badge,{className:"mx-2 text-md",type:"success"},"Customer: ",E.customerName),s.a.createElement(m.Badge,{className:"mx-2 text-md",type:"success"},"Account : ",p.accountName),s.a.createElement(m.Badge,{className:"mx-2 text-md",type:"success"},"Unit: ",n.unitName)),s.a.createElement(m.ModalFooter,null,s.a.createElement(m.Button,{className:"w-full sm:w-auto",onClick:function(){a(!1),h(!g)}},"Select"))))}}}]);
//# sourceMappingURL=26.105b0a6b.chunk.js.map