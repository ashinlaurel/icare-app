{"version":3,"sources":["pages/Attendance/ViewAttendance.js"],"names":["ViewAttendance","useHistory","setTopHeading","useContext","TopBarContext","useState","moment","format","themonth","setThemonth","theyear","data","setData","setTotalResults","BottomBarContext","setBBarOpen","bbaropen","setAttendDetails","attendDetails","useEffect","a","console","log","payload","pages","page","limit","filters","month","year","axios","url","API","Emp","getId","method","response","out","total","className","class","value","onChange","e","target","disabled","selected","xmlns","viewBox","d","map","user","employeeName","days","day","parseInt","dayNo","onClick","isPresent"],"mappings":"uRAqOeA,UAvNf,WACgBC,cAAd,IACQC,EAAkBC,qBAAWC,KAA7BF,cAFgB,EAIQG,mBAASC,MAASC,OAAO,SAJjC,mBAIjBC,EAJiB,KAIPC,EAJO,OAKMJ,mBAASC,MAASC,OAAO,SAL/B,mBAKjBG,EALiB,aAMAL,mBAAS,KANT,mBAMjBM,EANiB,KAMXC,EANW,OAOgBP,mBAAS,GAPzB,mBAOHQ,GAPG,aAUtBV,qBAAWW,KADKC,GATM,EAShBC,SATgB,EASND,aAA4BE,GATtB,EASOC,cATP,EASsBD,kBAiG9C,OA5FAE,qBAAU,WAYR,OAXAjB,EAAc,mBAWP,WACLA,EAAc,OAEf,IAIHiB,qBAAU,WAER,OADAJ,EAAY,GACL,WACLA,EAAY,MAEb,IAIHI,qBAAU,YAER,uCAAC,8BAAAC,EAAA,6DACCC,QAAQC,IAAI,iBACRC,EAAU,CACZC,MAAO,CACLC,KAAM,EACNC,MAAO,IAETC,QAAS,CACPC,MAAOpB,EACPqB,KAAMnB,IATX,kBAawBoB,IAAM,CACzBC,IAAI,GAAD,OAAKC,IAAL,uBAAuBC,IAAIC,QAA3B,mBACHC,OAAQ,OACRxB,KAAMY,IAhBX,OAaOa,EAbP,OAkBGf,QAAQC,IAAIc,EAASzB,KAAK0B,KAC1BxB,EAAgBuB,EAASzB,KAAK2B,OAI9B1B,EAAQwB,EAASzB,KAAK0B,KAvBzB,uHAAD,yDA6BC,CAAC7B,EAAUE,IAkCZ,oCACE,yBAAK6B,UAAU,IAEb,yBAAKC,MAAM,gGACT,yBAAKA,MAAM,kBACT,4BACEA,MAAM,8LACNC,MAAOjC,EACPkC,SAAU,SAACC,GACTlC,EAAYkC,EAAEC,OAAOH,SAGvB,4BAAQA,MAAM,GAAGI,UAAQ,EAACC,UAAQ,GAAlC,oBAGA,4BAAQL,MAAM,WAAd,WACA,4BAAQA,MAAM,YAAd,YACA,4BAAQA,MAAM,SAAd,SACA,4BAAQA,MAAM,SAAd,SACA,4BAAQA,MAAM,OAAd,OACA,4BAAQA,MAAM,QAAd,QACA,4BAAQA,MAAM,QAAd,QACA,4BAAQA,MAAM,UAAd,UACA,4BAAQA,MAAM,aAAd,aACA,4BAAQA,MAAM,WAAd,WACA,4BAAQA,MAAM,YAAd,YACA,4BAAQA,MAAM,YAAd,aAGF,yBAAKD,MAAM,uFACT,yBACEA,MAAM,uBACNO,MAAM,6BACNC,QAAQ,aAER,0BAAMC,EAAE,oFAMlB,kBAAC,OAAD,CAAMV,UAAU,kBACd,kBAAC,WAAD,KACG5B,EAAKuC,KAAI,SAACC,GACT,OACE,yBAAKZ,UAAU,2CACb,yBAAKA,UAAU,wBAAwBY,EAAKC,aAA5C,KACA,yBAAKb,UAAU,6CACZ,IACAY,EAAKE,KAAKH,KAAI,SAACI,GACd,OAAIC,SAASD,EAAIE,OAASlD,MAASC,OAAO,MAEtC,yBACEkD,QAAS,WACPpC,QAAQC,IAAIgC,EAAKhD,MAASC,OAAO,OACjCU,EAAiBqC,IAEnBf,UAAU,OAhE9B,oCACE,yBAAKA,UAAU,gGAoEyB,WAAjBe,EAAII,UAEX,yBACED,QAAS,WACPpC,QAAQC,IAAIgC,GACZrC,EAAiBqC,IAEnBf,UAAU,OAjG9B,oCACE,yBAAKA,UAAU,6GAqGyB,UAAjBe,EAAII,UAEX,yBACED,QAAS,WACPxC,EAAiBqC,IAEnBf,UAAU,OArG9B,oCACE,yBAAKA,UAAU,+FAyGyB,SAAjBe,EAAII,UAEX,yBACED,QAAS,WACPxC,EAAiBqC,IAEnBf,UAAU,OAzG9B,oCACE,yBAAKA,UAAU,qGAkGI","file":"static/js/59.7d55b117.chunk.js","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport axios from \"axios\";\nimport { API } from \"../../backendapi\";\n\nimport Emp from \"../../helpers/auth/EmpProfile\";\n\nimport { Card, CardBody } from \"@windmill/react-ui\";\n\nimport { TopBarContext } from \"../../context/TopBarContext\";\n\nimport { useHistory } from \"react-router-dom\";\nimport { BottomBarContext } from \"../../context/BottomBarContext\";\nimport moment from \"moment\";\n\nfunction ViewAttendance() {\n  let history = useHistory();\n  const { setTopHeading } = useContext(TopBarContext);\n  // const [emparray, setEmparray] = useState([]);\n  const [themonth, setThemonth] = useState(moment().format(\"MMMM\"));\n  const [theyear, setTheyear] = useState(moment().format(\"YYYY\"));\n  const [data, setData] = useState([]);\n  const [totalResults, setTotalResults] = useState(0);\n\n  const { bbaropen, setBBarOpen, attendDetails, setAttendDetails } =\n    useContext(BottomBarContext);\n\n  // ----------------------Heading Use Effect-------------\n\n  useEffect(() => {\n    setTopHeading(\"View Attendance\");\n    // let tempcnt = 1;\n    // for (let i = 0; i < 20; i++) {\n    //   tempcnt++;\n    //   let temp = { isPresent: true, date: tempcnt };\n    //   emparray.push(temp);\n    // }\n    // for (let i = 0; i < 10; i++) {\n    //   let temp = { isPresent: false };\n    //   emparray.push(temp);\n    // }\n    return () => {\n      setTopHeading(\"\");\n    };\n  }, []);\n  // -----------------------------------------------------\n\n  // -------Enabling Bottom Bar----\n  useEffect(() => {\n    setBBarOpen(1);\n    return () => {\n      setBBarOpen(0);\n    };\n  }, []);\n  //   -------------------------------\n\n  //  data pull useeffect\n  useEffect(() => {\n    // Using an IIFE\n    (async function thegetter() {\n      console.log(\"getter called\");\n      let payload = {\n        pages: {\n          page: 1,\n          limit: 20,\n        },\n        filters: {\n          month: themonth,\n          year: theyear,\n        },\n      };\n      try {\n        let response = await axios({\n          url: `${API}/attendance/${Emp.getId()}/viewAttendance`,\n          method: \"POST\",\n          data: payload,\n        });\n        console.log(response.data.out);\n        setTotalResults(response.data.total);\n        // const { total, data } = response.data;\n        // console.log(response.data.out);\n\n        setData(response.data.out);\n      } catch (error) {\n        throw error;\n      }\n    })();\n    // setData(response.slice((page - 1) * resultsPerPage, page * resultsPerPage));\n  }, [themonth, theyear]);\n\n  // ------------------------------\n\n  const PresentSquare = () => {\n    return (\n      <>\n        <div className=\" relative w-4 h-4 bg-green-400 border-gray-600 border hover:border-black hover:bg-green-500 rounded-sm\"></div>\n      </>\n    );\n  };\n  const AbsentSquare = () => {\n    return (\n      <>\n        <div className=\"w-4 h-4 bg-red-500 border-gray-600 border hover:border-black hover:bg-red-800 rounded-sm\"></div>\n      </>\n    );\n  };\n  const LeaveSquare = () => {\n    return (\n      <>\n        <div className=\"w-4 h-4 bg-blue-500 border-blue-600 border hover:border-black hover:bg-red-800 rounded-sm\"></div>\n      </>\n    );\n  };\n  const GraySquare = () => {\n    return (\n      <>\n        <div className=\"w-4 h-4 bg-gray-200 border-gray-600 border hover:border-black hover:bg-red-800 rounded-sm\"></div>\n      </>\n    );\n  };\n\n  return (\n    <>\n      <div className=\"\">\n        {/* -------------------------------------Row 1 ------------------------------------------------------------------------------- */}\n        <div class=\"my-2 flex sm:flex-row flex-col items-start sm:items-center sm:justify-left h-full space-x-2 \">\n          <div class=\"relative mx-1 \">\n            <select\n              class=\" shadow-md h-full rounded border block appearance-none w-full bg-white border-gray-400 text-gray-700 py-2 px-4 pr-8 leading-tight focus:outline-none   focus:bg-white focus:border-gray-500\"\n              value={themonth}\n              onChange={(e) => {\n                setThemonth(e.target.value);\n              }}\n            >\n              <option value=\"\" disabled selected>\n                Select the Month\n              </option>\n              <option value=\"January\">January</option>\n              <option value=\"February\">February</option>\n              <option value=\"March\">March</option>\n              <option value=\"April\">March</option>\n              <option value=\"May\">May</option>\n              <option value=\"June\">June</option>\n              <option value=\"July\">July</option>\n              <option value=\"August\">August</option>\n              <option value=\"September\">September</option>\n              <option value=\"October\">October</option>\n              <option value=\"November\">November</option>\n              <option value=\"December\">December</option>\n            </select>\n\n            <div class=\"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700\">\n              <svg\n                class=\"fill-current h-4 w-4\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n                viewBox=\"0 0 20 20\"\n              >\n                <path d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\" />\n              </svg>\n            </div>\n          </div>\n        </div>\n      </div>\n      <Card className=\"my-8 shadow-md\">\n        <CardBody>\n          {data.map((user) => {\n            return (\n              <div className=\"flex flex-row justify-left items-center\">\n                <div className=\"mx-4 dark:text-white\">{user.employeeName}:</div>\n                <div className=\"flex flex-row items-center justify-center\">\n                  {\" \"}\n                  {user.days.map((day) => {\n                    if (parseInt(day.dayNo) > moment().format(\"DD\")) {\n                      return (\n                        <div\n                          onClick={() => {\n                            console.log(day, moment().format(\"DD\"));\n                            setAttendDetails(day);\n                          }}\n                          className=\"m-2\"\n                        >\n                          {GraySquare()}\n                        </div>\n                      );\n                    } else if (day.isPresent == \"Present\") {\n                      return (\n                        <div\n                          onClick={() => {\n                            console.log(day);\n                            setAttendDetails(day);\n                          }}\n                          className=\"m-2\"\n                        >\n                          {PresentSquare()}\n                        </div>\n                      );\n                    } else if (day.isPresent == \"Absent\") {\n                      return (\n                        <div\n                          onClick={() => {\n                            setAttendDetails(day);\n                          }}\n                          className=\"m-2\"\n                        >\n                          {AbsentSquare()}\n                        </div>\n                      );\n                    } else if (day.isPresent == \"Leave\") {\n                      return (\n                        <div\n                          onClick={() => {\n                            setAttendDetails(day);\n                          }}\n                          className=\"m-2\"\n                        >\n                          {LeaveSquare()}\n                        </div>\n                      );\n                    }\n                  })}\n                </div>\n              </div>\n            );\n          })}\n        </CardBody>\n      </Card>\n    </>\n  );\n}\n\nexport default ViewAttendance;\n"],"sourceRoot":""}