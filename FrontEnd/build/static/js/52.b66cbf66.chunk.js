(this["webpackJsonpwindmill-dashboard-react"]=this["webpackJsonpwindmill-dashboard-react"]||[]).push([[52],{1213:function(e,t,a){"use strict";a.r(t);var l=a(16),n=a(5),c=a.n(n),r=a(12),u=a(3),o=a(0),s=a.n(o),m=(a(20),a(9)),i=a.n(m),b=(a(207),a(18)),d=a(37),E=(a(36),a(2)),p=(a(215),a(10)),f=(a(199),a(202),a(44)),v=a(43);t.default=function(){var e=Object(o.useState)(!1),t=Object(u.a)(e,2),a=(t[0],t[1],Object(o.useState)(0)),n=Object(u.a)(a,2),m=(n[0],n[1],Object(o.useContext)(f.a)),g=(m.bbaropen,m.setBBarOpen),O=m.setAssetDetails,N=(m.assetdetails,Object(o.useState)(0)),y=Object(u.a)(N,2),j=(y[0],y[1],Object(o.useContext)(v.a)),x=(j.topheading,j.setTopHeading),h=Object(o.useState)(1),w=Object(u.a)(h,2),T=w[0],C=(w[1],Object(o.useState)([])),k=Object(u.a)(C,2),S=k[0],I=k[1],B=Object(o.useState)(!1),F=Object(u.a)(B,2),_=F[0],M=F[1],A=Object(o.useState)(!0),P=Object(u.a)(A,2),H=P[0],R=P[1],U=Object(o.useState)(""),L=Object(u.a)(U,2),D=L[0],z=(L[1],Object(o.useState)("")),G=Object(u.a)(z,2),J=G[0],V=(G[1],Object(o.useState)({_id:"",unitName:""})),q=Object(u.a)(V,2),Y=(q[0],q[1],Object(o.useState)({_id:"",customerName:""})),K=Object(u.a)(Y,2),Q=(K[0],K[1],Object(o.useState)({_id:"",accountName:""})),W=Object(u.a)(Q,2),X=(W[0],W[1],Object(o.useState)("")),Z=Object(u.a)(X,2),$=(Z[0],Z[1],Object(o.useState)(20)),ee=Object(u.a)($,2),te=ee[0],ae=ee[1],le=Object(o.useState)(!1),ne=Object(u.a)(le,2),ce=ne[0],re=ne[1],ue=Object(o.useState)([]),oe=Object(u.a)(ue,2),se=oe[0],me=oe[1],ie=Object(o.useState)(""),be=Object(u.a)(ie,2),de=be[0],Ee=be[1],pe=Object(o.useState)(""),fe=Object(u.a)(pe,2),ve=fe[0],ge=fe[1],Oe=Object(o.useState)(""),Ne=Object(u.a)(Oe,2),ye=Ne[0],je=Ne[1],xe=Object(o.useState)(""),he=Object(u.a)(xe,2),we=he[0],Te=he[1],Ce=Object(o.useState)(""),ke=Object(u.a)(Ce,2),Se=ke[0],Ie=ke[1],Be=Object(o.useState)(""),Fe=Object(u.a)(Be,2),_e=Fe[0],Me=Fe[1],Ae=Object(o.useState)([]),Pe=Object(u.a)(Ae,2),He=Pe[0],Re=Pe[1];Object(o.useEffect)((function(){return function(){g(0),O({})}}),[]),Object(o.useEffect)((function(){return x("Sell Scrap"),function(){x("")}}),[]),Object(o.useEffect)((function(){var e=(.01*parseFloat(we)+1)*parseFloat(ye);return Ie(e.toFixed(2)),function(){}}),[we,ye]),Object(o.useMemo)((function(){!function(){var e=Object(r.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getter called"),t={pages:{page:T,limit:5},filters:{type:"",location:"",condition:"Scrap",searchtype:"",searchquery:_e}},e.prev=2,e.next=5,i()({url:"".concat(p.API,"/inventory/").concat(b.a.getId(),"/getall"),method:"POST",data:t});case 5:a=e.sent,console.log(a.data.out),ae(a.data.total),I(a.data.out),e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(2),e.t0;case 14:console.log("totalResults",te);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}()()}),[T,_e,D,J,H]);var Ue=function(){var e=Object(r.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(se),""!=de&&""!=ve&&""!=ye&&""!=we){e.next=4;break}return alert("Fill Compulsory Fields"),e.abrupt("return");case 4:if(0!=se.length){e.next=7;break}return alert("No inventory selected"),e.abrupt("return");case 7:return t={selectedids:se,invoiceNum:de,scrapsaledate:ve,grossvalue:ye,gstperc:we,netvalue:Se},e.prev=8,e.next=11,i()({url:"".concat(p.API,"/inventory/").concat(b.a.getId(),"/invscrapsale"),method:"POST",data:t});case 11:e.sent,Ee(""),ge(""),je(""),Te(""),Ie(""),Me(""),Re([]),me([]),M(!0),R(!H),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(8),console.log(e.t0);case 27:case"end":return e.stop()}}),e,null,[[8,24]])})));return function(){return e.apply(this,arguments)}}();return s.a.createElement(s.a.Fragment,null,s.a.createElement(s.a.Fragment,null,s.a.createElement(E.Modal,{isOpen:ce,onClose:function(){return re(!1)},className:" dark:bg-gray-800 p-5  mx-10  bg-gray-50 text-gray-900 dark:text-white text-center  rounded-lg "},s.a.createElement(E.ModalHeader,{className:" w-87"},s.a.createElement("div",{className:"text-lg"},"Are you sure you want to sell all the selected inventory ?")),s.a.createElement(E.ModalBody,null,s.a.createElement("div",{className:" space-x-1"},s.a.createElement(E.Button,{layout:"outline",onClick:function(){re(!1),Ue()}},"Yes"),s.a.createElement(E.Button,{layout:"outline",onClick:function(){re(!1)}},"No"))))),s.a.createElement(s.a.Fragment,null,s.a.createElement(E.Modal,{isOpen:_,onClose:function(){return M(!0)}},s.a.createElement(E.ModalHeader,null,"Inventory Updated Successfully"),s.a.createElement(E.ModalBody,null),s.a.createElement(E.ModalFooter,null,s.a.createElement(E.Button,{className:"w-full sm:w-auto",onClick:function(){return M(!1)}},"Okay!")))),s.a.createElement("div",{className:"mb-64 mt-4"},s.a.createElement("div",{className:"flex flex-row mb-2"},s.a.createElement("div",{className:"w-3/4 text-lg font-semibold dark:text-white"},"Scrap Sale Information"),s.a.createElement("div",{className:"w-1/4 flex justify-end "},s.a.createElement(E.Button,{onClick:function(){re(!0)}},"Sell Scrap"))),s.a.createElement("hr",{className:"my-2"}),s.a.createElement("div",{className:"flex flex-col lg:flex-row  items-center justify-start lg:space-x-8"},s.a.createElement(E.Label,{className:"w-full "},s.a.createElement("span",null,"Invoice Number*"),s.a.createElement(E.Input,{className:"mt-1",type:"text",value:de,onChange:function(e){Ee(e.target.value)}})),s.a.createElement(E.Label,{className:"w-full"},s.a.createElement("span",null,"Date*"),s.a.createElement(E.Input,{className:"mt-1",type:"date",value:ve,onChange:function(e){ge(e.target.value)}})),s.a.createElement(E.Label,{className:"w-full my-3"},s.a.createElement("span",null,"Gross Value*"),s.a.createElement(E.Input,{className:"mt-1",type:"text",value:ye,onChange:function(e){je(e.target.value)}})),s.a.createElement(E.Label,{className:"w-full my-3"},s.a.createElement("span",null,"GST %*"),s.a.createElement(E.Input,{type:"text",className:"mt-1",name:"brand",value:we,onChange:function(e){Te(e.target.value)}}))),s.a.createElement("div",{className:"flex flex-col lg:flex-row  items-center justify-start lg:space-x-8"},s.a.createElement(E.Label,{className:"w-full "},s.a.createElement("span",null,"Net Value"),s.a.createElement(E.Input,{className:"mt-1",type:"text",readOnly:!0,value:Se}))),s.a.createElement(E.TableContainer,{className:"mt-4"},s.a.createElement("div",{className:"dark:text-gray-200 text-black text-sm flex space-x-2 items-center bg-gray-100 dark:bg-gray-800 p-2 rounded-md justify-start  w-full my-2 font-bold"},"Selected Items"),s.a.createElement(E.Table,null,s.a.createElement(E.TableHeader,null,s.a.createElement(E.TableRow,null,s.a.createElement(E.TableCell,null,"Sl No"),s.a.createElement(E.TableCell,null,"Type"),s.a.createElement(E.TableCell,null,"Model"),s.a.createElement(E.TableCell,null,"Serial Number"),s.a.createElement(E.TableCell,null,"Condition"))),s.a.createElement(E.TableBody,null,He.map((function(e,t){return s.a.createElement(E.TableRow,{key:t,className:"hover:shadow-lg hover:bg-blue-200 dark:hover:bg-gray-600"},s.a.createElement(E.TableCell,null,s.a.createElement("span",{className:"text-sm"},t+1)),s.a.createElement(E.TableCell,{className:""},s.a.createElement("div",null,s.a.createElement("p",{className:"font-semibold"},Object(d.capitalize)(e.type)))),s.a.createElement(E.TableCell,null,s.a.createElement("span",{className:"text-sm"},e.name)),s.a.createElement(E.TableCell,null,s.a.createElement("span",{className:"text-sm"},e.sno)),s.a.createElement(E.TableCell,null,s.a.createElement("span",{className:"text-sm"},e.condition)))}))))),s.a.createElement("div",{className:" text-lg font-semibold mt-4 "},"Inventory Picker"),s.a.createElement("div",{className:" w-full mt-2 rounded-lg bg-gray-200 dark:bg-gray-700 p-3 overflow-y-auto"},s.a.createElement("form",{onSubmit:function(e){e.preventDefault()}},s.a.createElement("input",{className:"block w-full pr-20 text-sm text-black dark:text-gray-300 dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:focus:shadow-outline-gray form-input",placeholder:"Enter Serial Number ",value:_e,onChange:function(e){Me(e.target.value)}})),s.a.createElement("div",{className:" mt-4"},s.a.createElement(E.TableContainer,{className:"mt-4"},s.a.createElement(E.Table,null,s.a.createElement(E.TableHeader,null,s.a.createElement("tr",null,s.a.createElement(E.TableCell,null,"Type"),s.a.createElement(E.TableCell,null,"Name"),s.a.createElement(E.TableCell,null,"Serial Number"),s.a.createElement(E.TableCell,null,"Select"))),s.a.createElement(E.TableBody,{className:""},S.filter((function(e){for(var t=0;t<se.length;t++)if(e._id==se[t])return 0;return 1})).map((function(e,t){return s.a.createElement(E.TableRow,{className:"hover:shadow-lg dark:hover:bg-gray-600  ",key:t,onClick:function(){}},s.a.createElement(E.TableCell,{className:"w-8"},s.a.createElement("div",{className:"flex items-center text-sm "},s.a.createElement("div",null,s.a.createElement("p",{className:"font-semibold"},Object(d.capitalize)(e.type))))),s.a.createElement(E.TableCell,{className:""},s.a.createElement("div",{className:" overflow-auto text-sm"},e.name)),s.a.createElement(E.TableCell,null,s.a.createElement("div",{className:"w-64 overflow-auto text-sm"},e.sno)),s.a.createElement(E.TableCell,null,""!=e.sno?s.a.createElement(E.Button,{layout:"outline",className:"dark:border-green-700 border-green-400",onClick:function(){Re([].concat(Object(l.a)(He),[e])),me([].concat(Object(l.a)(se),[e._id]))}},"Select"):null))})))))))))}},199:function(e,t,a){"use strict";a.d(t,"a",(function(){return E}));var l=a(5),n=a.n(l),c=a(12),r=a(3),u=a(0),o=a.n(u),s=a(9),m=a.n(s),i=a(2),b=a(196),d=(a(198),a(10));function E(e){var t=e.isModalOpen,a=e.setIsModalOpen,l=e.unit,s=e.setUnit,E=e.account,p=e.setAccount,f=e.customer,v=e.setCustomer,g=Object(u.useState)([]),O=Object(r.a)(g,2),N=O[0],y=O[1],j=Object(u.useState)([]),x=Object(r.a)(j,2),h=x[0],w=x[1],T=Object(u.useState)([]),C=Object(r.a)(T,2),k=C[0],S=C[1],I=Object(u.useState)(0),B=Object(r.a)(I,2),F=B[0],_=B[1],M=Object(u.useState)(""),A=Object(r.a)(M,2),P=A[0],H=A[1],R=function(e){H(e.target.value)},U=function(){var e=Object(c.a)(n.a.mark((function e(t){var a,l;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={search:P,role:1},e.prev=2,e.next=5,m()({url:"".concat(d.API,"/customer/customers"),method:"POST",data:a});case 5:l=e.sent,console.log(l.data),y(l.data),e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(2),e.t0;case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();Object(u.useEffect)((function(){!function(){var e=Object(c.a)(n.a.mark((function e(){var t,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={search:P,role:1},e.prev=1,e.next=4,m()({url:"".concat(d.API,"/customer/customers"),method:"POST",data:t});case 4:a=e.sent,console.log(a.data),y(a.data),e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(1),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}()()}),[]);var L=function(){var e=Object(c.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v({_id:t._id,customerName:t.name}),p({_id:"",accountName:""}),s({_id:"",unitName:""}),e.prev=3,e.next=6,m.a.post("".concat(d.API,"/customer/accounts"),{customerId:t._id});case 6:a=e.sent,console.log(a.data),w(a.data),_(1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),console.log("axiosErr",e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(c.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),p({_id:t._id,accountName:t.name}),s({_id:"",unitName:""}),e.prev=3,e.next=6,m.a.post("".concat(d.API,"/customer/units"),{accountId:t._id});case 6:a=e.sent,console.log(a.data),S(a.data),_(2),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),console.log("axiosErr",e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(c.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),s({_id:t._id,unitName:t.unitName});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return o.a.createElement(o.a.Fragment,null,o.a.createElement(i.Modal,{isOpen:t,onClose:function(){return a(!1)}},o.a.createElement(i.ModalHeader,null,"Select"," ",0==F?o.a.createElement(o.a.Fragment,null,"Customer"):1==F?o.a.createElement(o.a.Fragment,null,"Account"):o.a.createElement(o.a.Fragment,null,"Unit")),o.a.createElement(i.ModalBody,{className:"overflow-y-scroll h-64"},o.a.createElement(b.d,{selectedIndex:F,onSelect:function(e){return _(e)}},o.a.createElement(b.b,null,o.a.createElement(b.a,null,"Customer"),o.a.createElement(b.a,null,"Account"),o.a.createElement(b.a,null,"Unit")),o.a.createElement(b.c,null,o.a.createElement(i.TableContainer,null,o.a.createElement(i.Table,null,o.a.createElement(i.TableHeader,null,o.a.createElement("tr",null,o.a.createElement(i.TableCell,null,"Customer")),o.a.createElement("tr",null,o.a.createElement(i.TableCell,null,o.a.createElement("form",{onSubmit:U},o.a.createElement("input",{className:"block w-full pr-20 text-sm text-black dark:text-gray-300 dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:focus:shadow-outline-gray form-input",placeholder:"Search Customers",onChange:R}))))),o.a.createElement(i.TableBody,null,N.map((function(e,t){return o.a.createElement(i.TableRow,{key:t,className:"hover:bg-purple-200 cursor-pointer",onClick:function(){return L(e)}},o.a.createElement(i.TableCell,null,o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement("p",{className:"font-semibold"},e.name)))))})))),o.a.createElement(i.TableFooter,null))),o.a.createElement(b.c,null,o.a.createElement(i.TableContainer,null,o.a.createElement(i.Table,null,o.a.createElement(i.TableHeader,null,o.a.createElement("tr",null,o.a.createElement(i.TableCell,null,"Account"))),o.a.createElement(i.TableBody,null,h.map((function(e,t){return o.a.createElement(i.TableRow,{key:t,className:"hover:bg-purple-200 cursor-pointer",onClick:function(){return D(e)}},o.a.createElement(i.TableCell,null,o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement("p",{className:"font-semibold"},e.name)))))})))),o.a.createElement(i.TableFooter,null))),o.a.createElement(b.c,null,o.a.createElement(i.TableContainer,null,o.a.createElement(i.Table,{className:" w-full overflow-y-scroll"},o.a.createElement(i.TableHeader,null,o.a.createElement("tr",null,o.a.createElement(i.TableCell,null,"Unit"))),o.a.createElement(i.TableBody,null,k.map((function(e,t){return o.a.createElement(i.TableRow,{key:t,className:"hover:bg-purple-200 cursor-pointer",onClick:function(){return z(e)}},o.a.createElement(i.TableCell,null,o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement("p",{className:"font-semibold"},e.unitName)))))})))),o.a.createElement(i.TableFooter,null))))),o.a.createElement(i.ModalFooter,null,o.a.createElement(i.Badge,{className:"mx-2 text-md",type:"success"},"Customer: ",f.customerName),o.a.createElement(i.Badge,{className:"mx-2 text-md",type:"success"},"Account : ",E.accountName),o.a.createElement(i.Badge,{className:"mx-2 text-md",type:"success"},"Unit: ",l.unitName),o.a.createElement(i.Button,{className:"w-full sm:w-auto",onClick:function(){return a(!1)}},"Select"))))}}}]);
//# sourceMappingURL=52.b66cbf66.chunk.js.map