(this["webpackJsonpwindmill-dashboard-react"]=this["webpackJsonpwindmill-dashboard-react"]||[]).push([[36],{1295:function(e,a,t){"use strict";t.r(a);var l=t(5),n=t.n(l),c=t(12),r=t(19),o=t(6),s=t(3),u=t(0),m=t.n(u),i=(t(9),t(10),t(18)),p=(t(192),t(194),t(2)),d=t(24),f=(t(202),t(196),t(43)),E=(t(206),t(207),t(7));a.default=function(){Object(E.g)();var e=Object(u.useState)(0),a=Object(s.a)(e,2),t=a[0],l=a[1],b=Object(u.useState)("Male"),v=Object(s.a)(b,2),N=v[0],w=v[1],h=Object(u.useState)(""),x=Object(s.a)(h,2),g=x[0],O=x[1],y=Object(u.useState)("All"),C=Object(s.a)(y,2),j=C[0],k=C[1],T=Object(u.useState)(!1),I=Object(s.a)(T,2),S=I[0],L=I[1],P=Object(u.useState)(!1),A=Object(s.a)(P,2),F=(A[0],A[1],Object(u.useState)(!1)),M=Object(s.a)(F,2),H=M[0],B=M[1],D=Object(u.useContext)(f.a).setTopHeading,_=Object(u.useState)({employeeID:"",email:"",password:"",confpassword:"",employeeName:"",address:"",district:"Trivandrum",state:"Kerala",pincode:"",contactPerson:"",contactNo:"",contactNoLand:"",contactPersonOcc:"",altContact:"",WhatsappNo:""}),K=Object(s.a)(_,2),R=K[0],W=K[1],z=Object(u.useState)({email:"",name:"",enc_password:"",confpassword:""}),J=Object(s.a)(z,2),q=J[0],U=J[1];Object(u.useEffect)((function(){return D("Add Employee"),function(){D("")}}),[]);var G=function(e){return function(a){W(Object(o.a)(Object(o.a)({},R),{},Object(r.a)({},e,a.target.value)))}},Q=function(){var e=Object(c.a)(n.a.mark((function e(){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(R.password===R.confpassword){e.next=3;break}return U(Object(o.a)(Object(o.a)({},q),{},{confpassword:"Confirm password does not match"})),e.abrupt("return");case 3:if(!(""===R.employeeID|""===R.employeeName|""===R.email|""===R.password|""===R.confpassword)){e.next=6;break}return B(!0),e.abrupt("return");case 6:a={employeeID:R.employeeID,employeeName:R.employeeName,email:R.email,password:R.password,role:t,address:R.address,district:R.district,state:R.state,pincode:R.pincode,contactPerson:R.contactPerson,contactNo:R.contactNo,contactNoLand:R.contactNoLand,contactPersonOcc:R.contactPersonOcc,whatsappNo:R.WhatsappNo,sex:N,dob:g,location:j},console.log(a),Object(d.c)(a,"admin/".concat(i.a.getId(),"/signup")).then((function(e){console.log("Signed Up",e._id),L(!0),U({employeeID:"",username:"",email:"",customerName:"",enc_password:"",confpassword:""}),W({employeeID:"",email:"",password:"",confpassword:"",employeeName:"",address:"",district:"Trivandrum",state:"Kerala",pincode:"",contactPerson:"",contactNo:"",contactNoLand:"",contactPersonOcc:"",altContact:"",WhatsappNo:""})})).catch((function(e){console.log("err",e),U(Object(o.a)({},e))}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return m.a.createElement(m.a.Fragment,null,function(){return m.a.createElement("div",{className:"px-4 py-3 mt-4 mb-8 bg-white rounded-lg shadow-md dark:bg-gray-800"},m.a.createElement(p.Label,{className:"font-bold"},m.a.createElement("span",null,"Add Employee")),m.a.createElement("hr",{className:"mb-5 mt-2"}),m.a.createElement("div",{className:"flex-row flex  space-x-3"},m.a.createElement("div",{className:"flex flex-col w-full"},m.a.createElement(p.Label,{className:"w-full"},m.a.createElement("span",null,"Employee ID*"),m.a.createElement(p.Input,{className:"mt-1",type:"text",value:R.employeeID,onChange:G("employeeID")})),m.a.createElement(p.HelperText,{valid:!1},q.employeeID))),m.a.createElement("div",{className:"flex-row flex  space-x-3"},m.a.createElement("div",{className:"flex flex-col w-full"},m.a.createElement(p.Label,{className:"w-full"},m.a.createElement("span",null,"Select Account Type*"),m.a.createElement(p.Select,{className:"mt-1",onChange:function(e){l(parseInt(e.target.value))}},m.a.createElement("option",{value:"0"},"Admin"),m.a.createElement("option",{value:"11"},"Engineer"),m.a.createElement("option",{value:"12"},"Assistant"),m.a.createElement("option",{value:"13"},"Store Keeper"),m.a.createElement("option",{value:"14"},"Coordinator"),m.a.createElement("option",{value:"15"},"Accounts"),m.a.createElement("option",{value:"16"},"Operating Store Keeper")))),m.a.createElement("div",{className:"flex flex-col w-full"},m.a.createElement(p.Label,{className:"w-full"},m.a.createElement("span",null,"Location"),m.a.createElement(p.Select,{className:"mt-1",onChange:function(e){k(e.target.value)}},m.a.createElement("option",{value:"All"},"All"),m.a.createElement("option",{value:"Trivandrum"},"Trivandrum"),m.a.createElement("option",{value:"Kottayam"},"Kottayam"),m.a.createElement("option",{value:"Kozhikode"},"Kozhikode")))),m.a.createElement("div",{className:"flex flex-col w-full"},m.a.createElement(p.Label,{className:"w-full"},m.a.createElement("span",null,"Employee Name*"),m.a.createElement(p.Input,{className:"mt-1",type:"text",value:R.employeeName,onChange:G("employeeName")})),m.a.createElement(p.HelperText,{valid:!1},q.employeeName)),m.a.createElement("div",{className:"flex flex-col w-full"},m.a.createElement(p.Label,{className:"w-full "},m.a.createElement("span",null,"Email*"),m.a.createElement(p.Input,{className:"mt-1",type:"email",placeholder:"",value:R.email,onChange:G("email")})),m.a.createElement(p.HelperText,{valid:!1},q.email))),m.a.createElement("div",{className:"flex-row flex space-x-3 "},m.a.createElement(p.Label,{className:"w-full mt-4"},m.a.createElement("span",null,"Password*"),m.a.createElement(p.Input,{className:"mt-1",placeholder:"",type:"password",value:R.password,onChange:G("password")})),m.a.createElement(p.HelperText,{valid:!1},q.enc_password),m.a.createElement("div",{className:"flex flex-col w-full"},m.a.createElement(p.Label,{className:"w-full mt-4"},m.a.createElement("span",null,"Confirm password*"),m.a.createElement(p.Input,{className:"mt-1",type:"password",value:R.confpassword,onChange:(e="confpassword",function(a){W(Object(o.a)(Object(o.a)({},R),{},Object(r.a)({},e,a.target.value))),R.password!==a.target.value?U(Object(o.a)(Object(o.a)({},q),{},{confpassword:"Confirm password does not match"})):U(Object(o.a)(Object(o.a)({},q),{},{confpassword:""}))})})),m.a.createElement(p.HelperText,{valid:!1},q.confpassword))),m.a.createElement(p.Label,{className:"font-bold mt-5 mb-2"},m.a.createElement("span",null,"Additional Information")),m.a.createElement("hr",null),m.a.createElement("div",{className:"flex-row flex space-x-3 mt-3 mb-2"},m.a.createElement("div",{className:"flex flex-col w-full"},m.a.createElement(p.Label,{className:"w-full"},m.a.createElement("span",null,"Sex"),m.a.createElement(p.Select,{className:"mt-1",onChange:function(e){w(e.target.value)}},m.a.createElement("option",{value:"Male"},"Male"),m.a.createElement("option",{value:"Female"},"Female"),m.a.createElement("option",{value:"Other"},"Other")))),m.a.createElement("div",{className:"flex flex-col w-full"},m.a.createElement(p.Label,{className:"w-full"},m.a.createElement("span",null,"Contact Number(Mobile)"),m.a.createElement(p.Input,{className:"mt-1",value:R.contactNo,onChange:G("contactNo")}))," ",10!=R.contactNo.length&&0!=R.contactNo?m.a.createElement(m.a.Fragment,null,m.a.createElement(p.HelperText,{valid:!1},"Phone number shound be 10 digits")):null),m.a.createElement("div",{className:"flex flex-col w-full"},m.a.createElement(p.Label,{className:"w-full"},m.a.createElement("span",null,"Contact Number(Landline)"),m.a.createElement(p.Input,{className:"mt-1",value:R.contactNoLand,onChange:G("contactNoLand")}))," "),m.a.createElement("div",{className:"flex flex-col w-full"},m.a.createElement(p.Label,{className:"w-full"},m.a.createElement("span",null,"Whatsapp Number"),m.a.createElement(p.Input,{className:"mt-1",value:R.WhatsappNo,onChange:G("WhatsappNo")})),10!=R.WhatsappNo.length&&0!=R.WhatsappNo?m.a.createElement(m.a.Fragment,null,m.a.createElement(p.HelperText,{valid:!1},"Phone number shound be 10 digits")):null)),m.a.createElement("div",{className:"flex-row flex space-x-3 mt-3 mb-2"},m.a.createElement("div",{className:"flex flex-col w-full"},m.a.createElement(p.Label,{className:"w-full"},m.a.createElement("span",null,"DOB"),m.a.createElement(p.Input,{className:"mt-1",type:"date",name:"brand",value:g,onChange:function(e){O(e.target.value)}}))),m.a.createElement("div",{className:"flex flex-col w-full"},m.a.createElement(p.Label,{className:"w-full"},m.a.createElement("span",null,"Father/Husband Name"),m.a.createElement(p.Input,{className:"mt-1",type:"text",value:R.contactPerson,onChange:G("contactPerson")}))," "),m.a.createElement("div",{className:"flex flex-col w-full"},m.a.createElement(p.Label,{className:"w-full"},m.a.createElement("span",null,"Father/Husband's Occupation"),m.a.createElement(p.Input,{className:"mt-1",value:R.contactPersonOcc,onChange:G("contactPersonOcc")}))," ")),m.a.createElement(p.Label,{className:"my-2"},m.a.createElement("span",null,"Address"),m.a.createElement(p.Input,{className:"mt-1",type:"text",value:R.address,onChange:G("address")}))," ",m.a.createElement("div",{className:"flex-row flex space-x-3 my-2"},m.a.createElement("div",{className:"flex flex-col w-full"},m.a.createElement(p.Label,{className:"w-full"},m.a.createElement("span",null,"District"),m.a.createElement(p.Input,{className:"mt-1",type:"text",value:R.district,onChange:G("district")}))," "),m.a.createElement("div",{className:"flex flex-col w-full"},m.a.createElement(p.Label,{className:"w-full"},m.a.createElement("span",null,"State"),m.a.createElement(p.Input,{className:"mt-1",type:"text",value:R.state,onChange:G("state")}))," "),m.a.createElement("div",{className:"flex flex-col w-full"},m.a.createElement(p.Label,{className:"w-full"},m.a.createElement("span",null,"PIN code"),m.a.createElement(p.Input,{className:"mt-1",type:"text",value:R.pincode,onChange:G("pincode")}))," ",6!=R.pincode.length&&0!=R.pincode?m.a.createElement(m.a.Fragment,null,m.a.createElement(p.HelperText,{valid:!1},"PIN shound be 6 digits")):null)),m.a.createElement(p.Button,{onClick:Q,"aria-label":"Notifications","aria-haspopup":"true",className:"mt-4"},"Add Employee"));var e}(),m.a.createElement(m.a.Fragment,null,m.a.createElement(p.Modal,{isOpen:S,onClose:function(){return L(!1)}},m.a.createElement(p.ModalHeader,null,0===t?m.a.createElement(m.a.Fragment,null,"Admin "):null,11===t?m.a.createElement(m.a.Fragment,null,"Engineer "):null,12===t?m.a.createElement(m.a.Fragment,null,"Assistant "):null,"Created Successfully!"),m.a.createElement(p.ModalBody,null),m.a.createElement(p.ModalFooter,null,m.a.createElement(p.Button,{className:"w-full sm:w-auto",onClick:function(){return L(!1)}},"Okay!")))),m.a.createElement(m.a.Fragment,null,m.a.createElement(p.Modal,{isOpen:H,onClose:function(){return B(!1)}},m.a.createElement(p.ModalHeader,null,"Required fields are not filled!"),m.a.createElement(p.ModalBody,null),m.a.createElement(p.ModalFooter,null,m.a.createElement(p.Button,{className:"w-full sm:w-auto",onClick:function(){return B(!1)}},"Okay!")))))}},202:function(e,a,t){"use strict";t.d(a,"a",(function(){return f}));var l=t(5),n=t.n(l),c=t(12),r=t(3),o=t(0),s=t.n(o),u=t(9),m=t.n(u),i=t(2),p=t(196),d=(t(199),t(10));function f(e){var a=e.isModalOpen,t=e.setIsModalOpen,l=(e.customer,e.setCustomer),u=Object(o.useState)([]),f=Object(r.a)(u,2),E=f[0],b=f[1],v=Object(o.useState)(0),N=Object(r.a)(v,2),w=N[0],h=N[1],x=Object(o.useState)(""),g=Object(r.a)(x,2),O=g[0],y=g[1],C=Object(o.useState)(""),j=Object(r.a)(C,2),k=(j[0],j[1],function(e){y(e.target.value)}),T=function(){var e=Object(c.a)(n.a.mark((function e(a){var t,l;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),t={search:O,role:1},e.prev=2,e.next=5,m()({url:"".concat(d.API,"/customer/customers"),method:"POST",data:t});case 5:l=e.sent,console.log(l.data),b(l.data),e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(2),e.t0;case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(a){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){!function(){var e=Object(c.a)(n.a.mark((function e(){var a,t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={search:O,role:1},e.prev=1,e.next=4,m()({url:"".concat(d.API,"/customer/customers"),method:"POST",data:a});case 4:t=e.sent,console.log(t.data),b(t.data),e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(1),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}()()}),[]);var I=function(){var e=Object(c.a)(n.a.mark((function e(a){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l({_id:a._id,customerName:a.name}),t(!1);case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return s.a.createElement(s.a.Fragment,null,s.a.createElement(i.Modal,{isOpen:a,onClose:function(){return t(!1)}},s.a.createElement(i.ModalHeader,null,"Select Customer"),s.a.createElement(i.ModalBody,{className:"overflow-y-scroll h-64"},s.a.createElement(p.d,{selectedIndex:w,onSelect:function(e){return h(e)}},s.a.createElement(p.b,null,s.a.createElement(p.a,null,"Customer")),s.a.createElement(p.c,null,s.a.createElement(i.TableContainer,null,s.a.createElement(i.Table,null,s.a.createElement(i.TableHeader,null,s.a.createElement("tr",null,s.a.createElement(i.TableCell,null,"Customer")),s.a.createElement("tr",null,s.a.createElement(i.TableCell,null,s.a.createElement("form",{onSubmit:T},s.a.createElement("input",{className:"block w-full pr-20 text-sm text-black dark:text-gray-300 dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:focus:shadow-outline-gray form-input",placeholder:"Search Customers",onChange:k}))))),s.a.createElement(i.TableBody,null,E.map((function(e,a){return s.a.createElement(i.TableRow,{key:a,className:"hover:bg-purple-200 cursor-pointer",onClick:function(){return I(e)}},s.a.createElement(i.TableCell,null,s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("p",{className:"font-semibold"},e.name)))))})))),s.a.createElement(i.TableFooter,null))))),s.a.createElement(i.ModalFooter,null,s.a.createElement(i.Button,{className:"w-full sm:w-auto",onClick:function(){t(!1)}},"Select"))))}},206:function(e,a,t){"use strict";t.d(a,"a",(function(){return o}));var l=t(9),n=t.n(l),c=t(10),r=t(18),o=function(e){return n.a.post("".concat(c.API,"/unit/").concat(r.a.getId(),"/create"),e).then((function(e){return console.log("h",e.data),e.data})).catch((function(e){if(console.log("ERRRROs"),e.response)throw console.log(e.response.data),console.log(e.response.status),e.response.data.errors}))}},207:function(e,a,t){"use strict";t.d(a,"a",(function(){return f}));var l=t(5),n=t.n(l),c=t(12),r=t(3),o=t(0),s=t.n(o),u=t(9),m=t.n(u),i=t(2),p=t(196),d=(t(199),t(10));function f(e){var a=e.isModalOpen,t=e.setIsModalOpen,l=e.account,u=e.setAccount,f=e.customer,E=e.setCustomer,b=Object(o.useState)([]),v=Object(r.a)(b,2),N=v[0],w=v[1],h=Object(o.useState)([]),x=Object(r.a)(h,2),g=x[0],O=x[1],y=Object(o.useState)(0),C=Object(r.a)(y,2),j=C[0],k=C[1],T=Object(o.useState)(""),I=Object(r.a)(T,2),S=I[0],L=I[1],P=function(e){L(e.target.value)},A=function(){var e=Object(c.a)(n.a.mark((function e(a){var t,l;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),t={search:S,role:1},e.prev=2,e.next=5,m()({url:"".concat(d.API,"/customer/customers"),method:"POST",data:t});case 5:l=e.sent,console.log(l.data),w(l.data),e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(2),e.t0;case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(a){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){!function(){var e=Object(c.a)(n.a.mark((function e(){var a,t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={search:S,role:1},e.prev=1,e.next=4,m()({url:"".concat(d.API,"/customer/customers"),method:"POST",data:a});case 4:t=e.sent,console.log(t.data),w(t.data),e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(1),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}()()}),[]);var F=function(){var e=Object(c.a)(n.a.mark((function e(a){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E({_id:a._id,customerName:a.name}),u({_id:"",accountName:""}),e.prev=2,e.next=5,m.a.post("".concat(d.API,"/customer/accounts"),{customerId:a._id});case 5:t=e.sent,console.log(t.data),O(t.data),k(1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.log("axiosErr",e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(a){return e.apply(this,arguments)}}(),M=function(){var e=Object(c.a)(n.a.mark((function e(a){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(a),u({_id:a._id,accountName:a.name});case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return s.a.createElement(s.a.Fragment,null,s.a.createElement(i.Modal,{isOpen:a,onClose:function(){return t(!1)}},s.a.createElement(i.ModalHeader,null,"Select ",0==j?s.a.createElement(s.a.Fragment,null,"Customer"):s.a.createElement(s.a.Fragment,null,"Account")),s.a.createElement(i.ModalBody,{className:"overflow-y-scroll h-64"},s.a.createElement(p.d,{selectedIndex:j,onSelect:function(e){return k(e)}},s.a.createElement(p.b,null,s.a.createElement(p.a,null,"Customer"),s.a.createElement(p.a,null,"Account")),s.a.createElement(p.c,null,s.a.createElement(i.TableContainer,null,s.a.createElement(i.Table,null,s.a.createElement(i.TableHeader,null,s.a.createElement("tr",null,s.a.createElement(i.TableCell,null,"Customer")),s.a.createElement("tr",null,s.a.createElement(i.TableCell,null,s.a.createElement("form",{onSubmit:A},s.a.createElement("input",{className:"block w-full pr-20 text-sm text-black dark:text-gray-300 dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:focus:shadow-outline-gray form-input",placeholder:"Search Customers",onChange:P}))))),s.a.createElement(i.TableBody,null,N.map((function(e,a){return s.a.createElement(i.TableRow,{key:a,className:"hover:bg-purple-200 cursor-pointer",onClick:function(){return F(e)}},s.a.createElement(i.TableCell,null,s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("p",{className:"font-semibold"},e.name)))))})))),s.a.createElement(i.TableFooter,null))),s.a.createElement(p.c,null,s.a.createElement(i.TableContainer,null,s.a.createElement(i.Table,null,s.a.createElement(i.TableHeader,null,s.a.createElement("tr",null,s.a.createElement(i.TableCell,null,"Account"))),s.a.createElement(i.TableBody,null,g.map((function(e,a){return s.a.createElement(i.TableRow,{key:a,className:"hover:bg-purple-200 cursor-pointer",onClick:function(){return M(e)}},s.a.createElement(i.TableCell,null,s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("p",{className:"font-semibold"},e.name)))))})))),s.a.createElement(i.TableFooter,null))))),s.a.createElement(i.ModalFooter,null,s.a.createElement(i.Badge,{className:"mx-2 text-md",type:"success"},"Customer: ",f.customerName),s.a.createElement(i.Badge,{className:"mx-2 text-md",type:"success"},"Account : ",l.accountName),s.a.createElement(i.Button,{className:"w-full sm:w-auto",onClick:function(){t(!1),O([])}},"Select"))))}}}]);
//# sourceMappingURL=36.f2da36c8.chunk.js.map