(this["webpackJsonpwindmill-dashboard-react"]=this["webpackJsonpwindmill-dashboard-react"]||[]).push([[71],{1218:function(e,t,a){"use strict";a.r(t);var l=a(19),n=a(6),c=a(5),r=a.n(c),s=a(12),o=a(3),u=a(0),m=a.n(u),d=a(20),i=a.n(d),b=a(9),p=a.n(b),f=a(18),E=(a(36),a(2)),v=a(10),g=(a(202),a(44)),O=a(43);a(37);t.default=function(){var e=Object(u.useContext)(g.a),t=(e.bbaropen,e.setBBarOpen),a=e.setAssetDetails,c=(e.assetdetails,Object(u.useState)(0)),d=Object(o.a)(c,2),b=d[0],j=d[1],w=Object(u.useContext)(O.a),x=(w.topheading,w.setTopHeading),h=Object(u.useState)(!1),N=Object(o.a)(h,2),y=(N[0],N[1],Object(u.useState)(1)),S=Object(o.a)(y,2),C=S[0],k=S[1],T=Object(u.useState)([]),D=Object(o.a)(T,2),M=D[0],I=D[1],A=Object(u.useState)(!0),L=Object(o.a)(A,2),B=L[0],P=L[1],R=Object(u.useState)(""),Y=Object(o.a)(R,2),F=Y[0],H=Y[1],_=Object(u.useState)(""),J=Object(o.a)(_,2),U=J[0],z=(J[1],Object(u.useState)("")),q=Object(o.a)(z,2),G=(q[0],q[1],Object(u.useState)({})),K=Object(o.a)(G,2),Q=K[0],V=(K[1],Object(u.useState)("")),W=Object(o.a)(V,2),X=(W[0],W[1],Object(u.useState)("")),Z=Object(o.a)(X,2),$=(Z[0],Z[1],Object(u.useState)("")),ee=Object(o.a)($,2),te=(ee[0],ee[1],Object(u.useState)(!1)),ae=Object(o.a)(te,2),le=ae[0],ne=ae[1],ce=Object(u.useState)(!1),re=Object(o.a)(ce,2),se=re[0],oe=re[1],ue=Object(u.useState)(""),me=Object(o.a)(ue,2),de=me[0],ie=me[1],be=Object(u.useState)(20),pe=Object(o.a)(be,2),fe=pe[0],Ee=pe[1],ve=Object(u.useState)(!1),ge=Object(o.a)(ve,2),Oe=ge[0],je=ge[1];Object(u.useEffect)((function(){return function(){t(0),a({})}}),[]),Object(u.useEffect)((function(){return x("Leave History"),function(){x("")}}),[]),Object(u.useEffect)((function(){!function(){var e=Object(s.a)(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getter called"),t={pages:{page:C,limit:10},filters:{status:F}},e.prev=2,e.next=5,p()({url:"".concat(v.API,"/leave/").concat(f.a.getId(),"/getall"),method:"POST",data:t});case 5:a=e.sent,console.log(a.data.out),Ee(a.data.total),console.log(U,"LOCATIO!!!"),console.log("response.data.out",a.data.out),I(a.data.out),e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(2),e.t0;case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}()()}),[C,F,B]);var we=function(e){return function(t){je(Object(n.a)(Object(n.a)({},Oe),{},Object(l.a)({},e,t.target.value)))}};return console.log(Q),m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"mb-64 mt-4"},m.a.createElement(m.a.Fragment,null,m.a.createElement(E.Modal,{isOpen:le,onClose:function(){return ne(!1)}},m.a.createElement(E.ModalHeader,null,"Leave Information."),m.a.createElement(E.ModalBody,null,m.a.createElement("div",null,m.a.createElement("div",{className:"flex-row flex space-x-3 w-full"},m.a.createElement("div",{className:"flex flex-col w-full"},m.a.createElement(E.Label,{className:"w-full"},m.a.createElement("span",null,"Start Date*"),m.a.createElement(E.Input,{className:"mt-1",type:"date",value:Oe.startdate,onChange:we("startdate")}))),m.a.createElement("div",{className:"flex flex-col w-full"},m.a.createElement(E.Label,{className:"w-full"},m.a.createElement("span",null,"End Date*"),m.a.createElement(E.Input,{className:"mt-1",type:"date",value:Oe.enddate,onChange:we("enddate")}))),m.a.createElement("div",{className:"flex flex-col w-full"},m.a.createElement(E.Label,{className:"w-full"},m.a.createElement("div",null,"Number of Days"),m.a.createElement("div",{className:"text-xl font-semibold my-2 p-2 mx-5 text-black dark:text-white"},""!=Oe.startdate&&""!=Oe.enddate?Math.floor((Date.parse(Oe.enddate)-Date.parse(Oe.startdate))/864e5)>=0?Math.floor((Date.parse(Oe.enddate)-Date.parse(Oe.startdate))/864e5)+1:m.a.createElement(m.a.Fragment,null,"Invalid Dates"):null)))),m.a.createElement("div",{className:"flex-row flex space-x-3 my-2"},m.a.createElement("div",{className:"flex flex-col w-full "},m.a.createElement(E.Label,{className:"w-full"},m.a.createElement("span",null,"Reason"),m.a.createElement("div",{className:"text-lg"},Oe.reason)))))),m.a.createElement(E.ModalFooter,null,m.a.createElement(E.Button,{className:"w-full sm:w-auto",onClick:Object(s.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==Oe.startdate){e.next=5;break}return ie("Start Date necessary"),oe(!0),console.log("missing inputs"),e.abrupt("return");case 5:if(""!==Oe.enddate){e.next=10;break}return ie("End Date necessary"),oe(!0),console.log("missing inputs"),e.abrupt("return");case 10:if(!(Math.floor((Date.parse(Oe.enddate)-Date.parse(Oe.startdate))/864e5)<0)){e.next=15;break}return ie("Invalid Date"),oe(!0),console.log("invalid inputs"),e.abrupt("return");case 15:return t={id:Oe._id,update:{employeeName:Oe.employeeName,employeeId:Oe.employeeId,reason:Oe.reason,startdate:Oe.startdate,enddate:Oe.enddate,status:"Approved"}},console.log(t),e.next=19,p()({url:"".concat(v.API,"/leave/").concat(f.a.getId(),"/approve"),method:"POST",data:t}).then((function(e){console.log("Updated",e),ne(!1),ie("Leave Approved"),oe(!0)})).catch((function(e){ie("Error"),oe(!0),console.log("err",e)}));case 19:P(!B);case 20:case"end":return e.stop()}}),e)})))},"Approve"),m.a.createElement(E.Button,{className:"w-full sm:w-auto",onClick:Object(s.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("slected",Oe),t={id:Oe._id,update:{status:"Rejected"}},e.next=4,p()({url:"".concat(v.API,"/leave/").concat(f.a.getId(),"/approve"),method:"POST",data:t}).then((function(e){console.log("Updated",e),ne(!1),ie("Leave Rejected"),oe(!0)})).catch((function(e){ie("Error"),oe(!0),console.log("err",e)}));case 4:P(!B);case 5:case"end":return e.stop()}}),e)})))},"Reject")))),m.a.createElement(m.a.Fragment,null,m.a.createElement(E.Modal,{isOpen:se,onClose:function(){return oe(!1)}},m.a.createElement(E.ModalHeader,null,de),m.a.createElement(E.ModalBody,null),m.a.createElement(E.ModalFooter,null,m.a.createElement(E.Button,{className:"w-full sm:w-auto",onClick:function(){return oe(!1)}},"Okay!")))),m.a.createElement("div",{className:""},m.a.createElement("div",{class:"my-2 flex sm:flex-row flex-col items-start sm:items-center sm:justify-left h-full space-x-2 "},m.a.createElement("div",{class:"relative mx-1 "},m.a.createElement("select",{class:" shadow-md h-full rounded border block appearance-none w-full bg-white border-gray-400 text-gray-700 py-2 px-4 pr-8 leading-tight focus:outline-none   focus:bg-white focus:border-gray-500",value:F,onChange:function(e){H(e.target.value)}},m.a.createElement("option",{value:"",disabled:!0,selected:!0},"Status"),m.a.createElement("option",{value:""},"All"),m.a.createElement("option",{value:"Submitted"},"Submitted"),m.a.createElement("option",{value:"Rejected"},"Rejected"),m.a.createElement("option",{value:"Approved"},"Approved")),m.a.createElement("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},m.a.createElement("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},m.a.createElement("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})))))),m.a.createElement(E.TableContainer,{className:"mt-4"},m.a.createElement(E.Table,null,m.a.createElement(E.TableHeader,null,m.a.createElement("tr",null,m.a.createElement(E.TableCell,null,"Employee Name"),m.a.createElement(E.TableCell,null,"Start Date"),m.a.createElement(E.TableCell,null,"End Date"),m.a.createElement(E.TableCell,null,"Days"),m.a.createElement(E.TableCell,null,"Reason"),m.a.createElement(E.TableCell,null,"Status"))),m.a.createElement(E.TableBody,null,M.map((function(e,t){return m.a.createElement(E.TableRow,{className:"hover:shadow-lg dark:hover:bg-gray-600 ".concat(b==e._id?"bg-blue-300 shadow-lg dark:bg-gray-600":"white"," "),key:t,onClick:function(){j(e._id)}},m.a.createElement(E.TableCell,null,m.a.createElement("span",{className:"text-sm"},e.employeeName)),m.a.createElement(E.TableCell,null,m.a.createElement("span",{className:"text-sm"},i()(e.startdate).format("DD-MM-YYYY"))),m.a.createElement(E.TableCell,{className:"w-8"},m.a.createElement("div",null,m.a.createElement("p",{className:""},i()(e.enddate).format("DD-MM-YYYY")))),m.a.createElement(E.TableCell,{className:"w-8"},m.a.createElement("div",null,Math.floor((Date.parse(e.enddate)-Date.parse(e.startdate))/864e5)+1)),m.a.createElement(E.TableCell,{className:" w-64 break-all "},m.a.createElement("div",{className:"break-all w-80  overflow-hidden",style:{textOverflow:"clip"}},e.reason)),m.a.createElement(E.TableCell,null,"Submitted"==e.status?m.a.createElement(E.Button,{layout:"outline",className:"text-sm",onClick:function(){je(e),ne(!0)}},"Approve"):m.a.createElement("div",{className:"text-purple-700 dark:text-purple-400 font-semibold"},e.status)))})))),m.a.createElement(E.TableFooter,null,m.a.createElement(E.Pagination,{totalResults:fe,resultsPerPage:10,label:"Table navigation",onChange:function(e){k(e)}})))))}}}]);
//# sourceMappingURL=71.4ae8f3d1.chunk.js.map