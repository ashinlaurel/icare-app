/*! For license information please see 32.320badb1.chunk.js.LICENSE.txt */
(this["webpackJsonpwindmill-dashboard-react"]=this["webpackJsonpwindmill-dashboard-react"]||[]).push([[32],{1240:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(191),o=t(200),l=t(43),s=t(7),i=t(195),u=t(36),m=t(5),d=t.n(m),p=t(12),g=t(20),f=t.n(g),h=t(18),v=t(9).default,b=t(10).API,x=t(207).saveAs,C=t(37),y=C.capitalize,N=C.getCallStatusAsString,E=function(){var e=Object(p.a)(d.a.mark((function e(){var a,t,n,r,c,o,l,s,i,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],t={search:"",limit:1e6},e.prev=2,e.next=5,v({url:"".concat(b,"/admin/").concat(h.a.getId(),"/getAllEmpCalls"),method:"POST",data:t});case 5:n=e.sent,console.log(n.data),n.data.map((function(e){a.push(e)})),e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(2),e.t0;case 13:console.log(a),r=[],c=0;case 16:if(!(c<a.length)){e.next=32;break}return o={pages:{page:1,limit:1e5},filters:{callStatus:"",searchquery:"",fromDate:"",toDate:"",employeeId:a[c]._id}},e.prev=18,e.next=21,v({url:"".concat(b,"/call/").concat(h.a.getId(),"/getall"),method:"POST",data:o});case 21:l=e.sent,console.log(l.data.out),r.push(l.data.out),e.next=29;break;case 26:throw e.prev=26,e.t1=e.catch(18),e.t1;case 29:c++,e.next=16;break;case 32:for(s="CallNo,Date,Time,Unit,Phone,Product,SerialNumber,Problem,CallStatus,AssignedTo,AssignedDate,ETA,Priority,Age,\n",i=0;i<r.length;i++)r[i][0]&&(s+="".concat(y(r[i][0].employeeName),",\n")),r[i].map((function(e,a){s+="".concat(e.callNo,",").concat(f()(e.date).format("DD-MM-YYYY"),",").concat(f()("2018-04-02".concat("T",e.time)).format("h:mm a"),",").concat(e.unitName,",").concat(e.phone,",").concat(e.assetId.producttype,",").concat(e.assetId.ponumber,",").concat(e.problem,",").concat(N(e.callStatus),",").concat(e.employeeName?e.employeeName:"Not Assigned",",").concat(f()(e.assignedDate).format("DD-MM-YYYY"),",").concat(e.assignedETA,",").concat(a+1,",").concat(Math.round(f.a.duration(f()().startOf("day")-f()(e.assignedDate)).asDays()+1),"\n")}));u=new Blob([s],{type:"text/csv;charset=utf-8;"}),x(u,"CallsExport.csv");case 36:case"end":return e.stop()}}),e,null,[[2,10],[18,26]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(p.a)(d.a.mark((function e(a){var t,n,r,c,o,l,s,i,u,m;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n={search:"",limit:1e6},e.prev=2,e.next=5,v({url:"".concat(b,"/admin/").concat(h.a.getId(),"/getAllEmpCalls"),method:"POST",data:n});case 5:r=e.sent,console.log(r.data),r.data.map((function(e){t.push(e)})),e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(2),e.t0;case 13:console.log(t),c=[],o=0;case 16:if(!(o<t.length)){e.next=32;break}return l={pages:{page:1,limit:1e5},filters:{callStatus:"",searchquery:"",fromDate:"",toDate:"",employeeId:t[o]._id}},e.prev=18,e.next=21,v({url:"".concat(b,"/call/").concat(h.a.getId(),"/getall"),method:"POST",data:l});case 21:s=e.sent,console.log(s.data.out),c.push(s.data.out),e.next=29;break;case 26:throw e.prev=26,e.t1=e.catch(18),e.t1;case 29:o++,e.next=16;break;case 32:for(i="CallNo,Date,Time,Unit,Phone,Product,SerialNumber,Problem,CallStatus,AssignedTo,AssignedDate,ETA,Priority,Age,\n",u=0;u<c.length;u++)c[u][0]&&(i+="".concat(y(c[u][0].employeeName),",\n")),c[u].filter((function(e){if(Math.round(f.a.duration(f()().startOf("day")-f()(e.assignedDate)).asDays()+1)<3)return!1})).map((function(e,a){i+="".concat(e.callNo,",").concat(f()(e.date).format("DD-MM-YYYY"),",").concat(f()("2018-04-02".concat("T",e.time)).format("h:mm a"),",").concat(e.unitName,",").concat(e.phone,",").concat(e.assetId.producttype,",").concat(e.assetId.ponumber,",").concat(e.problem,",").concat(N(e.callStatus),",").concat(e.employeeName?e.employeeName:"Not Assigned",",").concat(f()(e.assignedDate).format("DD-MM-YYYY"),",").concat(e.assignedETA,",").concat(a+1,",").concat(Math.round(f.a.duration(f()().startOf("day")-f()(e.assignedDate)).asDays()+1),"\n")}));m=new Blob([i],{type:"text/csv;charset=utf-8;"}),x(m,"CallsExport.csv");case 36:case"end":return e.stop()}}),e,null,[[2,10],[18,26]])})));return function(a){return e.apply(this,arguments)}}();a.default=function(){Object(s.g)();var e=Object(n.useContext)(l.a).setTopHeading;return Object(n.useEffect)((function(){return e("Reports"),function(){e("")}}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(c.a,null,"Call Reports"),r.a.createElement("div",{className:"grid gap-6 mb-8 md:grid-cols-2 xl:grid-cols-4"},r.a.createElement("div",{className:" cursor-pointer",onClick:function(){return E()}},r.a.createElement(o.a,{className:"",title:"Click To Download",value:"Total Active Calls"},r.a.createElement(i.a,{icon:u.PeopleIcon,iconColorClass:"text-orange-500 dark:text-orange-100",bgColorClass:"bg-orange-100 dark:bg-orange-500",className:"mr-4"}))),r.a.createElement("div",{className:" cursor-pointer",onClick:function(){return k(2)}},r.a.createElement(o.a,{className:"",title:"Click To Download",value:"Calls > 24 hrs"},r.a.createElement(i.a,{icon:u.PeopleIcon,iconColorClass:"text-orange-500 dark:text-orange-100",bgColorClass:"bg-orange-100 dark:bg-orange-500",className:"mr-4"}))),r.a.createElement("div",{className:" cursor-pointer",onClick:function(){return k(3)}},r.a.createElement(o.a,{className:"",title:"Click To Download",value:"Calls > 3 days"},r.a.createElement(i.a,{icon:u.PeopleIcon,iconColorClass:"text-orange-500 dark:text-orange-100",bgColorClass:"bg-orange-100 dark:bg-orange-500",className:"mr-4"})))),r.a.createElement(c.a,null,"Asset Reports"))}},194:function(e,a,t){var n;!function(){"use strict";var t={}.hasOwnProperty;function r(){for(var e=[],a=0;a<arguments.length;a++){var n=arguments[a];if(n){var c=typeof n;if("string"===c||"number"===c)e.push(n);else if(Array.isArray(n)&&n.length){var o=r.apply(null,n);o&&e.push(o)}else if("object"===c)for(var l in n)t.call(n,l)&&n[l]&&e.push(l)}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(a,[]))||(e.exports=n)}()},195:function(e,a,t){"use strict";var n=t(0),r=t.n(n),c=t(194),o=t.n(c);a.a=function(e){var a=e.icon,t=e.iconColorClass,n=void 0===t?"text-purple-600 dark:text-purple-100":t,c=e.bgColorClass,l=void 0===c?"bg-purple-100 dark:bg-purple-600":c,s=e.className,i=o()("rounded-full p-5",n,l,s);return r.a.createElement("div",{className:i},r.a.createElement(a,{className:"w-6 h-6"}))}},200:function(e,a,t){"use strict";var n=t(0),r=t.n(n),c=t(2);a.a=function(e){var a=e.title,t=e.value,n=e.children;return r.a.createElement(c.Card,null,r.a.createElement(c.CardBody,{className:"flex items-center"},n,r.a.createElement("div",null,r.a.createElement("p",{className:"mb-2 text-sm font-medium text-gray-600 dark:text-gray-400"},a),r.a.createElement("p",{className:"text-lg font-semibold text-gray-700 dark:text-gray-200"},t))))}}}]);
//# sourceMappingURL=32.320badb1.chunk.js.map