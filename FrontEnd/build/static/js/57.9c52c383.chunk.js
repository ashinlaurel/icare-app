(this["webpackJsonpwindmill-dashboard-react"]=this["webpackJsonpwindmill-dashboard-react"]||[]).push([[57],{1084:function(e,t,a){"use strict";a.r(t);var n=a(3),l=a.n(n),r=a(10),c=a(2),o=a(0),s=a.n(o),i=a(18),u=a.n(i),m=a(7),d=a.n(m),p=a(15),E=(a(86),a(28)),f=a(1),b=a(8),g=a(30),w=a(29);a(19);t.default=function(){var e=Object(o.useState)(!1),t=Object(c.a)(e,2),a=t[0],n=t[1],i=Object(o.useState)(!1),m=Object(c.a)(i,2),h=m[0],v=m[1],S=Object(o.useContext)(g.a),C=(S.bbaropen,S.setBBarOpen),x=S.setAssetDetails,O=(S.assetdetails,Object(o.useState)(0)),y=Object(c.a)(O,2),k=y[0],j=y[1],D=Object(o.useContext)(w.a),N=(D.topheading,D.setTopHeading),I=Object(o.useState)(!1),M=Object(c.a)(I,2),P=(M[0],M[1],Object(o.useState)(1)),T=Object(c.a)(P,2),B=T[0],_=T[1],L=Object(o.useState)([]),A=Object(c.a)(L,2),z=A[0],R=A[1],F=Object(o.useState)(!1),U=Object(c.a)(F,2),H=U[0],Y=U[1],K=Object(o.useState)(!1),V=Object(c.a)(K,2),J=V[0],W=V[1],q=Object(o.useState)(!1),G=Object(c.a)(q,2),Q=G[0],X=G[1],Z=Object(o.useState)(!0),$=Object(c.a)(Z,2),ee=$[0],te=$[1],ae=Object(o.useState)(!0),ne=Object(c.a)(ae,2),le=ne[0],re=ne[1],ce=Object(o.useState)(""),oe=Object(c.a)(ce,2),se=oe[0],ie=oe[1],ue=Object(o.useState)(""),me=Object(c.a)(ue,2),de=me[0],pe=me[1],Ee=Object(o.useState)({_id:"",unitName:""}),fe=Object(c.a)(Ee,2),be=fe[0],ge=(fe[1],Object(o.useState)({_id:"",customerName:""})),we=Object(c.a)(ge,2),he=we[0],ve=(we[1],Object(o.useState)({_id:"",accountName:""})),Se=Object(c.a)(ve,2),Ce=Se[0],xe=(Se[1],Object(o.useState)({_id:"",enggName:""})),Oe=Object(c.a)(xe,2),ye=Oe[0],ke=(Oe[1],Object(o.useState)(!1)),je=Object(c.a)(ke,2),De=(je[0],je[1],Object(o.useState)({})),Ne=Object(c.a)(De,2),Ie=Ne[0],Me=Ne[1],Pe=Object(o.useState)(""),Te=Object(c.a)(Pe,2),Be=Te[0],_e=Te[1],Le=Object(o.useState)(""),Ae=Object(c.a)(Le,2),ze=Ae[0],Re=Ae[1],Fe=Object(o.useState)(""),Ue=Object(c.a)(Fe,2),He=Ue[0],Ye=Ue[1],Ke=Object(o.useState)(20),Ve=Object(c.a)(Ke,2),Je=Ve[0],We=Ve[1],qe=function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(f.Modal,{isOpen:a,onClose:function(){return n(!1)}},s.a.createElement(f.ModalHeader,null,"Set Call Status"),s.a.createElement(f.ModalBody,null,s.a.createElement("div",{className:"flex-col flex"},s.a.createElement("div",{className:"font-xl dark:text-white"},"Current Status:"),s.a.createElement(f.Button,{className:"font-xl"},"Set Status"),s.a.createElement(f.Button,{className:"font-xl my-2 mx-10 inline"},"Pending for Allocation"),s.a.createElement(f.Button,{className:"font-xl my-2 mx-10 inline"},"Pending for Allocation"),s.a.createElement(f.Button,{className:"font-xl my-2 mx-10 inline"},"Pending for Allocation"),s.a.createElement(f.Button,{className:"font-xl my-2 mx-10 inline"},"Pending for Allocation"))),s.a.createElement(f.ModalFooter,null,s.a.createElement(f.Button,{className:"w-full sm:w-auto",onClick:Object(r.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("SELECTED",Ie),t={id:Ie._id,update:{employeeId:ye._id,employeeName:ye.enggName,callStatus:1}},e.prev=2,e.next=5,d()({url:"".concat(b.a,"/call/").concat(p.a.getId(),"/ViewCallsg"),method:"POST",data:t});case 5:e.sent,a=z,console.log(a),a=a.filter((function(e){if(e._id===Ie._id)return e.callStatus=1,e.employeeName=ye.enggName,e.employeeId=ye._id,e;R(a)})),n(!1),e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(2),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,12]])})))},"Confirm Assignment"))))};Object(o.useEffect)((function(){return function(){C(0),x({})}}),[]),Object(o.useEffect)((function(){return N("My Calls"),function(){N("")}}),[]),Object(o.useEffect)((function(){!function(){var e=Object(r.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={pages:{page:B,limit:10},filters:{business:se,producttype:de,customer:he,account:Ce,unitId:be._id,customerId:he._id,accountId:Ce._id,searchtype:Be,searchquery:He,employeeId:p.a.getId()}},e.prev=1,e.next=4,d()({url:"".concat(b.a,"/call/").concat(p.a.getId(),"/getall"),method:"POST",data:t});case 4:a=e.sent,We(a.data.total),R(a.data.out),e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(1),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}()()}),[B,se,de,ee]);var Ge=function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(f.Modal,{isOpen:h,onClose:function(){return v(!1)}},s.a.createElement(f.ModalHeader,null,"Updated Successfully!"),s.a.createElement(f.ModalBody,null),s.a.createElement(f.ModalFooter,null,s.a.createElement(f.Button,{className:"w-full sm:w-auto",onClick:function(){return v(!1)}},"Okay!"))))};return s.a.createElement(s.a.Fragment,null,s.a.createElement(qe,null),s.a.createElement(Ge,null),s.a.createElement("div",{className:"mb-64 mt-4"},s.a.createElement("div",{className:""},s.a.createElement("div",{class:"my-2 flex sm:flex-row flex-col items-start sm:items-center sm:justify-left h-full space-x-6 "},s.a.createElement("div",{class:"relative  "},s.a.createElement("button",{class:" shadow-md appearance-none h-full rounded border block w-full bg-white border-gray-400 text-gray-700 py-2 px-4 pr-8 leading-tight focus:outline-none   focus:bg-white focus:border-gray-500",onClick:function(){X(!Q)}},"Pick Customer"),s.a.createElement("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},s.a.createElement("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},s.a.createElement("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})))),s.a.createElement("div",{class:"relative mx-5 "},s.a.createElement("select",{class:" shadow-md h-full rounded border block appearance-none w-full bg-white border-gray-400 text-gray-700 py-2 px-4 pr-8 leading-tight focus:outline-none   focus:bg-white focus:border-gray-500",value:se,onChange:function(e){ie(e.target.value)}},s.a.createElement("option",{value:"",disabled:!0,selected:!0},"Business Type"),s.a.createElement("option",{value:""},"All"),s.a.createElement("option",{value:"AMC"},"AMC"),s.a.createElement("option",{value:"WTY"},"Warranty"),s.a.createElement("option",{value:"NOS"},"NOS")),s.a.createElement("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},s.a.createElement("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},s.a.createElement("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})))),s.a.createElement("div",{className:"relative z-40 "},s.a.createElement("button",{onClick:function(){Y(!H)},className:"shadow-md z-20 appearance-none rounded border border-gray-400 border-b block pl-4 pr-6 py-2 w-full bg-white text-sm placeholder-gray-400 text-gray-700 focus:bg-white focus:placeholder-gray-600 focus:text-gray-700 focus:outline-none","aria-label":"Notifications","aria-haspopup":"true"},de||"Pick Product"),s.a.createElement("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},s.a.createElement("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},s.a.createElement("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"}))),s.a.createElement(f.Dropdown,{isOpen:H,onClose:function(){return Y(!1)}},s.a.createElement(f.DropdownItem,{onClick:function(){Y(!1),pe("")}},s.a.createElement("span",null,"All")),s.a.createElement(f.DropdownItem,{onClick:function(){Y(!1),pe("Console")}},s.a.createElement("span",null,"Console")),s.a.createElement(f.DropdownItem,{onClick:function(){Y(!1),pe("DMP")}},s.a.createElement("span",null,"DMP")),s.a.createElement(f.DropdownItem,{onClick:function(){Y(!1),pe("Inkjet")}},s.a.createElement("span",null,"Inkjet")),s.a.createElement(f.DropdownItem,{onClick:function(){Y(!1),pe("KVM")}},s.a.createElement("span",null,"KVM")),s.a.createElement(f.DropdownItem,{onClick:function(){Y(!1),pe("Laptop")}},s.a.createElement("span",null,"Laptop")),s.a.createElement(f.DropdownItem,{onClick:function(){Y(!1),pe("Laser")}},s.a.createElement("span",null,"Laser")),s.a.createElement(f.DropdownItem,{onClick:function(){Y(!1),pe("LMP")}},s.a.createElement("span",null,"LMP")),s.a.createElement(f.DropdownItem,{onClick:function(){Y(!1),pe("Module")}},s.a.createElement("span",null,"Module")),s.a.createElement(f.DropdownItem,{onClick:function(){Y(!1),pe("Router")}},s.a.createElement("span",null,"Router")),s.a.createElement(f.DropdownItem,{onClick:function(){Y(!1),pe("Scanner")}},s.a.createElement("span",null,"Scanner")),s.a.createElement(f.DropdownItem,{onClick:function(){Y(!1),pe("Server")}},s.a.createElement("span",null,"Server")),s.a.createElement(f.DropdownItem,{onClick:function(){Y(!1),pe("Desktop")}},s.a.createElement("span",null,"Desktop")),s.a.createElement(f.DropdownItem,{onClick:function(){Y(!1),pe("Storage")}},s.a.createElement("span",null,"Storage")),s.a.createElement(f.DropdownItem,{onClick:function(){Y(!1),pe("Switch")}},s.a.createElement("span",null,"Switch")),s.a.createElement(f.DropdownItem,{onClick:function(){Y(!1),pe("UPS")}},s.a.createElement("span",null,"UPS")),s.a.createElement(f.DropdownItem,{onClick:function(){Y(!1),pe("Others")}},s.a.createElement("span",null,"Others")))),s.a.createElement("div",{className:"relative "},s.a.createElement("button",{onClick:function(){W(!J)},className:"shadow-md z-20 appearance-none rounded border border-gray-400 border-b block pl-4 pr-6 py-2 w-full bg-white text-sm placeholder-gray-400 text-gray-700 focus:bg-white focus:placeholder-gray-600 focus:text-gray-700 focus:outline-none","aria-label":"Notifications","aria-haspopup":"true"},Be?ze:"Pick Search Type"),s.a.createElement("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},s.a.createElement("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},s.a.createElement("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"}))),s.a.createElement(f.Dropdown,{isOpen:J,onClose:function(){return W(!1)}},s.a.createElement(f.DropdownItem,{onClick:function(){W(!1),_e(""),Re(""),re(!0),Ye(""),te(!ee)}},s.a.createElement("span",null,"All")),s.a.createElement(f.DropdownItem,{onClick:function(){W(!1),_e("kbdsno"),Re("Keyboard Serial"),re(!1)}},s.a.createElement("span",null,"Keyboard Serial")),s.a.createElement(f.DropdownItem,{onClick:function(){W(!1),_e("mousesno"),Re("Mouse Serial"),re(!1)}},s.a.createElement("span",null,"Mouse Serial")),s.a.createElement(f.DropdownItem,{onClick:function(){W(!1),_e("motherboardsno"),Re("Motherboard Serial"),re(!1)}},s.a.createElement("span",null,"Motherboard Serial")),s.a.createElement(f.DropdownItem,{onClick:function(){W(!1),_e("monitorsno"),Re("Monitor Serial"),re(!1)}},s.a.createElement("span",null,"Monitor Serial")),s.a.createElement(f.DropdownItem,{onClick:function(){W(!1),_e("hddsno"),Re("HDD Serial"),re(!1)}},s.a.createElement("span",null,"HDD Serial")),s.a.createElement(f.DropdownItem,{onClick:function(){W(!1),_e("cpusno"),Re("CPU Serial"),re(!1)}},s.a.createElement("span",null,"CPU Serial")),s.a.createElement(f.DropdownItem,{onClick:function(){W(!1),_e("ramsno"),Re("Ram Serial"),re(!1)}},s.a.createElement("span",null,"RAM Serial")),s.a.createElement(f.DropdownItem,{onClick:function(){W(!1),_e("smpssno"),Re("SMPS Serial"),re(!1)}},s.a.createElement("span",null,"SMPS Serial")),s.a.createElement(f.DropdownItem,{onClick:function(){W(!1),_e("fansno"),Re("Fan Serial"),re(!1)}},s.a.createElement("span",null,"Fan Serial")),s.a.createElement(f.DropdownItem,{onClick:function(){W(!1),_e("opticaldrivesno"),Re("Optical Drive Serial"),re(!1)}},s.a.createElement("span",null,"Optical Drive Serial")))),s.a.createElement("div",{class:"block relative xl:ml-64"},s.a.createElement("span",{class:"h-full absolute inset-y-0 left-0 flex items-center pl-2"},s.a.createElement("svg",{viewBox:"0 0 24 24",class:"h-4 w-4 fill-current text-gray-500"},s.a.createElement("path",{d:"M10 4a6 6 0 100 12 6 6 0 000-12zm-8 6a8 8 0 1114.32 4.906l5.387 5.387a1 1 0 01-1.414 1.414l-5.387-5.387A8 8 0 012 10z"}))),s.a.createElement("form",{onSubmit:function(e){e.preventDefault(),te(!ee)}},s.a.createElement("input",{value:He,onChange:function(e){return Ye(e.target.value)},placeholder:"Search",disabled:le,class:"shadow-md z-20 appearance-none rounded border border-gray-400 border-b block pl-8 pr-6 py-2 w-full bg-white text-sm placeholder-gray-400 text-gray-700 focus:bg-white focus:placeholder-gray-600 focus:text-gray-700 focus:outline-none"}))))),s.a.createElement(f.TableContainer,{className:"mt-4"},s.a.createElement(f.Table,null,s.a.createElement(f.TableHeader,null,s.a.createElement("tr",null,s.a.createElement(f.TableCell,null,"Call No"),s.a.createElement(f.TableCell,null,"Date"),s.a.createElement(f.TableCell,null,"Unit Name"),s.a.createElement(f.TableCell,null,"Phone"),s.a.createElement(f.TableCell,null,"Call Status"))),s.a.createElement(f.TableBody,null,z.map((function(e,t){return s.a.createElement(f.TableRow,{className:"hover:shadow-lg dark:hover:bg-gray-600 ".concat(k==e._id?"bg-blue-300 shadow-lg dark:bg-gray-600":"white"," "),key:t,onClick:function(){j(e._id),C(1),Me(e),console.log("SELECTD",e),x(e.assetId)}},s.a.createElement(f.TableCell,{className:"w-8"},s.a.createElement("div",{className:"flex items-center text-sm "},s.a.createElement("div",null,s.a.createElement("p",{className:"font-semibold"},e.callNo)))),s.a.createElement(f.TableCell,null,s.a.createElement("span",{className:"text-sm"},u()(e.date).format("DD/MM/YYYY"))),s.a.createElement(f.TableCell,null,s.a.createElement("span",{className:"text-sm"},e.unitName)),s.a.createElement(f.TableCell,null,s.a.createElement("span",{className:"text-sm"},e.phone)),s.a.createElement(f.TableCell,null,s.a.createElement("div",{className:"flex "},s.a.createElement(f.Select,{className:"inline",onChange:function(t){var a=z;console.log(a),a=a.filter((function(a){return a._id===e._id?(a.callStatus=t.target.value,a):a})),R(a)},value:e.callStatus},s.a.createElement("option",{value:"0"},"Not Allocated"),s.a.createElement("option",{value:"1"},"Pending for Percall Approval"),s.a.createElement("option",{value:"2"}," Pending for Response"),s.a.createElement("option",{value:"3"}," Pending for OEM Response"),s.a.createElement("option",{value:"4"}," Pending for 2nd Response"),s.a.createElement("option",{value:"5"}," Pending for Customer"),s.a.createElement("option",{value:"6"}," Under Observation"),s.a.createElement("option",{value:"7"}," Pending for Others"),s.a.createElement("option",{value:"8"}," Pending for Spare"),s.a.createElement("option",{value:"9"}," Spare in Transit"),s.a.createElement("option",{value:"10"}," Cancelled Calls"),s.a.createElement("option",{value:"11"}," Closed Calls")),s.a.createElement("div",{className:"p-1 m-2 dark:hover:bg-green-700 hover:bg-green-200 rounded-full text-green-400",onClick:Object(r.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={id:e._id,update:{callStatus:e.callStatus}},t.prev=1,t.next=4,d()({url:"".concat(b.a,"/call/").concat(p.a.getId(),"/assignEngg"),method:"POST",data:a});case 4:t.sent,console.log("updated"),v(!0),t.next=12;break;case 9:throw t.prev=9,t.t0=t.catch(1),t.t0;case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))},s.a.createElement(E.TickIcon,{className:"w-5 h-5 fill-current","aria-hidden":"true"})))))})))),s.a.createElement(f.TableFooter,null,s.a.createElement(f.Pagination,{totalResults:Je,resultsPerPage:10,label:"Table navigation",onChange:function(e){_(e)}})))))}}}]);
//# sourceMappingURL=57.9c52c383.chunk.js.map