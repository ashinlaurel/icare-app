{"version":3,"sources":["pages/Attendance/MarkAttendance.js"],"names":["MarkAttendance","useHistory","setTopHeading","useContext","TopBarContext","useState","statusChecker","setStatusChecker","useEffect","PresentChecker","a","payload","employee","Emp","getId","employeeName","getName","month","moment","format","year","monthDayCount","daysInMonth","today","date","dayNo","isPresent","Axios","url","API","method","data","then","console","log","catch","err","handleButton","className","onClick","disabled"],"mappings":"+QAkHeA,UArGf,WACgBC,cAAd,IACQC,EAAkBC,qBAAWC,KAA7BF,cAFgB,EAGkBG,mBAAS,IAH3B,mBAGjBC,EAHiB,KAGFC,EAHE,KAOxBC,qBAAU,WAGR,OAFAN,EAAc,mBACdO,IACO,WACLP,EAAc,OAEf,IAGH,IAAMO,EAAc,uCAAG,4BAAAC,EAAA,6DACjBC,EAAU,CACZC,SAAUC,IAAIC,QACdC,aAAcF,IAAIG,UAClBC,MAAOC,MAASC,OAAO,QACvBC,KAAMF,MAASC,OAAO,QACtBE,cAAeH,MAASI,cACxBC,MAAO,CACLC,KAAMN,MAASC,OAAO,YACtBM,MAAOP,MAASC,OAAO,MACvBO,UAAW,KAVM,SAafC,IAAM,CACVC,IAAI,GAAD,OAAKC,IAAL,uBAAuBhB,IAAIC,QAA3B,oBACHgB,OAAQ,OACRC,KAAMpB,IAELqB,MAAK,SAACD,GACLE,QAAQC,IAAI,yBACZD,QAAQC,IAAIH,EAAKA,KAAKL,WACtBnB,EAAiBwB,EAAKA,KAAKL,cAE5BS,OAAM,SAACC,GACNH,QAAQC,IAAI,MAAOE,MAxBF,2CAAH,qDA4BdC,EAAY,uCAAG,4BAAA3B,EAAA,6DACfC,EAAU,CACZC,SAAUC,IAAIC,QACdC,aAAcF,IAAIG,UAClBC,MAAOC,MAASC,OAAO,QACvBC,KAAMF,MAASC,OAAO,QACtBE,cAAeH,MAASI,cACxBC,MAAO,CACLC,KAAMN,MAASC,OAAO,YACtBM,MAAOP,MAASC,OAAO,MACvBO,UAAW,YAVI,SAabC,IAAM,CACVC,IAAI,GAAD,OAAKC,IAAL,uBAAuBhB,IAAIC,QAA3B,mBACHgB,OAAQ,OACRC,KAAMpB,IAELqB,MAAK,SAACD,GACLE,QAAQC,IAAI,SACZzB,OAED0B,OAAM,SAACC,GACNH,QAAQC,IAAI,MAAOE,MAvBJ,2CAAH,qDA4BlB,OACE,oCACE,yBAAKE,UAAU,SACb,kBAAC,OAAD,CAAMA,UAAU,kBACd,kBAAC,WAAD,KACE,yBAAKA,UAAU,qCACZ,IADH,SAESpB,MAASC,OAAO,aAEzB,wBAAImB,UAAU,SACd,yBAAKA,UAAU,6CACb,kBAAC,SAAD,CACEC,QAAS,WACPF,KAEFG,SAA2B,WAAjBlC,GAEQ,WAAjBA,EACG,iBACA","file":"static/js/58.b6e924de.chunk.js","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport { API } from \"../../backendapi\";\n\nimport Emp from \"../../helpers/auth/EmpProfile\";\n\nimport { Button, Card, CardBody } from \"@windmill/react-ui\";\n\nimport { TopBarContext } from \"../../context/TopBarContext\";\n\nimport { useHistory } from \"react-router-dom\";\nimport moment from \"moment\";\nimport Axios from \"axios\";\n\nfunction MarkAttendance() {\n  let history = useHistory();\n  const { setTopHeading } = useContext(TopBarContext);\n  const [statusChecker, setStatusChecker] = useState(\"\");\n\n  // ----------------------Heading Use Effect-------------\n\n  useEffect(() => {\n    setTopHeading(\"Mark Attendance\");\n    PresentChecker();\n    return () => {\n      setTopHeading(\"\");\n    };\n  }, []);\n  // -----------------------------------------------------\n\n  const PresentChecker = async () => {\n    let payload = {\n      employee: Emp.getId(),\n      employeeName: Emp.getName(),\n      month: moment().format(\"MMMM\"),\n      year: moment().format(\"YYYY\"),\n      monthDayCount: moment().daysInMonth(),\n      today: {\n        date: moment().format(\"DD-MM-YY\"),\n        dayNo: moment().format(\"DD\"),\n        isPresent: \"\",\n      },\n    };\n    await Axios({\n      url: `${API}/attendance/${Emp.getId()}/checkAttendance`,\n      method: \"POST\",\n      data: payload,\n    })\n      .then((data) => {\n        console.log(\"********88***********\");\n        console.log(data.data.isPresent);\n        setStatusChecker(data.data.isPresent);\n      })\n      .catch((err) => {\n        console.log(\"err\", err);\n        // setErr({ ...err });\n      });\n  };\n  const handleButton = async () => {\n    let payload = {\n      employee: Emp.getId(),\n      employeeName: Emp.getName(),\n      month: moment().format(\"MMMM\"),\n      year: moment().format(\"YYYY\"),\n      monthDayCount: moment().daysInMonth(),\n      today: {\n        date: moment().format(\"DD-MM-YY\"),\n        dayNo: moment().format(\"DD\"),\n        isPresent: \"Present\",\n      },\n    };\n    await Axios({\n      url: `${API}/attendance/${Emp.getId()}/markAttendance`,\n      method: \"POST\",\n      data: payload,\n    })\n      .then((data) => {\n        console.log(\"hello\");\n        PresentChecker();\n      })\n      .catch((err) => {\n        console.log(\"err\", err);\n        // setErr({ ...err });\n      });\n  };\n\n  return (\n    <>\n      <div className=\"w-1/4\">\n        <Card className=\"my-8 shadow-md\">\n          <CardBody>\n            <div className=\"dark:text-white text-xl font-bold\">\n              {\" \"}\n              Date: {moment().format(\"DD-MM-YY\")}\n            </div>\n            <hr className=\"my-3\"></hr>\n            <div className=\"flex-row flex items-center justify-center\">\n              <Button\n                onClick={() => {\n                  handleButton();\n                }}\n                disabled={statusChecker == \"Present\" ? true : false}\n              >\n                {statusChecker == \"Present\"\n                  ? \"Already Marked\"\n                  : \"Mark Attendance\"}\n              </Button>\n            </div>\n          </CardBody>\n        </Card>\n      </div>\n    </>\n  );\n}\n\nexport default MarkAttendance;\n"],"sourceRoot":""}