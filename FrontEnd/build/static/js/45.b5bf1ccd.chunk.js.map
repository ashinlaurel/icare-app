{"version":3,"sources":["pages/Customers/CustomerLogin.js"],"names":["CustomerLogin","history","useHistory","useEffect","console","log","CustProfile","getUsername","push","a","Axios","url","API","method","response","useState","username","password","values","setValues","err","setErr","handleChange","name","e","target","value","handleSubmit","preventDefault","newuser","signin","then","data","user","_id","setName","CustomerName","setUsername","setToken","token","setId","localStorage","setItem","catch","className","aria-hidden","src","ImageLight","alt","ImageDark","placeholder","onChange","type","block","tag","Link","onClick","valid"],"mappings":"+TAoKeA,UAtJf,WACE,IAAIC,EAAUC,cAEdC,qBAAU,WACRC,QAAQC,IAAI,UAAWC,IAAYC,eAC/BD,IAAYC,eAAeN,EAAQO,KAAK,4BAC3C,IAEHL,qBAAU,YAER,uCAAC,4BAAAM,EAAA,+EAMwBC,IAAM,CACzBC,IAAI,GAAD,OAAKC,IAAL,SACHC,OAAQ,QARb,OAMOC,EANP,OAUGV,QAAQC,IAAIS,GAVf,oHAAD,yDAgBC,IA1BoB,MA6BKC,mBAAS,CACnCC,SAAU,QACVC,SAAU,aA/BW,mBA6BhBC,EA7BgB,KA6BRC,EA7BQ,OAiCDJ,qBAjCC,mBAiChBK,EAjCgB,KAiCXC,EAjCW,KAmCjBC,EAAe,SAACC,GAAD,OAAU,SAACC,GAC9BL,EAAU,2BAAKD,GAAN,kBAAeK,EAAOC,EAAEC,OAAOC,WAGpCC,EAAY,uCAAG,WAAOH,GAAP,eAAAf,EAAA,yDACnBe,EAAEI,iBACIC,EAAU,CACdb,SAAUE,EAAOF,SACjBC,SAAUC,EAAOD,UAEK,KAApBC,EAAOF,UAAsC,IAAnBE,EAAOD,SANlB,uBAOjBI,EAAO,sCAPU,0BAUnBS,YAAOD,EAAS,mBACbE,MAAK,SAACC,GACL5B,QAAQC,IAAI,YAAa2B,EAAKC,KAAKC,KACnC5B,IAAY6B,QAAQH,EAAKC,KAAKG,cAC9B9B,IAAY+B,YAAYL,EAAKC,KAAKjB,UAClCV,IAAYgC,SAASN,EAAKO,OAC1BjC,IAAYkC,MAAMR,EAAKC,KAAKC,KAC5BO,aAAaC,QAAQ,OAAQ,GAC7BtC,QAAQC,IAAI,iBACZJ,EAAQO,KAAK,6BAKdmC,OAAM,SAACvB,GACNC,EAAOD,MAzBQ,2CAAH,sDA8BlB,OACE,yBAAKwB,UAAU,kEACb,yBAAKA,UAAU,kGACb,yBAAKA,UAAU,6CACb,yBAAKA,UAAU,2BACb,yBACEC,cAAY,OACZD,UAAU,yCACVE,IAAKC,IACLC,IAAI,WAEN,yBACEH,cAAY,OACZD,UAAU,+CACVE,IAAKG,IACLD,IAAI,YAGR,0BAAMJ,UAAU,yDACd,yBAAKA,UAAU,UACb,wBAAIA,UAAU,+DAAd,kBAGA,kBAAC,QAAD,KACE,0CACA,kBAAC,QAAD,CACEA,UAAU,OACVM,YAAY,WACZxB,MAAOR,EAAOF,SACdmC,SAAU7B,EAAa,eAI3B,kBAAC,QAAD,CAAOsB,UAAU,QACf,0CACA,kBAAC,QAAD,CACEA,UAAU,OACVQ,KAAK,WACLF,YAAY,GACZxB,MAAOR,EAAOD,SACdkC,SAAU7B,EAAa,eAI3B,kBAAC,SAAD,CACEsB,UAAU,OACVS,OAAK,EACLC,IAAKC,IAELC,QAAS7B,GALX,UASA,kBAAC,aAAD,CAAY8B,OAAO,GAAQrC","file":"static/js/45.b5bf1ccd.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link, Redirect } from \"react-router-dom\";\n\nimport ImageLight from \"../../assets/img/login-office.jpeg\";\nimport ImageDark from \"../../assets/img/login-office-dark.jpeg\";\nimport { GithubIcon, TwitterIcon } from \"../../icons\";\nimport { Label, Input, Button } from \"@windmill/react-ui\";\nimport { signin, authenticate, isAutheticated } from \"../../helpers/auth\";\nimport { HelperText } from \"@windmill/react-ui\";\nimport { useHistory } from \"react-router-dom\";\nimport CustProfile from \"../../helpers/auth/CustProfile\";\nimport Axios from \"axios\";\nimport { API } from \"../../backendapi\";\n\nfunction CustomerLogin() {\n  let history = useHistory();\n\n  useEffect(() => {\n    console.log(\"empName\", CustProfile.getUsername());\n    if (CustProfile.getUsername()) history.push(\"/app/myassets/accounts\");\n  }, []);\n\n  useEffect(() => {\n    // Using an IIFE\n    (async function thegetter() {\n      // console.log(\"Testing Route\");\n      // console.log(`${API}/test`);\n      // console.log(`${API}/asset/${Emp.getId()}/getall`);\n\n      try {\n        let response = await Axios({\n          url: `${API}/test`,\n          method: \"GET\",\n        });\n        console.log(response);\n      } catch (error) {\n        throw error;\n      }\n    })();\n    // setData(response.slice((page - 1) * resultsPerPage, page * resultsPerPage));\n  }, []);\n\n  // isAutheticated();\n  const [values, setValues] = useState({\n    username: \"ftest\",\n    password: \"password\",\n  });\n  const [err, setErr] = useState();\n\n  const handleChange = (name) => (e) => {\n    setValues({ ...values, [name]: e.target.value });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const newuser = {\n      username: values.username,\n      password: values.password,\n    };\n    if (values.username === \"\" || values.password == \"\") {\n      setErr(\"Please enter username and password\");\n      return;\n    }\n    signin(newuser, \"customer/signin\")\n      .then((data) => {\n        console.log(\"Signed In\", data.user._id);\n        CustProfile.setName(data.user.CustomerName);\n        CustProfile.setUsername(data.user.username);\n        CustProfile.setToken(data.token);\n        CustProfile.setId(data.user._id);\n        localStorage.setItem(\"type\", 1); ///////-----------------------------> 0 for employee 1 for customer\n        console.log(\"authenticated\");\n        history.push(\"/app/myassets/accounts\");\n        // return <Redirect to=\"/app\" />;\n        // });\n        ///test\n      })\n      .catch((err) => {\n        setErr(err);\n        // console.log(\"err\", err);\n      });\n  };\n\n  return (\n    <div className=\"flex items-center min-h-screen p-6 bg-gray-50 dark:bg-gray-900\">\n      <div className=\"flex-1 h-full max-w-4xl mx-auto overflow-hidden bg-white rounded-lg shadow-xl dark:bg-gray-800\">\n        <div className=\"flex flex-col overflow-y-auto md:flex-row\">\n          <div className=\"h-32 md:h-auto md:w-1/2\">\n            <img\n              aria-hidden=\"true\"\n              className=\"object-cover w-full h-full dark:hidden\"\n              src={ImageLight}\n              alt=\"Office\"\n            />\n            <img\n              aria-hidden=\"true\"\n              className=\"hidden object-cover w-full h-full dark:block\"\n              src={ImageDark}\n              alt=\"Office\"\n            />\n          </div>\n          <main className=\"flex items-center justify-center p-6 sm:p-12 md:w-1/2\">\n            <div className=\"w-full\">\n              <h1 className=\"mb-4 text-xl font-semibold text-gray-700 dark:text-gray-200\">\n                Customer Login\n              </h1>\n              <Label>\n                <span>Username</span>\n                <Input\n                  className=\"mt-1\"\n                  placeholder=\"username\"\n                  value={values.username}\n                  onChange={handleChange(\"username\")}\n                />\n              </Label>\n\n              <Label className=\"mt-4\">\n                <span>Password</span>\n                <Input\n                  className=\"mt-1\"\n                  type=\"password\"\n                  placeholder=\"\"\n                  value={values.password}\n                  onChange={handleChange(\"password\")}\n                />\n              </Label>\n\n              <Button\n                className=\"mt-4\"\n                block\n                tag={Link}\n                // to=\"/app\"\n                onClick={handleSubmit}\n              >\n                Log in\n              </Button>\n              <HelperText valid={false}>{err}</HelperText>\n\n              {/* <hr className=\"my-8\" />\n\n              <p className=\"mt-4\">\n                <Link\n                  className=\"text-sm font-medium text-purple-600 dark:text-purple-400 hover:underline\"\n                  to=\"/forgot-password\"\n                >\n                  Forgot your password?\n                </Link>\n              </p>\n              <p className=\"mt-1\">\n                <Link\n                  className=\"text-sm font-medium text-purple-600 dark:text-purple-400 hover:underline\"\n                  to=\"/create-account\"\n                >\n                  Create account\n                </Link>\n              </p> */}\n            </div>\n          </main>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default CustomerLogin;\n"],"sourceRoot":""}